[{"title":"gité£è¡Œè§„åˆ™","url":"http://yoursite.com/2019/09/27/gité£è¡Œè§„åˆ™/","content":"<blockquote>\n<p>githubçœ‹åˆ°çš„å…³äºgitæ—¥å¸¸æ“ä½œï¼Œè½¬è¿‡æ¥äº†</p>\n</blockquote>\n<h1 id=\"Gité£è¡Œè§„åˆ™-Flight-Rules\"><a href=\"#Gité£è¡Œè§„åˆ™-Flight-Rules\" class=\"headerlink\" title=\"Gité£è¡Œè§„åˆ™(Flight Rules)\"></a>Gité£è¡Œè§„åˆ™(Flight Rules)</h1><!-- ğŸŒ\n*[English](README.md) âˆ™ [EspaÃ±ol](README_es.md)  âˆ™  [Ğ ÑƒÑÑĞºĞ¸Ğ¹](README_ru.md) âˆ™ [ç®€ä½“ä¸­æ–‡](README_zh-CN.md)âˆ™ [í•œêµ­ì–´](README_kr.md)  âˆ™  [Tiáº¿ng Viá»‡t](README_vi.md) âˆ™ [FranÃ§ais](README_fr.md)* -->\n<h4 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h4><!-- - è‹±æ–‡åŸç‰ˆ[README](https://github.com/k88hudson/git-flight-rules/blob/master/README.md) -->\n<ul>\n<li>ç¿»è¯‘å¯èƒ½å­˜åœ¨é”™è¯¯æˆ–ä¸æ ‡å‡†çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£å’Œä¿®æ”¹ï¼Œè°¢è°¢ï¼</li>\n</ul>\n<h4 id=\"ä»€ä¹ˆæ˜¯â€é£è¡Œè§„åˆ™â€\"><a href=\"#ä»€ä¹ˆæ˜¯â€é£è¡Œè§„åˆ™â€\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯â€é£è¡Œè§„åˆ™â€?\"></a>ä»€ä¹ˆæ˜¯â€é£è¡Œè§„åˆ™â€?</h4><p>è¿™æ˜¯ä¸€ç¯‡ç»™å®‡èˆªå‘˜ï¼ˆè¿™é‡Œå°±æ˜¯æŒ‡ä½¿ç”¨Gitçš„ç¨‹åºå‘˜ä»¬ï¼‰çš„æŒ‡å—ï¼Œç”¨æ¥æŒ‡å¯¼é—®é¢˜å‡ºç°åçš„åº”å¯¹ä¹‹æ³•ã€‚</p>\n<blockquote>\n<p> <em>é£è¡Œè§„åˆ™(Flight Rules)</em> æ˜¯è®°å½•åœ¨æ‰‹å†Œä¸Šçš„æ¥ä¹‹ä¸æ˜“çš„ä¸€ç³»åˆ—çŸ¥è¯†ï¼Œè®°å½•äº†æŸä¸ªäº‹æƒ…å‘ç”Ÿçš„åŸå› ï¼Œä»¥åŠæ€æ ·ä¸€æ­¥ä¸€æ­¥çš„è¿›è¡Œå¤„ç†ã€‚æœ¬è´¨ä¸Š, å®ƒä»¬æ˜¯ç‰¹å®šåœºæ™¯çš„éå¸¸è¯¦ç»†çš„æ ‡å‡†å¤„ç†æµç¨‹ã€‚ [â€¦]</p>\n</blockquote>\n<blockquote>\n<p>è‡ª20ä¸–çºª60å¹´ä»£åˆä»¥æ¥ï¼ŒNASAä¸€ç›´åœ¨æ•æ‰(capturing)æˆ‘ä»¬çš„å¤±è¯¯ï¼Œç¾éš¾å’Œè§£å†³æ–¹æ¡ˆ, å½“æ—¶æ°´æ˜Ÿæ—¶ä»£(Mercury-era)çš„åœ°é¢å°ç»„é¦–å…ˆå¼€å§‹å°†â€œç»éªŒæ•™è®­â€æ”¶é›†åˆ°ä¸€ä¸ªçº²è¦(compendium)ä¸­ï¼Œè¯¥çº²ç°åœ¨å·²ç»æœ‰ä¸Šåƒä¸ªé—®é¢˜æƒ…æ™¯ï¼Œä»å‘åŠ¨æœºæ•…éšœåˆ°ç ´æŸçš„èˆ±å£æŠŠæ‰‹åˆ°è®¡ç®—æœºæ•…éšœï¼Œä»¥åŠå®ƒä»¬å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p>\n</blockquote>\n<p>&mdash; Chris Hadfield, <em>ä¸€ä¸ªå®‡èˆªå‘˜çš„ç”Ÿæ´»æŒ‡å—(An Astronautâ€™s Guide to Life)</em>ã€‚</p>\n<h4 id=\"è¿™ç¯‡æ–‡ç« çš„çº¦å®š\"><a href=\"#è¿™ç¯‡æ–‡ç« çš„çº¦å®š\" class=\"headerlink\" title=\"è¿™ç¯‡æ–‡ç« çš„çº¦å®š\"></a>è¿™ç¯‡æ–‡ç« çš„çº¦å®š</h4><p>ä¸ºäº†æ¸…æ¥šçš„è¡¨è¿°ï¼Œè¿™ç¯‡æ–‡æ¡£é‡Œçš„æ‰€æœ‰ä¾‹å­ä½¿ç”¨äº†è‡ªå®šä¹‰çš„bash æç¤ºï¼Œä»¥ä¾¿æŒ‡ç¤ºå½“å‰åˆ†æ”¯å’Œæ˜¯å¦æœ‰æš‚å­˜çš„å˜åŒ–(changes)ã€‚åˆ†æ”¯åç”¨å°æ‹¬å·æ‹¬èµ·æ¥ï¼Œåˆ†æ”¯ååé¢è·Ÿçš„<code>*</code>è¡¨ç¤ºæš‚å­˜çš„å˜åŒ–(changes)ã€‚</p>\n<p><a href=\"https://gitter.im/k88hudson/git-flight-rules?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge\" target=\"_blank\" rel=\"noopener\"><img src=\"https://badges.gitter.im/Join%20Chat.svg\" alt=\"Join the chat at https://gitter.im/k88hudson/git-flight-rules\"></a><br><!-- START doctoc generated TOC please keep comment here to allow auto update --><br><!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --><br><!-- **Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)* --></p>\n  <!-- - [ç¼–è¾‘æäº¤(editting commits)](#%E7%BC%96%E8%BE%91%E6%8F%90%E4%BA%A4editting-commits)\n    - [æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ?](#%E6%88%91%E5%88%9A%E6%89%8D%E6%8F%90%E4%BA%A4%E4%BA%86%E4%BB%80%E4%B9%88)\n    - [æˆ‘çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†](#%E6%88%91%E7%9A%84%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AFcommit-message%E5%86%99%E9%94%99%E4%BA%86)\n    - [æˆ‘æäº¤(commit)é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹](#%E6%88%91%E6%8F%90%E4%BA%A4commit%E9%87%8C%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1%E4%B8%8D%E5%AF%B9)\n    - [æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BB%8E%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E9%87%8C%E7%A7%BB%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6)\n    - [æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤(commit)](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E6%88%91%E7%9A%84%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4commit)\n    - [åˆ é™¤ä»»æ„æäº¤(commit)](#%E5%88%A0%E9%99%A4%E4%BB%BB%E6%84%8F%E6%8F%90%E4%BA%A4commit)\n    - [æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š](#%E6%88%91%E5%B0%9D%E8%AF%95%E6%8E%A8%E4%B8%80%E4%B8%AA%E4%BF%AE%E6%AD%A3%E5%90%8E%E7%9A%84%E6%8F%90%E4%BA%A4amended-commit%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BD%86%E6%98%AF%E6%8A%A5%E9%94%99)\n    - [æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹](#%E6%88%91%E6%84%8F%E5%A4%96%E7%9A%84%E5%81%9A%E4%BA%86%E4%B8%80%E6%AC%A1%E7%A1%AC%E9%87%8D%E7%BD%AEhard-reset%E6%88%91%E6%83%B3%E6%89%BE%E5%9B%9E%E6%88%91%E7%9A%84%E5%86%85%E5%AE%B9)\n  - [æš‚å­˜(Staging)](#%E6%9A%82%E5%AD%98staging)\n    - [æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%B7%BB%E5%8A%A0%E5%88%B0%E4%B8%8A%E4%B8%80%E6%AC%A1%E7%9A%84%E6%8F%90%E4%BA%A4commit)\n    - [æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨](#%E6%88%91%E6%83%B3%E8%A6%81%E6%9A%82%E5%AD%98%E4%B8%80%E4%B8%AA%E6%96%B0%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E8%80%8C%E4%B8%8D%E6%98%AF%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E5%85%A8%E9%83%A8)\n    - [æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–(changes)åŠ åˆ°ä¸¤ä¸ªæäº¤(commit)é‡Œ](#%E6%88%91%E6%83%B3%E6%8A%8A%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E9%87%8C%E7%9A%84%E5%8F%98%E5%8C%96changes%E5%8A%A0%E5%88%B0%E4%B8%A4%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E9%87%8C)\n    - [æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E5%8F%98%E6%88%90%E6%9C%AA%E6%9A%82%E5%AD%98%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%9A%82%E5%AD%98%E8%B5%B7%E6%9D%A5)\n  - [æœªæš‚å­˜(Unstaged)çš„å†…å®¹](#%E6%9C%AA%E6%9A%82%E5%AD%98unstaged%E7%9A%84%E5%86%85%E5%AE%B9)\n    - [æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF)\n    - [æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E5%88%86%E6%94%AF)\n    - [æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–(uncommitted changes)](#%E6%88%91%E6%83%B3%E4%B8%A2%E5%BC%83%E6%9C%AC%E5%9C%B0%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E5%8F%98%E5%8C%96uncommitted-changes)\n    - [æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹](#%E6%88%91%E6%83%B3%E4%B8%A2%E5%BC%83%E6%9F%90%E4%BA%9B%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9)\n  - [åˆ†æ”¯(Branches)](#%E5%88%86%E6%94%AFbranches)\n    - [æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯](#%E6%88%91%E4%BB%8E%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF%E6%8B%89%E5%8F%96%E4%BA%86%E5%86%85%E5%AE%B9%E6%88%96%E6%8A%8A%E5%86%85%E5%AE%B9%E6%8B%89%E5%8F%96%E5%88%B0%E4%BA%86%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF)\n    - [æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´](#%E6%88%91%E6%83%B3%E6%89%94%E6%8E%89%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%8F%90%E4%BA%A4commit%E4%BB%A5%E4%BE%BF%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%9C%E7%A8%8B%E7%9A%84%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4)\n    - [æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†master](#%E6%88%91%E9%9C%80%E8%A6%81%E6%8F%90%E4%BA%A4%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF%E4%BD%86%E9%94%99%E8%AF%AF%E7%9A%84%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86master)\n    - [æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BF%9D%E7%95%99%E6%9D%A5%E8%87%AA%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AAref-ish%E7%9A%84%E6%95%B4%E4%B8%AA%E6%96%87%E4%BB%B6)\n    - [æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ](#%E6%88%91%E6%8A%8A%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86%E5%90%8C%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E8%80%8C%E8%BF%99%E4%BA%9B%E6%8F%90%E4%BA%A4%E5%BA%94%E8%AF%A5%E5%88%86%E5%B8%83%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E5%88%86%E6%94%AF%E9%87%8C)\n    - [æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%8A%E6%B8%B8upstream%E5%88%86%E6%94%AF%E8%A2%AB%E5%88%A0%E9%99%A4%E4%BA%86%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF)\n    - [æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯](#%E6%88%91%E4%B8%8D%E5%B0%8F%E5%BF%83%E5%88%A0%E9%99%A4%E4%BA%86%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF)\n    - [æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF)\n    - [æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯](#%E6%88%91%E6%83%B3%E4%BB%8E%E5%88%AB%E4%BA%BA%E6%AD%A3%E5%9C%A8%E5%B7%A5%E4%BD%9C%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%AD%BE%E5%87%BAcheckout%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF)\n  - [Rebasing å’Œåˆå¹¶(Merging)](#rebasing-%E5%92%8C%E5%90%88%E5%B9%B6merging)\n    - [æˆ‘æƒ³æ’¤é”€rebase/merge](#%E6%88%91%E6%83%B3%E6%92%A4%E9%94%80rebasemerge)\n    - [æˆ‘å·²ç»rebaseè¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push)](#%E6%88%91%E5%B7%B2%E7%BB%8Frebase%E8%BF%87-%E4%BD%86%E6%98%AF%E6%88%91%E4%B8%8D%E6%83%B3%E5%BC%BA%E6%8E%A8force-push)\n    - [æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E7%BB%84%E5%90%88combine%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit)\n      - [å®‰å…¨åˆå¹¶(merging)ç­–ç•¥](#%E5%AE%89%E5%85%A8%E5%90%88%E5%B9%B6merging%E7%AD%96%E7%95%A5)\n      - [æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E5%B0%86%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E6%88%90%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4commit)\n      - [æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)](#%E6%88%91%E5%8F%AA%E6%83%B3%E7%BB%84%E5%90%88combine%E6%9C%AA%E6%8E%A8%E7%9A%84%E6%8F%90%E4%BA%A4unpushed-commit)\n    - [æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº†](#%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%88%86%E6%94%AF%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4commit%E9%83%BD%E5%90%88%E5%B9%B6merge%E8%BF%87%E4%BA%86)\n    - [äº¤äº’å¼rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜](#%E4%BA%A4%E4%BA%92%E5%BC%8Frebaseinteractive-rebase%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98)\n      - [è¿™ä¸ªrebase ç¼–è¾‘å±å¹•å‡ºç°'noop'](#%E8%BF%99%E4%B8%AArebase-%E7%BC%96%E8%BE%91%E5%B1%8F%E5%B9%95%E5%87%BA%E7%8E%B0noop)\n      - [æœ‰å†²çªçš„æƒ…å†µ](#%E6%9C%89%E5%86%B2%E7%AA%81%E7%9A%84%E6%83%85%E5%86%B5)\n  - [æ‚é¡¹(Miscellaneous Objects)](#%E6%9D%82%E9%A1%B9miscellaneous-objects)\n    - [å…‹éš†æ‰€æœ‰å­æ¨¡å—](#%E5%85%8B%E9%9A%86%E6%89%80%E6%9C%89%E5%AD%90%E6%A8%A1%E5%9D%97)\n    - [åˆ é™¤æ ‡ç­¾(tag)](#%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BEtag)\n    - [æ¢å¤å·²åˆ é™¤æ ‡ç­¾(tag)](#%E6%81%A2%E5%A4%8D%E5%B7%B2%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BEtag)\n    - [å·²åˆ é™¤è¡¥ä¸(patch)](#%E5%B7%B2%E5%88%A0%E9%99%A4%E8%A1%A5%E4%B8%81patch)\n  - [è·Ÿè¸ªæ–‡ä»¶(Tracking Files)](#%E8%B7%9F%E8%B8%AA%E6%96%87%E4%BB%B6tracking-files)\n    - [æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹](#%E6%88%91%E5%8F%AA%E6%83%B3%E6%94%B9%E5%8F%98%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%90%8D%E5%AD%97%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E8%80%8C%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%86%85%E5%AE%B9)\n    - [æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BB%8Egit%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E4%BD%86%E4%BF%9D%E7%95%99%E8%AF%A5%E6%96%87%E4%BB%B6)\n  - [é…ç½®(Configuration)](#%E9%85%8D%E7%BD%AEconfiguration)\n    - [æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å(alias)](#%E6%88%91%E6%83%B3%E7%BB%99%E4%B8%80%E4%BA%9Bgit%E5%91%BD%E4%BB%A4%E6%B7%BB%E5%8A%A0%E5%88%AB%E5%90%8Dalias)\n    - [æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“(repository)çš„ç”¨æˆ·åå’Œå¯†ç ](#%E6%88%91%E6%83%B3%E7%BC%93%E5%AD%98%E4%B8%80%E4%B8%AA%E4%BB%93%E5%BA%93repository%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81)\n  - [æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ](#%E6%88%91%E4%B8%8D%E7%9F%A5%E9%81%93%E6%88%91%E5%81%9A%E9%94%99%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88)\n- [å…¶å®ƒèµ„æº(Other Resources)](#%E5%85%B6%E5%AE%83%E8%B5%84%E6%BA%90other-resources)\n  - [ä¹¦(Books)](#%E4%B9%A6books)\n  - [æ•™ç¨‹(Tutorials)](#%E6%95%99%E7%A8%8Btutorials)\n  - [è„šæœ¬å’Œå·¥å…·(Scripts and Tools)](#%E8%84%9A%E6%9C%AC%E5%92%8C%E5%B7%A5%E5%85%B7scripts-and-tools)\n  - [GUIå®¢æˆ·ç«¯(GUI Clients)](#gui%E5%AE%A2%E6%88%B7%E7%AB%AFgui-clients) -->\n<!-- END doctoc generated TOC please keep comment here to allow auto update -->\n<h2 id=\"ç¼–è¾‘æäº¤-editting-commits\"><a href=\"#ç¼–è¾‘æäº¤-editting-commits\" class=\"headerlink\" title=\"ç¼–è¾‘æäº¤(editting commits)\"></a>ç¼–è¾‘æäº¤(editting commits)</h2><p><a name=\"diff-last\"></a></p>\n<h3 id=\"æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ\"><a href=\"#æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ\" class=\"headerlink\" title=\"æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ?\"></a>æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ?</h3><p>å¦‚æœä½ ç”¨ <code>git commit -a</code> æäº¤äº†ä¸€æ¬¡å˜åŒ–(changes)ï¼Œè€Œä½ åˆä¸ç¡®å®šåˆ°åº•è¿™æ¬¡æäº¤äº†å“ªäº›å†…å®¹ã€‚ ä½ å°±å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ˜¾ç¤ºå½“å‰<code>HEAD</code>ä¸Šçš„æœ€è¿‘ä¸€æ¬¡çš„æäº¤(commit):</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git show</span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> -n1 -p</span><br></pre></td></tr></table></figure>\n<p><a name=\"#i-wrote-the-wrong-thing-in-a-commit-message\"></a></p>\n<h3 id=\"æˆ‘çš„æäº¤ä¿¡æ¯-commit-message-å†™é”™äº†\"><a href=\"#æˆ‘çš„æäº¤ä¿¡æ¯-commit-message-å†™é”™äº†\" class=\"headerlink\" title=\"æˆ‘çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†\"></a>æˆ‘çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†</h3><p>å¦‚æœä½ çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†ä¸”è¿™æ¬¡æäº¤(commit)è¿˜æ²¡æœ‰æ¨(push), ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ¥ä¿®æ”¹æäº¤ä¿¡æ¯(commit message):</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git commit --amend --only</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¼šæ‰“å¼€ä½ çš„é»˜è®¤ç¼–è¾‘å™¨, åœ¨è¿™é‡Œä½ å¯ä»¥ç¼–è¾‘ä¿¡æ¯. å¦ä¸€æ–¹é¢, ä½ ä¹Ÿå¯ä»¥ç”¨ä¸€æ¡å‘½ä»¤ä¸€æ¬¡å®Œæˆ:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git commit --amend --only -m <span class=\"string\">'xxxxxxx'</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ å·²ç»æ¨(push)äº†è¿™æ¬¡æäº¤(commit), ä½ å¯ä»¥ä¿®æ”¹è¿™æ¬¡æäº¤(commit)ç„¶åå¼ºæ¨(force push), ä½†æ˜¯ä¸æ¨èè¿™ä¹ˆåšã€‚</p>\n<p><a name=\"commit-wrong-author\"></a></p>\n<h3 id=\"æˆ‘æäº¤-commit-é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹\"><a href=\"#æˆ‘æäº¤-commit-é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹\" class=\"headerlink\" title=\"æˆ‘æäº¤(commit)é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹\"></a>æˆ‘æäº¤(commit)é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹</h3><p>å¦‚æœè¿™åªæ˜¯å•ä¸ªæäº¤(commit)ï¼Œä¿®æ”¹å®ƒï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git commit --amend --author <span class=\"string\">\"New Authorname &lt;authoremail@mydomain.com&gt;\"</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ éœ€è¦ä¿®æ”¹æ‰€æœ‰å†å², å‚è€ƒ â€˜git filter-branchâ€™çš„æŒ‡å—é¡µ.</p>\n<p><a href=\"#i-want-to-remove-a-file-from-a-commit\"></a></p>\n<h3 id=\"æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤-commit-é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶\"><a href=\"#æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤-commit-é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶\" class=\"headerlink\" title=\"æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶\"></a>æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶</h3><p>é€šè¿‡ä¸‹é¢çš„æ–¹æ³•ï¼Œä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout HEAD^ myfile</span><br><span class=\"line\">$ git add -A</span><br><span class=\"line\">$ git commit --amend</span><br></pre></td></tr></table></figure>\n<p>è¿™å°†éå¸¸æœ‰ç”¨ï¼Œå½“ä½ æœ‰ä¸€ä¸ªå¼€æ”¾çš„è¡¥ä¸(open patch)ï¼Œä½ å¾€ä¸Šé¢æäº¤äº†ä¸€ä¸ªä¸å¿…è¦çš„æ–‡ä»¶ï¼Œä½ éœ€è¦å¼ºæ¨(force push)å»æ›´æ–°è¿™ä¸ªè¿œç¨‹è¡¥ä¸ã€‚</p>\n<p><a name=\"delete-pushed-commit\"></a></p>\n<h3 id=\"æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤-commit\"><a href=\"#æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤-commit\" class=\"headerlink\" title=\"æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤(commit)\"></a>æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤(commit)</h3><p>å¦‚æœä½ éœ€è¦åˆ é™¤æ¨äº†çš„æäº¤(pushed commits)ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚å¯æ˜¯ï¼Œè¿™ä¼šä¸å¯é€†çš„æ”¹å˜ä½ çš„å†å²ï¼Œä¹Ÿä¼šæä¹±é‚£äº›å·²ç»ä»è¯¥ä»“åº“æ‹‰å–(pulled)äº†çš„äººçš„å†å²ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆç¡®å®šï¼Œåƒä¸‡ä¸è¦è¿™ä¹ˆåšã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git reset HEAD^ --hard</span><br><span class=\"line\">$ git push -f [remote] [branch]</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹, æŠŠGité‡ç½®(reset)åˆ°ä½ æœ€åä¸€æ¬¡æäº¤å‰çš„çŠ¶æ€å°±å¯ä»¥äº†(åŒæ—¶ä¿å­˜æš‚å­˜çš„å˜åŒ–):</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch*)$ git reset --soft HEAD@&#123;1&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™åªèƒ½åœ¨æ²¡æœ‰æ¨é€ä¹‹å‰æœ‰ç”¨. å¦‚æœä½ å·²ç»æ¨äº†, å”¯ä¸€å®‰å…¨èƒ½åšçš„æ˜¯ <code>git revert SHAofBadCommit</code>ï¼Œ é‚£ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤(commit)ç”¨äºæ’¤æ¶ˆå‰ä¸€ä¸ªæäº¤çš„æ‰€æœ‰å˜åŒ–(changes)ï¼› æˆ–è€…, å¦‚æœä½ æ¨çš„è¿™ä¸ªåˆ†æ”¯æ˜¯rebase-safeçš„ (ä¾‹å¦‚ï¼š å…¶å®ƒå¼€å‘è€…ä¸ä¼šä»è¿™ä¸ªåˆ†æ”¯æ‹‰), åªéœ€è¦ä½¿ç”¨ <code>git push -f</code>ï¼› æ›´å¤š, è¯·å‚è€ƒ <a href=\"#deleteremove-last-pushed-commit\">the above section</a>ã€‚</p>\n<p><a name=\"delete-any-commit\"></a></p>\n<h3 id=\"åˆ é™¤ä»»æ„æäº¤-commit\"><a href=\"#åˆ é™¤ä»»æ„æäº¤-commit\" class=\"headerlink\" title=\"åˆ é™¤ä»»æ„æäº¤(commit)\"></a>åˆ é™¤ä»»æ„æäº¤(commit)</h3><p>åŒæ ·çš„è­¦å‘Šï¼šä¸åˆ°ä¸‡ä¸å¾—å·²çš„æ—¶å€™ä¸è¦è¿™ä¹ˆåš.</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT</span><br><span class=\"line\">$ git push -f [remote] [branch]</span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…åšä¸€ä¸ª <a href=\"#interactive-rebase\">äº¤äº’å¼rebase</a> åˆ é™¤é‚£äº›ä½ æƒ³è¦åˆ é™¤çš„æäº¤(commit)é‡Œæ‰€å¯¹åº”çš„è¡Œã€‚</p>\n<p><a name=\"#force-push\"></a></p>\n<h3 id=\"æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤-amended-commit-åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š\"><a href=\"#æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤-amended-commit-åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š\" class=\"headerlink\" title=\"æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š\"></a>æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">To https://github.com/yourusername/repo.git</span><br><span class=\"line\">! [rejected]        mybranch -&gt; mybranch (non-fast-forward)</span><br><span class=\"line\">error: failed to push some refs to <span class=\"string\">'https://github.com/tanay1337/webmaker.org.git'</span></span><br><span class=\"line\">hint: Updates were rejected because the tip of your current branch is behind</span><br><span class=\"line\">hint: its remote counterpart. Integrate the remote changes (e.g.</span><br><span class=\"line\">hint: <span class=\"string\">'git pull ...'</span>) before pushing again.</span><br><span class=\"line\">hint: See the <span class=\"string\">'Note about fast-forwards'</span> <span class=\"keyword\">in</span> <span class=\"string\">'git push --help'</span> <span class=\"keyword\">for</span> details.</span><br></pre></td></tr></table></figure>\n<p>æ³¨æ„, rebasing(è§ä¸‹é¢)å’Œä¿®æ­£(amending)ä¼šç”¨ä¸€ä¸ª<strong>æ–°çš„æäº¤(commit)ä»£æ›¿æ—§çš„</strong>, æ‰€ä»¥å¦‚æœä¹‹å‰ä½ å·²ç»å¾€è¿œç¨‹ä»“åº“ä¸Šæ¨è¿‡ä¸€æ¬¡ä¿®æ­£å‰çš„æäº¤(commit)ï¼Œé‚£ä½ ç°åœ¨å°±å¿…é¡»å¼ºæ¨(force push) (<code>-f</code>)ã€‚ æ³¨æ„ &ndash; <em>æ€»æ˜¯</em> ç¡®ä¿ä½ æŒ‡æ˜ä¸€ä¸ªåˆ†æ”¯!</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git push origin mybranch -f</span><br></pre></td></tr></table></figure>\n<p>ä¸€èˆ¬æ¥è¯´, <strong>è¦é¿å…å¼ºæ¨</strong>. æœ€å¥½æ˜¯åˆ›å»ºå’Œæ¨(push)ä¸€ä¸ªæ–°çš„æäº¤(commit)ï¼Œè€Œä¸æ˜¯å¼ºæ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤ã€‚åè€…ä¼šä½¿é‚£äº›ä¸è¯¥åˆ†æ”¯æˆ–è¯¥åˆ†æ”¯çš„å­åˆ†æ”¯å·¥ä½œçš„å¼€å‘è€…ï¼Œåœ¨æºå†å²ä¸­äº§ç”Ÿå†²çªã€‚</p>\n<p><a href=\"undo-git-reset-hard\"></a></p>\n<h3 id=\"æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®-hard-reset-ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹\"><a href=\"#æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®-hard-reset-ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹\" class=\"headerlink\" title=\"æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹\"></a>æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹</h3><p>å¦‚æœä½ æ„å¤–çš„åšäº† <code>git reset --hard</code>, ä½ é€šå¸¸èƒ½æ‰¾å›ä½ çš„æäº¤(commit), å› ä¸ºGitå¯¹æ¯ä»¶äº‹éƒ½ä¼šæœ‰æ—¥å¿—ï¼Œä¸”éƒ½ä¼šä¿å­˜å‡ å¤©ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reflog</span><br></pre></td></tr></table></figure>\n<p>ä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªä½ è¿‡å»æäº¤(commit)çš„åˆ—è¡¨, å’Œä¸€ä¸ªé‡ç½®çš„æäº¤ã€‚ é€‰æ‹©ä½ æƒ³è¦å›åˆ°çš„æäº¤(commit)çš„SHAï¼Œå†é‡ç½®ä¸€æ¬¡:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reset --hard SHA1234</span><br></pre></td></tr></table></figure>\n<p>è¿™æ ·å°±å®Œæˆäº†ã€‚</p>\n<h2 id=\"æš‚å­˜-Staging\"><a href=\"#æš‚å­˜-Staging\" class=\"headerlink\" title=\"æš‚å­˜(Staging)\"></a>æš‚å­˜(Staging)</h2><p><a href=\"#i-need-to-add-staged-changes-to-the-previous-commit\"></a></p>\n<h3 id=\"æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤-commit\"><a href=\"#æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤-commit\" class=\"headerlink\" title=\"æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit)\"></a>æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit)</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch*)$ git commit --amend</span><br></pre></td></tr></table></figure>\n<p><a name=\"commit-partial-new-file\"></a></p>\n<h3 id=\"æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨\"><a href=\"#æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨\" class=\"headerlink\" title=\"æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨\"></a>æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨</h3><p>ä¸€èˆ¬æ¥è¯´, å¦‚æœä½ æƒ³æš‚å­˜ä¸€ä¸ªæ–‡ä»¶çš„ä¸€éƒ¨åˆ†, ä½ å¯è¿™æ ·åš:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git add --patch filename.x</span><br></pre></td></tr></table></figure>\n<p><code>-p</code> ç®€å†™ã€‚è¿™ä¼šæ‰“å¼€äº¤äº’æ¨¡å¼ï¼Œ ä½ å°†èƒ½å¤Ÿç”¨ <code>s</code> é€‰é¡¹æ¥åˆ†éš”æäº¤(commit)ï¼› ç„¶è€Œ, å¦‚æœè¿™ä¸ªæ–‡ä»¶æ˜¯æ–°çš„, ä¼šæ²¡æœ‰è¿™ä¸ªé€‰æ‹©ï¼Œ æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶æ—¶, è¿™æ ·åš:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git add -N filename.x</span><br></pre></td></tr></table></figure>\n<p>ç„¶å, ä½ éœ€è¦ç”¨ <code>e</code> é€‰é¡¹æ¥æ‰‹åŠ¨é€‰æ‹©éœ€è¦æ·»åŠ çš„è¡Œï¼Œæ‰§è¡Œ <code>git diff --cached</code> å°†ä¼šæ˜¾ç¤ºå“ªäº›è¡Œæš‚å­˜äº†å“ªäº›è¡Œåªæ˜¯ä¿å­˜åœ¨æœ¬åœ°äº†ã€‚</p>\n<p><a href=\"stage-in-two-commits\"></a></p>\n<h3 id=\"æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–-changes-åŠ åˆ°ä¸¤ä¸ªæäº¤-commit-é‡Œ\"><a href=\"#æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–-changes-åŠ åˆ°ä¸¤ä¸ªæäº¤-commit-é‡Œ\" class=\"headerlink\" title=\"æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–(changes)åŠ åˆ°ä¸¤ä¸ªæäº¤(commit)é‡Œ\"></a>æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–(changes)åŠ åˆ°ä¸¤ä¸ªæäº¤(commit)é‡Œ</h3><p><code>git add</code> ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶åŠ å…¥åˆ°ä¸€ä¸ªæäº¤. <code>git add -p</code> å…è®¸äº¤äº’å¼çš„é€‰æ‹©ä½ æƒ³è¦æäº¤çš„éƒ¨åˆ†.</p>\n<p><a href=\"unstaging-edits-and-staging-the-unstaged\"></a></p>\n<h3 id=\"æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥\"><a href=\"#æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥\" class=\"headerlink\" title=\"æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥\"></a>æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥</h3><p>è¿™ä¸ªæœ‰ç‚¹å›°éš¾ï¼Œ æˆ‘èƒ½æƒ³åˆ°çš„æœ€å¥½çš„æ–¹æ³•æ˜¯å…ˆstashæœªæš‚å­˜çš„å†…å®¹ï¼Œ ç„¶åé‡ç½®(reset)ï¼Œå†popç¬¬ä¸€æ­¥stashedçš„å†…å®¹, æœ€åå†addå®ƒä»¬ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git stash -k</span><br><span class=\"line\">$ git reset --hard</span><br><span class=\"line\">$ git stash pop</span><br><span class=\"line\">$ git add -A</span><br></pre></td></tr></table></figure>\n<h2 id=\"æœªæš‚å­˜-Unstaged-çš„å†…å®¹\"><a href=\"#æœªæš‚å­˜-Unstaged-çš„å†…å®¹\" class=\"headerlink\" title=\"æœªæš‚å­˜(Unstaged)çš„å†…å®¹\"></a>æœªæš‚å­˜(Unstaged)çš„å†…å®¹</h2><p><a href=\"move-unstaged-edits-to-new-branch\"></a></p>\n<h3 id=\"æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯\"><a href=\"#æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯\" class=\"headerlink\" title=\"æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯\"></a>æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout -b my-branch</span><br></pre></td></tr></table></figure>\n<p><a href=\"move-unstaged-edits-to-old-branch\"></a></p>\n<h3 id=\"æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯\"><a href=\"#æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯\" class=\"headerlink\" title=\"æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯\"></a>æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git stash</span><br><span class=\"line\">$ git checkout my-branch</span><br><span class=\"line\">$ git stash pop</span><br></pre></td></tr></table></figure>\n<p><a href=\"i-want-to-discard-my-local-uncommitted-changes\"></a></p>\n<h3 id=\"æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–-uncommitted-changes\"><a href=\"#æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–-uncommitted-changes\" class=\"headerlink\" title=\"æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–(uncommitted changes)\"></a>æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–(uncommitted changes)</h3><p>å¦‚æœä½ åªæ˜¯æƒ³é‡ç½®æº(origin)å’Œä½ æœ¬åœ°(local)ä¹‹é—´çš„ä¸€äº›æäº¤(commit)ï¼Œä½ å¯ä»¥ï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># one commit</span></span><br><span class=\"line\">(my-branch)$ git reset --hard HEAD^</span><br><span class=\"line\"><span class=\"comment\"># two commits</span></span><br><span class=\"line\">(my-branch)$ git reset --hard HEAD^^</span><br><span class=\"line\"><span class=\"comment\"># four commits</span></span><br><span class=\"line\">(my-branch)$ git reset --hard HEAD~4</span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\">(master)$ git checkout -f</span><br></pre></td></tr></table></figure>\n<p>é‡ç½®æŸä¸ªç‰¹æ®Šçš„æ–‡ä»¶, ä½ å¯ä»¥ç”¨æ–‡ä»¶ååšä¸ºå‚æ•°:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git reset filename</span><br></pre></td></tr></table></figure>\n<p><a href=\"i-want-to-discard-specific-unstaged-changes\"></a></p>\n<h3 id=\"æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹\"><a href=\"#æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹\" class=\"headerlink\" title=\"æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹\"></a>æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹</h3><p>å¦‚æœä½ æƒ³ä¸¢å¼ƒå·¥ä½œæ‹·è´ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ã€‚</p>\n<p>ç­¾å‡º(checkout)ä¸éœ€è¦çš„å†…å®¹ï¼Œä¿ç•™éœ€è¦çš„ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout -p</span><br><span class=\"line\"><span class=\"comment\"># Answer y to all of the snippets you want to drop</span></span><br></pre></td></tr></table></figure>\n<p>å¦å¤–ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ <code>stash</code>ï¼Œ Stashæ‰€æœ‰è¦ä¿ç•™ä¸‹çš„å†…å®¹, é‡ç½®å·¥ä½œæ‹·è´, é‡æ–°åº”ç”¨ä¿ç•™çš„éƒ¨åˆ†ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git stash -p</span><br><span class=\"line\"><span class=\"comment\"># Select all of the snippets you want to save</span></span><br><span class=\"line\">$ git reset --hard</span><br><span class=\"line\">$ git stash pop</span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…, stash ä½ ä¸éœ€è¦çš„éƒ¨åˆ†, ç„¶åstash dropã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git stash -p</span><br><span class=\"line\"><span class=\"comment\"># Select all of the snippets you don't want to save</span></span><br><span class=\"line\">$ git stash drop</span><br></pre></td></tr></table></figure>\n<h2 id=\"åˆ†æ”¯-Branches\"><a href=\"#åˆ†æ”¯-Branches\" class=\"headerlink\" title=\"åˆ†æ”¯(Branches)\"></a>åˆ†æ”¯(Branches)</h2><p><a name=\"pull-wrong-branch\"></a></p>\n<h3 id=\"æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯\"><a href=\"#æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯\" class=\"headerlink\" title=\"æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯\"></a>æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯</h3><p>è¿™æ˜¯å¦å¤–ä¸€ç§ä½¿ç”¨ <code>git reflog</code> æƒ…å†µï¼Œæ‰¾åˆ°åœ¨è¿™æ¬¡é”™è¯¯æ‹‰(pull) ä¹‹å‰HEADçš„æŒ‡å‘ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reflog</span><br><span class=\"line\">ab7555f HEAD@&#123;0&#125;: pull origin wrong-branch: Fast-forward</span><br><span class=\"line\">c5bc55a HEAD@&#123;1&#125;: checkout: checkout message goes here</span><br></pre></td></tr></table></figure>\n<p>é‡ç½®åˆ†æ”¯åˆ°ä½ æ‰€éœ€çš„æäº¤(desired commit):</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git reset --hard c5bc55a</span><br></pre></td></tr></table></figure>\n<p>å®Œæˆã€‚</p>\n<p><a href=\"discard-local-commits\"></a></p>\n<h3 id=\"æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤-commit-ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´\"><a href=\"#æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤-commit-ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´\" class=\"headerlink\" title=\"æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´\"></a>æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´</h3><p>å…ˆç¡®è®¤ä½ æ²¡æœ‰æ¨(push)ä½ çš„å†…å®¹åˆ°è¿œç¨‹ã€‚</p>\n<p><code>git status</code> ä¼šæ˜¾ç¤ºä½ é¢†å…ˆ(ahead)æº(origin)å¤šå°‘ä¸ªæäº¤:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git status</span><br><span class=\"line\"><span class=\"comment\"># On branch my-branch</span></span><br><span class=\"line\"><span class=\"comment\"># Your branch is ahead of 'origin/my-branch' by 2 commits.</span></span><br><span class=\"line\"><span class=\"comment\">#   (use \"git push\" to publish your local commits)</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n<p>ä¸€ç§æ–¹æ³•æ˜¯:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reset --hard origin/my-branch</span><br></pre></td></tr></table></figure>\n<p><a name=\"commit-wrong-branch\"></a></p>\n<h3 id=\"æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†master\"><a href=\"#æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†master\" class=\"headerlink\" title=\"æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†master\"></a>æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†master</h3><p>åœ¨masterä¸‹åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä¸åˆ‡æ¢åˆ°æ–°åˆ†æ”¯,ä»åœ¨masterä¸‹:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git branch my-branch</span><br></pre></td></tr></table></figure>\n<p>æŠŠmasteråˆ†æ”¯é‡ç½®åˆ°å‰ä¸€ä¸ªæäº¤:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reset --hard HEAD^</span><br></pre></td></tr></table></figure>\n<p><code>HEAD^</code> æ˜¯ <code>HEAD^1</code> çš„ç®€å†™ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šè¦è®¾ç½®çš„<code>HEAD</code>æ¥è¿›ä¸€æ­¥é‡ç½®ã€‚</p>\n<p>æˆ–è€…, å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ <code>HEAD^</code>, æ‰¾åˆ°ä½ æƒ³é‡ç½®åˆ°çš„æäº¤(commit)çš„hash(<code>git log</code> èƒ½å¤Ÿå®Œæˆ)ï¼Œ ç„¶åé‡ç½®åˆ°è¿™ä¸ªhashã€‚ ä½¿ç”¨<code>git push</code> åŒæ­¥å†…å®¹åˆ°è¿œç¨‹ã€‚</p>\n<p>ä¾‹å¦‚, masteråˆ†æ”¯æƒ³é‡ç½®åˆ°çš„æäº¤çš„hashä¸º<code>a13b85e</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reset --hard a13b85e</span><br><span class=\"line\">HEAD is now at a13b85e</span><br></pre></td></tr></table></figure>\n<p>ç­¾å‡º(checkout)åˆšæ‰æ–°å»ºçš„åˆ†æ”¯ç»§ç»­å·¥ä½œ:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git checkout my-branch</span><br></pre></td></tr></table></figure>\n<p><a name=\"keep-whole-file\"></a></p>\n<h3 id=\"æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶\"><a href=\"#æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶\" class=\"headerlink\" title=\"æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶\"></a>æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶</h3><p>å‡è®¾ä½ æ­£åœ¨åšä¸€ä¸ªåŸå‹æ–¹æ¡ˆ(åŸæ–‡ä¸ºworking spike (see note)), æœ‰æˆç™¾çš„å†…å®¹ï¼Œæ¯ä¸ªéƒ½å·¥ä½œå¾—å¾ˆå¥½ã€‚ç°åœ¨, ä½ æäº¤åˆ°äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œä¿å­˜å·¥ä½œå†…å®¹:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(solution)$ git add -A &amp;&amp; git commit -m <span class=\"string\">\"Adding all changes from this spike into one big commit.\"</span></span><br></pre></td></tr></table></figure>\n<p>å½“ä½ æƒ³è¦æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªåˆ†æ”¯é‡Œ (å¯èƒ½æ˜¯<code>feature</code>, æˆ–è€… <code>develop</code>), ä½ å…³å¿ƒæ˜¯ä¿æŒæ•´ä¸ªæ–‡ä»¶çš„å®Œæ•´ï¼Œä½ æƒ³è¦ä¸€ä¸ªå¤§çš„æäº¤åˆ†éš”æˆæ¯”è¾ƒå°ã€‚</p>\n<p>å‡è®¾ä½ æœ‰:</p>\n<ul>\n<li>åˆ†æ”¯ <code>solution</code>, æ‹¥æœ‰åŸå‹æ–¹æ¡ˆï¼Œ é¢†å…ˆ <code>develop</code> åˆ†æ”¯ã€‚</li>\n<li>åˆ†æ”¯ <code>develop</code>, åœ¨è¿™é‡Œä½ åº”ç”¨åŸå‹æ–¹æ¡ˆçš„ä¸€äº›å†…å®¹ã€‚</li>\n</ul>\n<p>æˆ‘å»å¯ä»¥é€šè¿‡æŠŠå†…å®¹æ‹¿åˆ°ä½ çš„åˆ†æ”¯é‡Œï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(develop)$ git checkout solution -- file1.txt</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å†…å®¹ä»åˆ†æ”¯ <code>solution</code> æ‹¿åˆ°åˆ†æ”¯ <code>develop</code> é‡Œæ¥:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># On branch develop</span></span><br><span class=\"line\"><span class=\"comment\"># Your branch is up-to-date with 'origin/develop'.</span></span><br><span class=\"line\"><span class=\"comment\"># Changes to be committed:</span></span><br><span class=\"line\"><span class=\"comment\">#  (use \"git reset HEAD &lt;file&gt;...\" to unstage)</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#        modified:   file1.txt</span></span><br></pre></td></tr></table></figure>\n<p>ç„¶å, æ­£å¸¸æäº¤ã€‚</p>\n<p>Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem. ~ <a href=\"https://en.wikipedia.org/wiki/Extreme_programming_practices\" target=\"_blank\" rel=\"noopener\">Wikipedia</a>.</p>\n<p><a name=\"cherry-pick\"></a></p>\n<h3 id=\"æˆ‘æŠŠå‡ ä¸ªæäº¤-commit-æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ\"><a href=\"#æˆ‘æŠŠå‡ ä¸ªæäº¤-commit-æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ\" class=\"headerlink\" title=\"æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ\"></a>æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ</h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ª<code>master</code>åˆ†æ”¯ï¼Œ æ‰§è¡Œ<code>git log</code>, ä½ çœ‹åˆ°ä½ åšè¿‡ä¸¤æ¬¡æäº¤:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git <span class=\"built_in\">log</span></span><br><span class=\"line\"></span><br><span class=\"line\">commit e3851e817c451cc36f2e6f3049db528415e3c114</span><br><span class=\"line\">Author: Alex Lee &lt;alexlee@example.com&gt;</span><br><span class=\"line\">Date:   Tue Jul 22 15:39:27 2014 -0400</span><br><span class=\"line\"></span><br><span class=\"line\">    Bug <span class=\"comment\">#21 - Added CSRF protection</span></span><br><span class=\"line\"></span><br><span class=\"line\">commit 5ea51731d150f7ddc4a365437931cd8be3bf3131</span><br><span class=\"line\">Author: Alex Lee &lt;alexlee@example.com&gt;</span><br><span class=\"line\">Date:   Tue Jul 22 15:39:12 2014 -0400</span><br><span class=\"line\"></span><br><span class=\"line\">    Bug <span class=\"comment\">#14 - Fixed spacing on title</span></span><br><span class=\"line\"></span><br><span class=\"line\">commit a13b85e984171c6e2a1729bb061994525f626d14</span><br><span class=\"line\">Author: Aki Rose &lt;akirose@example.com&gt;</span><br><span class=\"line\">Date:   Tue Jul 21 01:12:48 2014 -0400</span><br><span class=\"line\"></span><br><span class=\"line\">    First commit</span><br></pre></td></tr></table></figure>\n<p>è®©æˆ‘ä»¬ç”¨æäº¤hash(commit hash)æ ‡è®°bug (<code>e3851e8</code> for #21, <code>5ea5173</code> for #14).</p>\n<p>é¦–å…ˆ, æˆ‘ä»¬æŠŠ<code>master</code>åˆ†æ”¯é‡ç½®åˆ°æ­£ç¡®çš„æäº¤(<code>a13b85e</code>):</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reset --hard a13b85e</span><br><span class=\"line\">HEAD is now at a13b85e</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨, æˆ‘ä»¬å¯¹ bug #21 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git checkout -b 21</span><br><span class=\"line\">(21)$</span><br></pre></td></tr></table></figure>\n<p>æ¥ç€, æˆ‘ä»¬ç”¨ <em>cherry-pick</em> æŠŠå¯¹bug #21çš„æäº¤æ”¾å…¥å½“å‰åˆ†æ”¯ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å°†åº”ç”¨(apply)è¿™ä¸ªæäº¤(commit)ï¼Œä»…ä»…è¿™ä¸€ä¸ªæäº¤(commit)ï¼Œç›´æ¥åœ¨HEADä¸Šé¢ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(21)$ git cherry-pick e3851e8</span><br></pre></td></tr></table></figure>\n<p>è¿™æ—¶å€™, è¿™é‡Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œ å‚è§<a href=\"#interactive-rebase\">äº¤äº’å¼ rebasing ç« </a> <a href=\"#merge-conflict\"><strong>å†²çªèŠ‚</strong></a> è§£å†³å†²çª.</p>\n<p>å†è€…ï¼Œ æˆ‘ä»¬ä¸ºbug #14 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯, ä¹ŸåŸºäº<code>master</code>åˆ†æ”¯</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(21)$ git checkout master</span><br><span class=\"line\">(master)$ git checkout -b 14</span><br><span class=\"line\">(14)$</span><br></pre></td></tr></table></figure>\n<p>æœ€å, ä¸º bug #14 æ‰§è¡Œ <code>cherry-pick</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(14)$ git cherry-pick 5ea5173</span><br></pre></td></tr></table></figure>\n<p><a name=\"delete-stale-local-branches\"></a></p>\n<h3 id=\"æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸-upstream-åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯\"><a href=\"#æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸-upstream-åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯\" class=\"headerlink\" title=\"æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯\"></a>æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯</h3><p>ä¸€æ—¦ä½ åœ¨github ä¸Šé¢åˆå¹¶(merge)äº†ä¸€ä¸ªpull request, ä½ å°±å¯ä»¥åˆ é™¤ä½ forké‡Œè¢«åˆå¹¶çš„åˆ†æ”¯ã€‚ å¦‚æœä½ ä¸å‡†å¤‡ç»§ç»­åœ¨è¿™ä¸ªåˆ†æ”¯é‡Œå·¥ä½œ, åˆ é™¤è¿™ä¸ªåˆ†æ”¯çš„æœ¬åœ°æ‹·è´ä¼šæ›´å¹²å‡€ï¼Œä½¿ä½ ä¸ä¼šé™·å…¥å·¥ä½œåˆ†æ”¯å’Œä¸€å †é™ˆæ—§åˆ†æ”¯çš„æ··ä¹±ä¹‹ä¸­ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git fetch -p</span><br></pre></td></tr></table></figure>\n<p><a name=\"restore-a-deleted-branch\"></a></p>\n<h3 id=\"æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯\"><a href=\"#æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯\" class=\"headerlink\" title=\"æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯\"></a>æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯</h3><p>å¦‚æœä½ å®šæœŸæ¨é€åˆ°è¿œç¨‹, å¤šæ•°æƒ…å†µä¸‹åº”è¯¥æ˜¯å®‰å…¨çš„ï¼Œä½†æœ‰äº›æ—¶å€™è¿˜æ˜¯å¯èƒ½åˆ é™¤äº†è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹çš„åˆ†æ”¯ã€‚ è®©æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å’Œä¸€ä¸ªæ–°çš„æ–‡ä»¶:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git checkout -b my-branch</span><br><span class=\"line\">(my-branch)$ git branch</span><br><span class=\"line\">(my-branch)$ touch foo.txt</span><br><span class=\"line\">(my-branch)$ ls</span><br><span class=\"line\">README.md foo.txt</span><br></pre></td></tr></table></figure>\n<p>æ·»åŠ æ–‡ä»¶å¹¶åšä¸€æ¬¡æäº¤</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git add .</span><br><span class=\"line\">(my-branch)$ git commit -m <span class=\"string\">'foo.txt added'</span></span><br><span class=\"line\">(my-branch)$ foo.txt added</span><br><span class=\"line\"> 1 files changed, 1 insertions(+)</span><br><span class=\"line\"> create mode 100644 foo.txt</span><br><span class=\"line\">(my-branch)$ git <span class=\"built_in\">log</span></span><br><span class=\"line\"></span><br><span class=\"line\">commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012</span><br><span class=\"line\">Author: siemiatj &lt;siemiatj@example.com&gt;</span><br><span class=\"line\">Date:   Wed Jul 30 00:34:10 2014 +0200</span><br><span class=\"line\"></span><br><span class=\"line\">    foo.txt added</span><br><span class=\"line\"></span><br><span class=\"line\">commit 69204cdf0acbab201619d95ad8295928e7f411d5</span><br><span class=\"line\">Author: Kate Hudson &lt;katehudson@example.com&gt;</span><br><span class=\"line\">Date:   Tue Jul 29 13:14:46 2014 -0400</span><br><span class=\"line\"></span><br><span class=\"line\">    Fixes <span class=\"comment\">#6: Force pushing after amending commits</span></span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨æˆ‘ä»¬åˆ‡å›åˆ°ä¸»(master)åˆ†æ”¯ï¼Œâ€˜ä¸å°å¿ƒçš„â€™åˆ é™¤<code>my-branch</code>åˆ†æ”¯</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git checkout master</span><br><span class=\"line\">Switched to branch <span class=\"string\">'master'</span></span><br><span class=\"line\">Your branch is up-to-date with <span class=\"string\">'origin/master'</span>.</span><br><span class=\"line\">(master)$ git branch -D my-branch</span><br><span class=\"line\">Deleted branch my-branch (was 4e3cd85).</span><br><span class=\"line\">(master)$ <span class=\"built_in\">echo</span> oh noes, deleted my branch!</span><br><span class=\"line\">oh noes, deleted my branch!</span><br></pre></td></tr></table></figure>\n<p>åœ¨è¿™æ—¶å€™ä½ åº”è¯¥æƒ³èµ·äº†<code>reflog</code>, ä¸€ä¸ªå‡çº§ç‰ˆçš„æ—¥å¿—ï¼Œå®ƒå­˜å‚¨äº†ä»“åº“(repo)é‡Œé¢æ‰€æœ‰åŠ¨ä½œçš„å†å²ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reflog</span><br><span class=\"line\">69204cd HEAD@&#123;0&#125;: checkout: moving from my-branch to master</span><br><span class=\"line\">4e3cd85 HEAD@&#123;1&#125;: commit: foo.txt added</span><br><span class=\"line\">69204cd HEAD@&#123;2&#125;: checkout: moving from master to my-branch</span><br></pre></td></tr></table></figure>\n<p>æ­£å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥è‡ªåˆ é™¤åˆ†æ”¯çš„æäº¤hash(commit hash)ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ˜¯å¦èƒ½æ¢å¤åˆ é™¤äº†çš„åˆ†æ”¯ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git checkout -b my-branch-help</span><br><span class=\"line\">Switched to a new branch <span class=\"string\">'my-branch-help'</span></span><br><span class=\"line\">(my-branch-help)$ git reset --hard 4e3cd85</span><br><span class=\"line\">HEAD is now at 4e3cd85 foo.txt added</span><br><span class=\"line\">(my-branch-help)$ ls</span><br><span class=\"line\">README.md foo.txt</span><br></pre></td></tr></table></figure>\n<p>çœ‹! æˆ‘ä»¬æŠŠåˆ é™¤çš„æ–‡ä»¶æ‰¾å›æ¥äº†ã€‚ Gitçš„ <code>reflog</code> åœ¨rebasingå‡ºé”™çš„æ—¶å€™ä¹Ÿæ˜¯åŒæ ·æœ‰ç”¨çš„ã€‚</p>\n<p><a name=\"i-want-to-delete-a-branch\"></a></p>\n<h3 id=\"æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯\"><a href=\"#æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯\" class=\"headerlink\" title=\"æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯\"></a>æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯</h3><p>åˆ é™¤ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git push origin --delete my-branch</span><br></pre></td></tr></table></figure>\n<p>ä½ ä¹Ÿå¯ä»¥:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git push origin :my-branch</span><br></pre></td></tr></table></figure>\n<p>åˆ é™¤ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git branch -D my-branch</span><br></pre></td></tr></table></figure>\n<p><a name=\"i-want-to-checkout-to-a-remote-branch-that-someone-else-is-working-on\"></a></p>\n<h3 id=\"æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º-checkout-ä¸€ä¸ªåˆ†æ”¯\"><a href=\"#æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º-checkout-ä¸€ä¸ªåˆ†æ”¯\" class=\"headerlink\" title=\"æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯\"></a>æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯</h3><p>é¦–å…ˆ, ä»è¿œç¨‹æ‹‰å–(fetch) æ‰€æœ‰åˆ†æ”¯:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git fetch --all</span><br></pre></td></tr></table></figure>\n<p>å‡è®¾ä½ æƒ³è¦ä»è¿œç¨‹çš„<code>daves</code>åˆ†æ”¯ç­¾å‡ºåˆ°æœ¬åœ°çš„<code>daves</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git checkout --track origin/daves</span><br><span class=\"line\">Branch daves <span class=\"built_in\">set</span> up to track remote branch daves from origin.</span><br><span class=\"line\">Switched to a new branch <span class=\"string\">'daves'</span></span><br></pre></td></tr></table></figure>\n<p>(<code>--track</code> æ˜¯ <code>git checkout -b [branch] [remotename]/[branch]</code> çš„ç®€å†™)</p>\n<p>è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ª<code>daves</code>åˆ†æ”¯çš„æœ¬åœ°æ‹·è´, ä»»ä½•æ¨è¿‡(pushed)çš„æ›´æ–°ï¼Œè¿œç¨‹éƒ½èƒ½çœ‹åˆ°.</p>\n<h2 id=\"Rebasing-å’Œåˆå¹¶-Merging\"><a href=\"#Rebasing-å’Œåˆå¹¶-Merging\" class=\"headerlink\" title=\"Rebasing å’Œåˆå¹¶(Merging)\"></a>Rebasing å’Œåˆå¹¶(Merging)</h2><p><a name=\"undo-rebase\"></a></p>\n<h3 id=\"æˆ‘æƒ³æ’¤é”€rebase-merge\"><a href=\"#æˆ‘æƒ³æ’¤é”€rebase-merge\" class=\"headerlink\" title=\"æˆ‘æƒ³æ’¤é”€rebase/merge\"></a>æˆ‘æƒ³æ’¤é”€rebase/merge</h3><p>ä½ å¯ä»¥åˆå¹¶(merge)æˆ–rebaseäº†ä¸€ä¸ªé”™è¯¯çš„åˆ†æ”¯, æˆ–è€…å®Œæˆä¸äº†ä¸€ä¸ªè¿›è¡Œä¸­çš„rebase/mergeã€‚ Git åœ¨è¿›è¡Œå±é™©æ“ä½œçš„æ—¶å€™ä¼šæŠŠåŸå§‹çš„HEADä¿å­˜åœ¨ä¸€ä¸ªå«ORIG_HEADçš„å˜é‡é‡Œ, æ‰€ä»¥è¦æŠŠåˆ†æ”¯æ¢å¤åˆ°rebase/mergeå‰çš„çŠ¶æ€æ˜¯å¾ˆå®¹æ˜“çš„ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git reset --hard ORIG_HEAD</span><br></pre></td></tr></table></figure>\n<p><a name=\"force-push-rebase\"></a></p>\n<h3 id=\"æˆ‘å·²ç»rebaseè¿‡-ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨-force-push\"><a href=\"#æˆ‘å·²ç»rebaseè¿‡-ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨-force-push\" class=\"headerlink\" title=\"æˆ‘å·²ç»rebaseè¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push)\"></a>æˆ‘å·²ç»rebaseè¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push)</h3><p>ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³æŠŠè¿™äº›å˜åŒ–(changes)ååº”åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œä½ å°±å¿…é¡»å¾—å¼ºæ¨(force push)ã€‚ æ˜¯å› ä½ å¿«è¿›(Fast forward)äº†æäº¤ï¼Œæ”¹å˜äº†Gitå†å², è¿œç¨‹åˆ†æ”¯ä¸ä¼šæ¥å—å˜åŒ–(changes)ï¼Œé™¤éå¼ºæ¨(force push)ã€‚è¿™å°±æ˜¯è®¸å¤šäººä½¿ç”¨ merge å·¥ä½œæµ, è€Œä¸æ˜¯ rebasing å·¥ä½œæµçš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œ å¼€å‘è€…çš„å¼ºæ¨(force push)ä¼šä½¿å¤§çš„å›¢é˜Ÿé™·å…¥éº»çƒ¦ã€‚ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼Œä¸€ç§å®‰å…¨ä½¿ç”¨ rebase çš„æ–¹æ³•æ˜¯ï¼Œä¸è¦æŠŠä½ çš„å˜åŒ–(changes)åæ˜ åˆ°è¿œç¨‹åˆ†æ”¯ä¸Š, è€Œæ˜¯æŒ‰ä¸‹é¢çš„åš:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git checkout my-branch</span><br><span class=\"line\">(my-branch)$ git rebase -i master</span><br><span class=\"line\">(my-branch)$ git checkout master</span><br><span class=\"line\">(master)$ git merge --ff-only my-branch</span><br></pre></td></tr></table></figure>\n<p>æ›´å¤š, å‚è§ <a href=\"http://stackoverflow.com/questions/11058312/how-can-i-use-git-rebase-without-requiring-a-forced-push\" target=\"_blank\" rel=\"noopener\">this SO thread</a>.</p>\n<p><a name=\"interactive-rebase\"></a></p>\n<h3 id=\"æˆ‘éœ€è¦ç»„åˆ-combine-å‡ ä¸ªæäº¤-commit\"><a href=\"#æˆ‘éœ€è¦ç»„åˆ-combine-å‡ ä¸ªæäº¤-commit\" class=\"headerlink\" title=\"æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit)\"></a>æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit)</h3><p>å‡è®¾ä½ çš„å·¥ä½œåˆ†æ”¯å°†ä¼šåšå¯¹äº <code>master</code> çš„pull-requestã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¸å…³å¿ƒæäº¤(commit)çš„æ—¶é—´æˆ³ï¼Œåªæƒ³ç»„åˆ <em>æ‰€æœ‰</em> æäº¤(commit) åˆ°ä¸€ä¸ªå•ç‹¬çš„é‡Œé¢, ç„¶åé‡ç½®(reset)é‡æäº¤(recommit)ã€‚ ç¡®ä¿ä¸»(master)åˆ†æ”¯æ˜¯æœ€æ–°çš„å’Œä½ çš„å˜åŒ–éƒ½å·²ç»æäº¤äº†, ç„¶å:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git reset --soft master</span><br><span class=\"line\">(my-branch)$ git commit -am <span class=\"string\">\"New awesome feature\"</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æƒ³è¦æ›´å¤šçš„æ§åˆ¶, æƒ³è¦ä¿ç•™æ—¶é—´æˆ³, ä½ éœ€è¦åšäº¤äº’å¼rebase (interactive rebase):</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git rebase -i master</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœæ²¡æœ‰ç›¸å¯¹çš„å…¶å®ƒåˆ†æ”¯ï¼Œ ä½ å°†ä¸å¾—ä¸ç›¸å¯¹è‡ªå·±çš„<code>HEAD</code> è¿›è¡Œ rebaseã€‚ ä¾‹å¦‚ï¼šä½ æƒ³ç»„åˆæœ€è¿‘çš„ä¸¤æ¬¡æäº¤(commit), ä½ å°†ç›¸å¯¹äº<code>HEAD~2</code> è¿›è¡Œrebaseï¼Œ ç»„åˆæœ€è¿‘3æ¬¡æäº¤(commit), ç›¸å¯¹äº<code>HEAD~3</code>, ç­‰ç­‰ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git rebase -i HEAD~2</span><br></pre></td></tr></table></figure>\n<p>åœ¨ä½ æ‰§è¡Œäº†äº¤äº’å¼ rebaseçš„å‘½ä»¤(interactive rebase command)å, ä½ å°†åœ¨ä½ çš„ç¼–è¾‘å™¨é‡Œçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pick a9c8a1d Some refactoring</span><br><span class=\"line\">pick <span class=\"number\">01</span>b2fd8 New awesome feature</span><br><span class=\"line\">pick b729ad5 fixup</span><br><span class=\"line\">pick e3851e8 another <span class=\"keyword\">fix</span></span><br><span class=\"line\"></span><br><span class=\"line\"># Rebase <span class=\"number\">8074</span>d12..b729ad5 onto <span class=\"number\">8074</span>d12</span><br><span class=\"line\">#</span><br><span class=\"line\"># Command<span class=\"variable\">s:</span></span><br><span class=\"line\">#  <span class=\"keyword\">p</span>, pick = use commit</span><br><span class=\"line\">#  r, reword = use commit, but <span class=\"keyword\">edit</span> the commit message</span><br><span class=\"line\">#  <span class=\"keyword\">e</span>, <span class=\"keyword\">edit</span> = use commit, but <span class=\"keyword\">stop</span> <span class=\"keyword\">for</span> amending</span><br><span class=\"line\">#  s, squash = use commit, but meld into <span class=\"keyword\">previous</span> commit</span><br><span class=\"line\">#  <span class=\"keyword\">f</span>, fixup = like <span class=\"string\">\"squash\"</span>, but discard this commit<span class=\"string\">'s log message</span></span><br><span class=\"line\"><span class=\"string\">#  x, exec = run command (the rest of the line) using shell</span></span><br><span class=\"line\"><span class=\"string\">#</span></span><br><span class=\"line\"><span class=\"string\"># These lines can be re-ordered; they are executed from top to bottom.</span></span><br><span class=\"line\"><span class=\"string\">#</span></span><br><span class=\"line\"><span class=\"string\"># If you remove a line here THAT COMMIT WILL BE LOST.</span></span><br><span class=\"line\"><span class=\"string\">#</span></span><br><span class=\"line\"><span class=\"string\"># However, if you remove everything, the rebase will be aborted.</span></span><br><span class=\"line\"><span class=\"string\">#</span></span><br><span class=\"line\"><span class=\"string\"># Note that empty commits are commented out</span></span><br></pre></td></tr></table></figure>\n<p>æ‰€æœ‰ä»¥ <code>#</code> å¼€å¤´çš„è¡Œéƒ½æ˜¯æ³¨é‡Š, ä¸ä¼šå½±å“ rebase.</p>\n<p>ç„¶åï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä¸Šé¢å‘½ä»¤åˆ—è¡¨çš„å‘½ä»¤æ›¿æ¢ <code>pick</code>, ä½ ä¹Ÿå¯ä»¥é€šè¿‡åˆ é™¤å¯¹åº”çš„è¡Œæ¥åˆ é™¤ä¸€ä¸ªæäº¤(commit)ã€‚</p>\n<p>ä¾‹å¦‚, å¦‚æœä½ æƒ³ <strong>å•ç‹¬ä¿ç•™æœ€æ—§(first)çš„æäº¤(commit),ç»„åˆæ‰€æœ‰å‰©ä¸‹çš„åˆ°ç¬¬äºŒä¸ªé‡Œé¢</strong>, ä½ å°±åº”è¯¥ç¼–è¾‘ç¬¬äºŒä¸ªæäº¤(commit)åé¢çš„æ¯ä¸ªæäº¤(commit) å‰çš„å•è¯ä¸º <code>f</code>:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pick a9c8a1d Some refactoring</span><br><span class=\"line\">pick <span class=\"number\">01</span>b2fd8 New awesome feature</span><br><span class=\"line\"><span class=\"keyword\">f</span> b729ad5 fixup</span><br><span class=\"line\"><span class=\"keyword\">f</span> e3851e8 another <span class=\"keyword\">fix</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æƒ³ç»„åˆè¿™äº›æäº¤(commit) <strong>å¹¶é‡å‘½åè¿™ä¸ªæäº¤(commit)</strong>, ä½ åº”è¯¥åœ¨ç¬¬äºŒä¸ªæäº¤(commit)æ—è¾¹æ·»åŠ ä¸€ä¸ª<code>r</code>ï¼Œæˆ–è€…æ›´ç®€å•çš„ç”¨<code>s</code> æ›¿ä»£ <code>f</code>:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pick a9c8a1d Some refactoring</span><br><span class=\"line\">pick <span class=\"number\">01</span>b2fd8 New awesome feature</span><br><span class=\"line\">s b729ad5 fixup</span><br><span class=\"line\">s e3851e8 another <span class=\"keyword\">fix</span></span><br></pre></td></tr></table></figure>\n<p>ä½ å¯ä»¥åœ¨æ¥ä¸‹æ¥å¼¹å‡ºçš„æ–‡æœ¬æç¤ºæ¡†é‡Œé‡å‘½åæäº¤(commit)ã€‚</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Newer, awesomer features</span><br><span class=\"line\"></span><br><span class=\"line\"># Please enter the commit message <span class=\"keyword\">for</span> your <span class=\"keyword\">changes</span>. Lines starting</span><br><span class=\"line\"># with <span class=\"string\">'#'</span> will <span class=\"keyword\">be</span> ignored, <span class=\"built_in\">and</span> <span class=\"keyword\">an</span> <span class=\"built_in\">empty</span> message aborts the commit.</span><br><span class=\"line\"># rebase in progress; onto 8074d12</span><br><span class=\"line\"># You are currently editing <span class=\"keyword\">a</span> commit <span class=\"keyword\">while</span> rebasing branch <span class=\"string\">'master'</span> <span class=\"keyword\">on</span> <span class=\"string\">'8074d12'</span>.</span><br><span class=\"line\">#</span><br><span class=\"line\"># Changes <span class=\"keyword\">to</span> <span class=\"keyword\">be</span> committed:</span><br><span class=\"line\">#\tmodified:   README.md</span><br><span class=\"line\">#</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœæˆåŠŸäº†, ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ Successfully rebased and updated refs/heads/master.</span><br></pre></td></tr></table></figure>\n<h4 id=\"å®‰å…¨åˆå¹¶-merging-ç­–ç•¥\"><a href=\"#å®‰å…¨åˆå¹¶-merging-ç­–ç•¥\" class=\"headerlink\" title=\"å®‰å…¨åˆå¹¶(merging)ç­–ç•¥\"></a>å®‰å…¨åˆå¹¶(merging)ç­–ç•¥</h4><p><code>--no-commit</code> æ‰§è¡Œåˆå¹¶(merge)ä½†ä¸è‡ªåŠ¨æäº¤, ç»™ç”¨æˆ·åœ¨åšæäº¤å‰æ£€æŸ¥å’Œä¿®æ”¹çš„æœºä¼šã€‚ <code>no-ff</code> ä¼šä¸ºç‰¹æ€§åˆ†æ”¯(feature branch)çš„å­˜åœ¨è¿‡ç•™ä¸‹è¯æ®, ä¿æŒé¡¹ç›®å†å²ä¸€è‡´ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git merge --no-ff --no-commit my-branch</span><br></pre></td></tr></table></figure>\n<h4 id=\"æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤-commit\"><a href=\"#æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤-commit\" class=\"headerlink\" title=\"æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit)\"></a>æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit)</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git merge --squash my-branch</span><br></pre></td></tr></table></figure>\n<p><a name=\"rebase-unpushed-commits\"></a></p>\n<h4 id=\"æˆ‘åªæƒ³ç»„åˆ-combine-æœªæ¨çš„æäº¤-unpushed-commit\"><a href=\"#æˆ‘åªæƒ³ç»„åˆ-combine-æœªæ¨çš„æäº¤-unpushed-commit\" class=\"headerlink\" title=\"æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)\"></a>æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)</h4><p>æœ‰æ—¶å€™ï¼Œåœ¨å°†æ•°æ®æ¨å‘ä¸Šæ¸¸ä¹‹å‰ï¼Œä½ æœ‰å‡ ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œæäº¤(commit)ã€‚è¿™æ—¶å€™ä¸å¸Œæœ›æŠŠå·²ç»æ¨(push)è¿‡çš„ç»„åˆè¿›æ¥ï¼Œå› ä¸ºå…¶ä»–äººå¯èƒ½å·²ç»æœ‰æäº¤(commit)å¼•ç”¨å®ƒä»¬äº†ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git rebase -i @&#123;u&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¼šäº§ç”Ÿä¸€æ¬¡äº¤äº’å¼çš„rebase(interactive rebase), åªä¼šåˆ—å‡ºæ²¡æœ‰æ¨(push)çš„æäº¤(commit)ï¼Œ åœ¨è¿™ä¸ªåˆ—è¡¨æ—¶è¿›è¡Œreorder/fix/squash éƒ½æ˜¯å®‰å…¨çš„ã€‚</p>\n<p><a name=\"check-if-all-commits-on-a-branch-are-merged\"></a></p>\n<h3 id=\"æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤-commit-éƒ½åˆå¹¶-merge-è¿‡äº†\"><a href=\"#æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤-commit-éƒ½åˆå¹¶-merge-è¿‡äº†\" class=\"headerlink\" title=\"æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº†\"></a>æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº†</h3><p>æ£€æŸ¥ä¸€ä¸ªåˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)æ˜¯å¦éƒ½å·²ç»åˆå¹¶(merge)åˆ°äº†å…¶å®ƒåˆ†æ”¯, ä½ åº”è¯¥åœ¨è¿™äº›åˆ†æ”¯çš„head(æˆ–ä»»ä½• commits)ä¹‹é—´åšä¸€æ¬¡diff:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git <span class=\"built_in\">log</span> --graph --left-right --cherry-pick --oneline HEAD...feature/120-on-scroll</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¼šå‘Šè¯‰ä½ åœ¨ä¸€ä¸ªåˆ†æ”¯é‡Œæœ‰è€Œå¦ä¸€ä¸ªåˆ†æ”¯æ²¡æœ‰çš„æ‰€æœ‰æäº¤(commit), å’Œåˆ†æ”¯ä¹‹é—´ä¸å…±äº«çš„æäº¤(commit)çš„åˆ—è¡¨ã€‚ å¦ä¸€ä¸ªåšæ³•å¯ä»¥æ˜¯:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git <span class=\"built_in\">log</span> master ^feature/120-on-scroll --no-merges</span><br></pre></td></tr></table></figure>\n<h3 id=\"äº¤äº’å¼rebase-interactive-rebase-å¯èƒ½å‡ºç°çš„é—®é¢˜\"><a href=\"#äº¤äº’å¼rebase-interactive-rebase-å¯èƒ½å‡ºç°çš„é—®é¢˜\" class=\"headerlink\" title=\"äº¤äº’å¼rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜\"></a>äº¤äº’å¼rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜</h3><p><a name=\"noop\"></a></p>\n<h4 id=\"è¿™ä¸ªrebase-ç¼–è¾‘å±å¹•å‡ºç°â€™noopâ€™\"><a href=\"#è¿™ä¸ªrebase-ç¼–è¾‘å±å¹•å‡ºç°â€™noopâ€™\" class=\"headerlink\" title=\"è¿™ä¸ªrebase ç¼–è¾‘å±å¹•å‡ºç°â€™noopâ€™\"></a>è¿™ä¸ªrebase ç¼–è¾‘å±å¹•å‡ºç°â€™noopâ€™</h4><p>å¦‚æœä½ çœ‹åˆ°çš„æ˜¯è¿™æ ·:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">noop</span><br></pre></td></tr></table></figure></p>\n<p>è¿™æ„å‘³ç€ä½ rebaseçš„åˆ†æ”¯å’Œå½“å‰åˆ†æ”¯åœ¨åŒä¸€ä¸ªæäº¤(commit)ä¸Š, æˆ–è€… <em>é¢†å…ˆ(ahead)</em> å½“å‰åˆ†æ”¯ã€‚ ä½ å¯ä»¥å°è¯•:</p>\n<ul>\n<li>æ£€æŸ¥ç¡®ä¿ä¸»(master)åˆ†æ”¯æ²¡æœ‰é—®é¢˜</li>\n<li>rebase  <code>HEAD~2</code> æˆ–è€…æ›´æ—©</li>\n</ul>\n<p><a name=\"merge-conflict\"></a></p>\n<h4 id=\"æœ‰å†²çªçš„æƒ…å†µ\"><a href=\"#æœ‰å†²çªçš„æƒ…å†µ\" class=\"headerlink\" title=\"æœ‰å†²çªçš„æƒ…å†µ\"></a>æœ‰å†²çªçš„æƒ…å†µ</h4><p>å¦‚æœä½ ä¸èƒ½æˆåŠŸçš„å®Œæˆrebase, ä½ å¯èƒ½å¿…é¡»è¦è§£å†³å†²çªã€‚</p>\n<p>é¦–å…ˆæ‰§è¡Œ <code>git status</code> æ‰¾å‡ºå“ªäº›æ–‡ä»¶æœ‰å†²çª:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git status</span><br><span class=\"line\">On branch my-branch</span><br><span class=\"line\">Changes not staged <span class=\"keyword\">for</span> commit:</span><br><span class=\"line\">  (use <span class=\"string\">\"git add &lt;file&gt;...\"</span> to update what will be committed)</span><br><span class=\"line\">  (use <span class=\"string\">\"git checkout -- &lt;file&gt;...\"</span> to discard changes <span class=\"keyword\">in</span> working directory)</span><br><span class=\"line\"></span><br><span class=\"line\">\tmodified:   README.md</span><br></pre></td></tr></table></figure>\n<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢, <code>README.md</code> æœ‰å†²çªã€‚ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class=\"line\">some code</span><br><span class=\"line\">=========</span><br><span class=\"line\">some code</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"keyword\">new</span>-commit</span><br></pre></td></tr></table></figure>\n<p>ä½ éœ€è¦è§£å†³æ–°æäº¤çš„ä»£ç (ç¤ºä¾‹é‡Œ, ä»ä¸­é—´<code>==</code>çº¿åˆ°<code>new-commit</code>çš„åœ°æ–¹)ä¸<code>HEAD</code> ä¹‹é—´ä¸ä¸€æ ·çš„åœ°æ–¹.</p>\n<p>æœ‰æ—¶å€™è¿™äº›åˆå¹¶éå¸¸å¤æ‚ï¼Œä½ åº”è¯¥ä½¿ç”¨å¯è§†åŒ–çš„å·®å¼‚ç¼–è¾‘å™¨(visual diff editor):</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master*)$ git mergetool -t opendiff</span><br></pre></td></tr></table></figure>\n<p>åœ¨ä½ è§£å†³å®Œæ‰€æœ‰å†²çªå’Œæµ‹è¯•è¿‡å, <code>git add</code> å˜åŒ–äº†çš„(changed)æ–‡ä»¶, ç„¶åç”¨<code>git rebase --continue</code> ç»§ç»­rebaseã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git add README.md</span><br><span class=\"line\">(my-branch)$ git rebase --<span class=\"built_in\">continue</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœåœ¨è§£å†³å®Œæ‰€æœ‰çš„å†²çªè¿‡åï¼Œå¾—åˆ°äº†ä¸æäº¤å‰ä¸€æ ·çš„ç»“æœ, å¯ä»¥æ‰§è¡Œ<code>git rebase --skip</code>ã€‚</p>\n<p>ä»»ä½•æ—¶å€™ä½ æƒ³ç»“æŸæ•´ä¸ªrebase è¿‡ç¨‹ï¼Œå›æ¥rebaseå‰çš„åˆ†æ”¯çŠ¶æ€, ä½ å¯ä»¥åš:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(my-branch)$ git rebase --abort</span><br></pre></td></tr></table></figure>\n<p><a name=\"miscellaneous-objects\"></a></p>\n<h2 id=\"æ‚é¡¹-Miscellaneous-Objects\"><a href=\"#æ‚é¡¹-Miscellaneous-Objects\" class=\"headerlink\" title=\"æ‚é¡¹(Miscellaneous Objects)\"></a>æ‚é¡¹(Miscellaneous Objects)</h2><p><a name=\"clone-submodules\"></a></p>\n<h3 id=\"å…‹éš†æ‰€æœ‰å­æ¨¡å—\"><a href=\"#å…‹éš†æ‰€æœ‰å­æ¨¡å—\" class=\"headerlink\" title=\"å…‹éš†æ‰€æœ‰å­æ¨¡å—\"></a>å…‹éš†æ‰€æœ‰å­æ¨¡å—</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">clone</span> --recursive git://github.com/foo/bar.git</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœå·²ç»å…‹éš†äº†:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git submodule update --init --recursive</span><br></pre></td></tr></table></figure>\n<p><a name=\"delete-tag\"></a></p>\n<h3 id=\"åˆ é™¤æ ‡ç­¾-tag\"><a href=\"#åˆ é™¤æ ‡ç­¾-tag\" class=\"headerlink\" title=\"åˆ é™¤æ ‡ç­¾(tag)\"></a>åˆ é™¤æ ‡ç­¾(tag)</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag -d &lt;tag_name&gt;</span><br><span class=\"line\">$ git push &lt;remote&gt; :refs/tags/&lt;tag_name&gt;</span><br></pre></td></tr></table></figure>\n<p><a name=\"recover-tag\"></a></p>\n<h3 id=\"æ¢å¤å·²åˆ é™¤æ ‡ç­¾-tag\"><a href=\"#æ¢å¤å·²åˆ é™¤æ ‡ç­¾-tag\" class=\"headerlink\" title=\"æ¢å¤å·²åˆ é™¤æ ‡ç­¾(tag)\"></a>æ¢å¤å·²åˆ é™¤æ ‡ç­¾(tag)</h3><p>å¦‚æœä½ æƒ³æ¢å¤ä¸€ä¸ªå·²åˆ é™¤æ ‡ç­¾(tag), å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤: é¦–å…ˆ, éœ€è¦æ‰¾åˆ°æ— æ³•è®¿é—®çš„æ ‡ç­¾(unreachable tag):</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git fsck --unreachable | grep tag</span><br></pre></td></tr></table></figure>\n<p>è®°ä¸‹è¿™ä¸ªæ ‡ç­¾(tag)çš„hashï¼Œç„¶åç”¨Gitçš„ <a href=\"http://git-scm.com/docs/git-update-ref\" target=\"_blank\" rel=\"noopener\">update-ref</a>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git update-ref refs/tags/&lt;tag_name&gt; &lt;<span class=\"built_in\">hash</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>è¿™æ—¶ä½ çš„æ ‡ç­¾(tag)åº”è¯¥å·²ç»æ¢å¤äº†ã€‚</p>\n<p><a name=\"deleted-patch\"></a></p>\n<h3 id=\"å·²åˆ é™¤è¡¥ä¸-patch\"><a href=\"#å·²åˆ é™¤è¡¥ä¸-patch\" class=\"headerlink\" title=\"å·²åˆ é™¤è¡¥ä¸(patch)\"></a>å·²åˆ é™¤è¡¥ä¸(patch)</h3><p>å¦‚æœæŸäººåœ¨ GitHub ä¸Šç»™ä½ å‘äº†ä¸€ä¸ªpull request, ä½†æ˜¯ç„¶åä»–åˆ é™¤äº†ä»–è‡ªå·±çš„åŸå§‹ fork, ä½ å°†æ²¡æ³•å…‹éš†ä»–ä»¬çš„æäº¤(commit)æˆ–ä½¿ç”¨ <code>git am</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹, æœ€å¥½æ‰‹åŠ¨çš„æŸ¥çœ‹ä»–ä»¬çš„æäº¤(commit)ï¼Œå¹¶æŠŠå®ƒä»¬æ‹·è´åˆ°ä¸€ä¸ªæœ¬åœ°æ–°åˆ†æ”¯ï¼Œç„¶ååšæäº¤ã€‚</p>\n<p>åšå®Œæäº¤å, å†ä¿®æ”¹ä½œè€…ï¼Œå‚è§<a href=\"#commit-wrong-author\">å˜æ›´ä½œè€…</a>ã€‚ ç„¶å, åº”ç”¨å˜åŒ–, å†å‘èµ·ä¸€ä¸ªæ–°çš„pull requestã€‚</p>\n<h2 id=\"è·Ÿè¸ªæ–‡ä»¶-Tracking-Files\"><a href=\"#è·Ÿè¸ªæ–‡ä»¶-Tracking-Files\" class=\"headerlink\" title=\"è·Ÿè¸ªæ–‡ä»¶(Tracking Files)\"></a>è·Ÿè¸ªæ–‡ä»¶(Tracking Files)</h2><p><a href=\"i-want-to-change-a-file-names-capitalization-without-changing-the-contents-of-the-file\"></a></p>\n<h3 id=\"æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹\"><a href=\"#æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹\" class=\"headerlink\" title=\"æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹\"></a>æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git mv --force myfile MyFile</span><br></pre></td></tr></table></figure>\n<p><a href=\"remove-from-git\"></a></p>\n<h3 id=\"æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶\"><a href=\"#æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶\" class=\"headerlink\" title=\"æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶\"></a>æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git rm --cached log.txt</span><br></pre></td></tr></table></figure>\n<h2 id=\"é…ç½®-Configuration\"><a href=\"#é…ç½®-Configuration\" class=\"headerlink\" title=\"é…ç½®(Configuration)\"></a>é…ç½®(Configuration)</h2><p><a name=\"adding-command-aliases\"></a></p>\n<h3 id=\"æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å-alias\"><a href=\"#æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å-alias\" class=\"headerlink\" title=\"æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å(alias)\"></a>æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å(alias)</h3><p>åœ¨ OS X å’Œ Linux ä¸‹, ä½ çš„ Gitçš„é…ç½®æ–‡ä»¶å‚¨å­˜åœ¨ <figure class=\"highlight plain\"><figcaption><span>éƒ¨åˆ†æ·»åŠ äº†ä¸€äº›å¿«æ·åˆ«å(å’Œä¸€äº›æˆ‘å®¹æ˜“æ‹¼å†™é”™è¯¯çš„)ï¼Œå¦‚ä¸‹:</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">```vim</span><br><span class=\"line\">[alias]</span><br><span class=\"line\">    a = add</span><br><span class=\"line\">    amend = commit --amend</span><br><span class=\"line\">    c = commit</span><br><span class=\"line\">    ca = commit --amend</span><br><span class=\"line\">    ci = commit -a</span><br><span class=\"line\">    co = checkout</span><br><span class=\"line\">    d = diff</span><br><span class=\"line\">    dc = diff --changed</span><br><span class=\"line\">    ds = diff --staged</span><br><span class=\"line\">    f = fetch</span><br><span class=\"line\">    loll = log --graph --decorate --pretty=oneline --abbrev-commit</span><br><span class=\"line\">    m = merge</span><br><span class=\"line\">    one = log --pretty=oneline</span><br><span class=\"line\">    outstanding = rebase -i @&#123;u&#125;</span><br><span class=\"line\">    s = status</span><br><span class=\"line\">    unpushed = log @&#123;u&#125;</span><br><span class=\"line\">    wc = whatchanged</span><br><span class=\"line\">    wip = rebase -i @&#123;u&#125;</span><br><span class=\"line\">    zap = fetch -p</span><br></pre></td></tr></table></figure></p>\n<p><a name=\"credential-helper\"></a></p>\n<h3 id=\"æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“-repository-çš„ç”¨æˆ·åå’Œå¯†ç \"><a href=\"#æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“-repository-çš„ç”¨æˆ·åå’Œå¯†ç \" class=\"headerlink\" title=\"æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“(repository)çš„ç”¨æˆ·åå’Œå¯†ç \"></a>æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“(repository)çš„ç”¨æˆ·åå’Œå¯†ç </h3><p>ä½ å¯èƒ½æœ‰ä¸€ä¸ªä»“åº“éœ€è¦æˆæƒï¼Œè¿™æ—¶ä½ å¯ä»¥ç¼“å­˜ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œä¸ç”¨æ¯æ¬¡æ¨/æ‹‰(push/pull)çš„æ—¶å€™éƒ½è¾“å…¥ï¼ŒCredential helperèƒ½å¸®ä½ ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global credential.helper cache</span><br><span class=\"line\"><span class=\"comment\"># Set git to use the credential memory cache</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global credential.helper <span class=\"string\">'cache --timeout=3600'</span></span><br><span class=\"line\"><span class=\"comment\"># Set the cache to timeout after 1 hour (setting is in seconds)</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"#ive-no-idea-what-i-did-wrong\"></a></p>\n<h2 id=\"æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ\"><a href=\"#æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ\" class=\"headerlink\" title=\"æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ\"></a>æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ</h2><p>ä½ æŠŠäº‹æƒ…æç ¸äº†ï¼šä½  <code>é‡ç½®(reset)</code> äº†ä¸€äº›ä¸œè¥¿, æˆ–è€…ä½ åˆå¹¶äº†é”™è¯¯çš„åˆ†æ”¯, äº¦æˆ–ä½ å¼ºæ¨äº†åæ‰¾ä¸åˆ°ä½ è‡ªå·±çš„æäº¤(commit)äº†ã€‚æœ‰äº›æ—¶å€™, ä½ ä¸€ç›´éƒ½åšå¾—å¾ˆå¥½, ä½†ä½ æƒ³å›åˆ°ä»¥å‰çš„æŸä¸ªçŠ¶æ€ã€‚</p>\n<p>è¿™å°±æ˜¯ <code>git reflog</code> çš„ç›®çš„ï¼Œ <code>reflog</code> è®°å½•å¯¹åˆ†æ”¯é¡¶ç«¯(the tip of a branch)çš„ä»»ä½•æ”¹å˜, å³ä½¿é‚£ä¸ªé¡¶ç«¯æ²¡æœ‰è¢«ä»»ä½•åˆ†æ”¯æˆ–æ ‡ç­¾å¼•ç”¨ã€‚åŸºæœ¬ä¸Š, æ¯æ¬¡HEADçš„æ”¹å˜, ä¸€æ¡æ–°çš„è®°å½•å°±ä¼šå¢åŠ åˆ°<code>reflog</code>ã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™åªå¯¹æœ¬åœ°åˆ†æ”¯èµ·ä½œç”¨ï¼Œä¸”å®ƒåªè·Ÿè¸ªåŠ¨ä½œ (ä¾‹å¦‚ï¼Œä¸ä¼šè·Ÿè¸ªä¸€ä¸ªæ²¡æœ‰è¢«è®°å½•çš„æ–‡ä»¶çš„ä»»ä½•æ”¹å˜)ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(master)$ git reflog</span><br><span class=\"line\">0a2e358 HEAD@&#123;0&#125;: reset: moving to HEAD~2</span><br><span class=\"line\">0254ea7 HEAD@&#123;1&#125;: checkout: moving from 2.2 to master</span><br><span class=\"line\">c10f740 HEAD@&#123;2&#125;: checkout: moving from master to 2.2</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„reflogå±•ç¤ºäº†ä»masteråˆ†æ”¯ç­¾å‡º(checkout)åˆ°2.2 åˆ†æ”¯ï¼Œç„¶åå†ç­¾å›ã€‚ é‚£é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªç¡¬é‡ç½®(hard reset)åˆ°ä¸€ä¸ªè¾ƒæ—§çš„æäº¤ã€‚æœ€æ–°çš„åŠ¨ä½œå‡ºç°åœ¨æœ€ä¸Šé¢ä»¥ <code>HEAD@{0}</code>æ ‡è¯†.</p>\n<p>å¦‚æœäº‹å®è¯æ˜ä½ ä¸å°å¿ƒå›ç§»(move back)äº†æäº¤(commit), reflog ä¼šåŒ…å«ä½ ä¸å°å¿ƒå›ç§»å‰masterä¸ŠæŒ‡å‘çš„æäº¤(0254ea7)ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git reset --hard 0254ea7</span><br></pre></td></tr></table></figure>\n<p>ç„¶åä½¿ç”¨git resetå°±å¯ä»¥æŠŠmasteræ”¹å›åˆ°ä¹‹å‰çš„commitï¼Œè¿™æä¾›äº†ä¸€ä¸ªåœ¨å†å²è¢«æ„å¤–æ›´æ”¹æƒ…å†µä¸‹çš„å®‰å…¨ç½‘ã€‚</p>\n<p>(<a href=\"https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog\" target=\"_blank\" rel=\"noopener\">æ‘˜è‡ª</a>).</p>\n<h1 id=\"å…¶å®ƒèµ„æº-Other-Resources\"><a href=\"#å…¶å®ƒèµ„æº-Other-Resources\" class=\"headerlink\" title=\"å…¶å®ƒèµ„æº(Other Resources)\"></a>å…¶å®ƒèµ„æº(Other Resources)</h1><h2 id=\"ä¹¦-Books\"><a href=\"#ä¹¦-Books\" class=\"headerlink\" title=\"ä¹¦(Books)\"></a>ä¹¦(Books)</h2><ul>\n<li><a href=\"https://git-scm.com/book/en/v2\" target=\"_blank\" rel=\"noopener\">Pro Git</a> - Scott Chaconâ€™s excellent git book</li>\n<li><a href=\"https://github.com/pluralsight/git-internals-pdf\" target=\"_blank\" rel=\"noopener\">Git Internals</a> - Scott Chaconâ€™s other excellent git book</li>\n</ul>\n<h2 id=\"æ•™ç¨‹-Tutorials\"><a href=\"#æ•™ç¨‹-Tutorials\" class=\"headerlink\" title=\"æ•™ç¨‹(Tutorials)\"></a>æ•™ç¨‹(Tutorials)</h2><ul>\n<li><a href=\"https://learngitbranching.js.org/\" target=\"_blank\" rel=\"noopener\">Learn Git branching</a> ä¸€ä¸ªåŸºäºç½‘é¡µçš„äº¤äº’å¼ branching/merging/rebasing æ•™ç¨‹</li>\n<li><a href=\"https://medium.com/@porteneuve/getting-solid-at-git-rebase-vs-merge-4fa1a48c53aa\" target=\"_blank\" rel=\"noopener\">Getting solid at Git rebase vs. merge</a></li>\n<li><a href=\"https://github.com/asmeurer/git-workflow\" target=\"_blank\" rel=\"noopener\">git-workflow</a> - <a href=\"https://github.com/asmeurer\" target=\"_blank\" rel=\"noopener\">Aaron Meurer</a>çš„æ€ä¹ˆä½¿ç”¨Gitä¸ºå¼€æºä»“åº“è´¡çŒ®</li>\n<li><a href=\"http://hugogiraudel.com/2015/08/13/github-as-a-workflow/\" target=\"_blank\" rel=\"noopener\">GitHub as a workflow</a> - ä½¿ç”¨GitHubåšä¸ºå·¥ä½œæµçš„è¶£äº‹, å°¤å…¶æ˜¯ç©ºPRs</li>\n</ul>\n<h2 id=\"è„šæœ¬å’Œå·¥å…·-Scripts-and-Tools\"><a href=\"#è„šæœ¬å’Œå·¥å…·-Scripts-and-Tools\" class=\"headerlink\" title=\"è„šæœ¬å’Œå·¥å…·(Scripts and Tools)\"></a>è„šæœ¬å’Œå·¥å…·(Scripts and Tools)</h2><ul>\n<li><a href=\"http://firstaidgit.io/\" target=\"_blank\" rel=\"noopener\">firstaidgit.io</a> ä¸€ä¸ªå¯æœç´¢çš„æœ€å¸¸è¢«é—®åˆ°çš„Gitçš„é—®é¢˜</li>\n<li><a href=\"https://github.com/unixorn/git-extra-commands\" target=\"_blank\" rel=\"noopener\">git-extra-commands</a> - ä¸€å †æœ‰ç”¨çš„é¢å¤–çš„Gitè„šæœ¬</li>\n<li><a href=\"https://github.com/tj/git-extras\" target=\"_blank\" rel=\"noopener\">git-extras</a> - GIT å·¥å…·é›† â€“ repo summary, repl, changelog population, author commit percentages and more</li>\n<li><a href=\"https://github.com/qw3rtman/git-fire\" target=\"_blank\" rel=\"noopener\">git-fire</a> - git-fire æ˜¯ä¸€ä¸ª Git æ’ä»¶ï¼Œç”¨äºå¸®åŠ©åœ¨ç´§æ€¥æƒ…å†µä¸‹æ·»åŠ æ‰€æœ‰å½“å‰æ–‡ä»¶, åšæäº¤(committing), å’Œæ¨(push)åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯(é˜»æ­¢åˆå¹¶å†²çª)ã€‚</li>\n<li><a href=\"https://github.com/git-tips/tips\" target=\"_blank\" rel=\"noopener\">git-tips</a> - Gitå°æç¤º</li>\n<li><a href=\"https://github.com/Originate/git-town\" target=\"_blank\" rel=\"noopener\">git-town</a> - é€šç”¨ï¼Œé«˜çº§Gitå·¥ä½œæµæ”¯æŒï¼ <a href=\"http://www.git-town.com\" target=\"_blank\" rel=\"noopener\">http://www.git-town.com</a></li>\n</ul>\n<h2 id=\"GUIå®¢æˆ·ç«¯-GUI-Clients\"><a href=\"#GUIå®¢æˆ·ç«¯-GUI-Clients\" class=\"headerlink\" title=\"GUIå®¢æˆ·ç«¯(GUI Clients)\"></a>GUIå®¢æˆ·ç«¯(GUI Clients)</h2><ul>\n<li><a href=\"https://www.gitkraken.com/\" target=\"_blank\" rel=\"noopener\">GitKraken</a> - è±ªåçš„Gitå®¢æˆ·ç«¯ Windows, Mac &amp; Linux</li>\n<li><a href=\"https://git-cola.github.io/\" target=\"_blank\" rel=\"noopener\">git-cola</a> - å¦å¤–ä¸€ä¸ªGitå®¢æˆ·ç«¯ Windows &amp; OS X</li>\n<li><a href=\"https://github.com/git-up/GitUp\" target=\"_blank\" rel=\"noopener\">GitUp</a> - ä¸€ä¸ªæ–°çš„Gitå®¢æˆ·ç«¯ï¼Œåœ¨å¤„ç†Gitçš„å¤æ‚æ€§ä¸Šæœ‰è‡ªå·±çš„ç‰¹ç‚¹</li>\n<li><a href=\"https://rowanj.github.io/gitx/\" target=\"_blank\" rel=\"noopener\">gitx-dev</a> - å›¾å½¢åŒ–çš„Gitå®¢æˆ·ç«¯ OS X</li>\n<li><a href=\"https://www.sourcetreeapp.com/\" target=\"_blank\" rel=\"noopener\">Source Tree</a> - å…è´¹çš„å›¾å½¢åŒ–Gitå®¢æˆ·ç«¯ Windows &amp; OS X</li>\n<li><a href=\"http://www.git-tower.com/\" target=\"_blank\" rel=\"noopener\">Tower</a> - å›¾å½¢åŒ–Gitå®¢æˆ·ç«¯ OS X(ä»˜è´¹)</li>\n</ul>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2019/09/27/gité£è¡Œè§„åˆ™/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2019/09/27/gité£è¡Œè§„åˆ™/</a></p>\n</blockquote>\n","categories":[],"tags":[]},{"title":"adbæ— çº¿è¿æ¥æ‰‹æœº","url":"http://yoursite.com/2019/09/19/adbæ— çº¿è¿æ¥æ‰‹æœº/","content":"<p>çœŸæœºè°ƒè¯•çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½æ˜¯æ•°æ®çº¿è¿æ¥æ‰‹æœºï¼ŒæŸäº›æƒ…å†µä¸‹ä¼šæ˜¾å¾—ä¸é‚£ä¹ˆæ–¹ä¾¿ï¼ŒAndroidStudioä¸­æœ‰ä¸å°‘ç±»ä¼¼çš„æ— çº¿adbè¿æ¥æ’ä»¶ï¼Œç”¨è¿‡è¿˜å¯ä»¥ã€‚é‚£ä¹ˆä¸å®‰è£…æ’ä»¶å…¶å®ä¹Ÿèƒ½æ— çº¿è¿æ¥ï¼Œadbæœ¬èº«æ”¯æŒæ— çº¿è¿æ¥ã€‚</p>\n<blockquote>\n<p>è®¾ç½®ä¸€ä¸ªç«¯å£<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb tcpip 5555</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>è¿æ¥æ‰‹æœºï¼ˆç«¯å£ä¸ºåˆšåˆšè®¾ç½®çš„ï¼‰<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb connect è®¾å¤‡IPåœ°å€:5555</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>å¦‚æœæƒ³åˆ‡å›usbæ•°æ®çº¿çš„è¯<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb usb</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2019/09/19/adbæ— çº¿è¿æ¥æ‰‹æœº/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2019/09/19/adbæ— çº¿è¿æ¥æ‰‹æœº/</a></p>\n</blockquote>\n","categories":["AndroidStudio"],"tags":["adb","è¿æ¥","æ— çº¿"]},{"title":"monkeyå‹åŠ›æµ‹è¯•","url":"http://yoursite.com/2019/03/11/monkeyå‹åŠ›æµ‹è¯•/","content":"<p>å…¥é—¨çº§çŸ¥è¯†ï¼Œä¸è¿‡é•¿æ—¶é—´ä¸ç”¨å‘½ä»¤å®¹æ˜“å¿˜ï¼Œç®€å•åšä¸ªè®°å½•</p>\n<h2 id=\"å‘½ä»¤æ ¼å¼\"><a href=\"#å‘½ä»¤æ ¼å¼\" class=\"headerlink\" title=\"å‘½ä»¤æ ¼å¼\"></a>å‘½ä»¤æ ¼å¼</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb shell monkey [-p åŒ…å] [å…¶ä»–å‚æ•°] [-v] æµ‹è¯•æ¬¡æ•° [&gt; <span class=\"regexp\">/user/</span>â€¦/result.txt]ï¼ˆæ³¨ï¼šâ€˜&gt; <span class=\"regexp\">/user/</span>â€¦/result.txtâ€™å¯å°†ç»“æœæ‰“å°åˆ°æ–‡æœ¬ä¸­ï¼‰</span><br></pre></td></tr></table></figure>\n<p>ä¸¾ä¾‹:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb shell monkey -p com.variflight.highspeed -s <span class=\"number\">3000</span> --ignore-crashes --ignore-timeouts -vv <span class=\"number\">6000</span> &gt; <span class=\"regexp\">/Users/</span>robinwang/Downloads/monkey.txt</span><br></pre></td></tr></table></figure></p>\n<p>æ­¤å‘½ä»¤ç¿»è¯‘ä¸ºè‡ªç„¶è¯­è¨€æ˜¯ï¼šmonkeyä½œç”¨äºæ­¤åŒ…ï¼Œäº§ç”Ÿæ—¶é—´åºåˆ—çš„ç§å­åºåˆ—å€¼å®šä¸º3000ï¼Œè¿è¡Œä¸­å¿½ç•¥ç¨‹åºå´©æºƒã€è¶…æ—¶ï¼ŒåŒæ—¶ç›‘è§†æœ¬åœ°ç¨‹åºå´©æºƒï¼Œæ—¥å¿—çš„è¯¦ç»†ä¿¡æ¯çº§åˆ«ä¸ºäºŒçº§ï¼Œäº§ç”Ÿ6000ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œç›¸å…³æ—¥å¿—ä¼šä¿å­˜åœ¨æ‰€å†™è·¯å¾„ä¸­ï¼Œæœç´¢å…³é”®å­—â€˜crashâ€™æˆ–â€˜anrâ€™å³å¯æŸ¥çœ‹å‘ç”Ÿé”™è¯¯çš„éƒ¨åˆ†ã€‚</p>\n<h2 id=\"å‚æ•°\"><a href=\"#å‚æ•°\" class=\"headerlink\" title=\"å‚æ•°\"></a>å‚æ•°</h2><p>monkey -helpï¼šå¯æŸ¥çœ‹å‚æ•°è¯´æ˜åˆ—è¡¨ã€‚å‚æ•°é€‰é¡¹æœ‰ï¼š<br>ï¼ˆ1ï¼‰-p åŒ…å1 -p åŒ…å2 â€¦ ï¼šæŒ‡å®šä¸€æˆ–å¤šä¸ªå¾…æµ‹è¯•çš„åŒ…ï¼Œè‹¥ä¸æŒ‡å®šåˆ™æµ‹è¯•ä¸­å¯æ‰“å¼€ä»»æ„appï¼›<br>ï¼ˆ2ï¼‰-v:æŒ‡å®šæ‰“å°æ—¥å¿—çš„è¯¦ç»†ç¨‹åº¦ï¼Œæœ‰â€˜-vâ€™,â€™-v -vâ€™,â€™-v -v -vâ€™ä¸‰ä¸ªçº§åˆ«ï¼›<br>ï¼ˆ3ï¼‰-s seedå€¼ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œè™½ç„¶ç”¨æˆ·æ“ä½œåºåˆ—ï¼ˆæ¯æ¬¡æ“ä½œæŒ‰ä¸€å®šçš„é¡ºåºæ‰€ç»„æˆçš„ä¸€ç³»åˆ—æ“ä½œï¼‰æ˜¯éšæœºç”Ÿæˆçš„ï¼Œä½†åªè¦å¯¹åŒä¸€ä¸ªåŒ…æŒ‡å®šç›¸åŒçš„Seedå€¼ï¼Œå°±èƒ½ä½¿æµ‹è¯•äº‹ä»¶ç›¸åŒï¼Œå¯ç”¨äºæ’é”™ã€‚æ‰€ä»¥ä¹Ÿè¯´è¿™ä¸ªæ“ä½œåºåˆ—æ˜¯ä¼ªéšæœºçš„ã€‚è‹¥ä¸æ·»åŠ æ­¤å‚æ•°ï¼Œç»“æœä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆseedå€¼ï¼›<br>ï¼ˆ4ï¼‰â€“-throttle æ¯«ç§’æ•°ï¼šæŒ‡å®šæ“ä½œï¼ˆå³äº‹ä»¶ï¼‰é—´çš„æ—¶å»¶ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼›<br>ï¼ˆ5ï¼‰â€“-ignore-crashesï¼šä½¿å¾—æ“ä½œåºåˆ—å¯ä»¥å…¨éƒ¨æ‰§è¡Œå®Œï¼Œè€Œä¸ä¼šåœ¨å‘ç”Ÿå´©æºƒæ—¶å°±ç»ˆæ­¢ç¨‹åºè¿›ç¨‹ï¼›<br>ï¼ˆ6ï¼‰â€“ignore-timeoutsï¼šä½¿å¾—æ“ä½œåºåˆ—å¯ä»¥å…¨éƒ¨æ‰§è¡Œå®Œï¼Œè€Œä¸ä¼šåœ¨å‘ç”ŸANR(Android Not Responding)æ—¶å°±ç»ˆæ­¢ç¨‹åºè¿›ç¨‹ï¼›<br>ï¼ˆ7ï¼‰â€“-ignore-security-exceptionsï¼šä½¿å¾—æ“ä½œåºåˆ—å¯ä»¥å…¨éƒ¨æ‰§è¡Œå®Œï¼Œè€Œä¸ä¼šåœ¨å‘ç”Ÿè®¸å¯é”™è¯¯æ—¶ï¼ˆå¦‚è¯ä¹¦è®¸å¯ï¼Œç½‘ç»œè®¸å¯ç­‰ï¼‰æ—¶å°±ç»ˆæ­¢ç¨‹åºè¿›ç¨‹ï¼›<br>ï¼ˆ8ï¼‰â€“-kill-process-after-errorï¼šä½¿å¾—å½“åº”ç”¨ç¨‹åºå‘ç”Ÿé”™è¯¯æ—¶åœæ­¢è¿è¡Œå¹¶ä¿æŒåœ¨å½“å‰çŠ¶æ€ï¼Œå³ä»…æ˜¯é™æ­¢åœ¨å‘ç”Ÿé”™è¯¯æ—¶çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯ç»“æŸè¯¥åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ï¼›<br>ï¼ˆ9ï¼‰â€“-monitor-native-crashesï¼šæŒ‡å®šç›‘è§†å¹¶æŠ¥å‘Šåº”ç”¨ç¨‹åºå‘ç”Ÿå´©æºƒçš„æœ¬åœ°ä»£ç ï¼›<br>ï¼ˆ10ï¼‰â€“-pct-äº‹ä»¶1 äº‹ä»¶ç™¾åˆ†æ¯”1 -pct-äº‹ä»¶2 äº‹ä»¶ç™¾åˆ†æ¯”2 â€¦ ï¼šç”¨äºæŒ‡å®šæŸç±»äº‹ä»¶æ•°ç›®å æ€»äº‹ä»¶æ•°ç›®çš„ç™¾åˆ†æ¯”ï¼›<br>å…¶ä¸­æ‰€æŒ‡å®šäº‹ä»¶å‚æ•°é€‰é¡¹å¯ä¸ºï¼š<br>-flip(ç‚¹å‡»äº‹ä»¶)<br>-touch(è§¦æ‘¸äº‹ä»¶æ˜¯ä¸€ä¸ªdown-upäº‹ä»¶)<br>-motion(åŠ¨ä½œäº‹ä»¶ç”±ä¸€ä¸ªdownäº‹ä»¶ã€ä¸€ç³»åˆ—çš„ä¼ªéšæœºäº‹ä»¶å’Œä¸€ä¸ªupäº‹ä»¶ç»„æˆ)<br>-trackball(è½¨è¿¹äº‹ä»¶ï¼Œåœ¨å±å¹•ä¸Šè¿›è¡Œéšæœºæ‹–åŠ¨)<br>-nav(åŸºæœ¬å¯¼èˆªäº‹ä»¶ï¼Œå¦‚ä¸Šä¸‹å·¦å³é”®)<br>-majornavï¼ˆä¸»è¦å¯¼èˆªäº‹ä»¶ï¼Œé€šå¸¸å¼•å‘å›¾å½¢ç•Œé¢ä¸­çš„åŠ¨ä½œï¼‰<br>-syskeys(ç³»ç»ŸæŒ‰é”®äº‹ä»¶æŒ‡å¦‚ç³»ç»ŸæŒ‰é”®Homeã€Backã€Start Callã€End CallåŠvolumeControl)<br>-appswitch(å¯åŠ¨activityäº‹ä»¶)<br>-anyevent(å…¶å®ƒç±»å‹äº‹ä»¶)<br>æ³¨æ„ï¼Œå„äº‹ä»¶ç±»å‹çš„ç™¾åˆ†æ¯”æ€»æ•°ä¸èƒ½è¶…è¿‡100ã€‚</p>\n<h2 id=\"åˆ†æ\"><a href=\"#åˆ†æ\" class=\"headerlink\" title=\"åˆ†æ\"></a>åˆ†æ</h2><p>ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡å‘é€5ä¸‡æ¬¡éšæœºäº‹ä»¶çš„è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚ä¹‹é—´çš„é—´éš”ä¸º150æ¯«ç§’ï¼Œæµ‹è¯•å¤§çº¦ä¼šè¿›è¡Œ40minï¼Œå®Œæˆä»¥åå°±å¯ä»¥æŸ¥çœ‹æ—¥å¿—ã€‚<br>æ—¥å¿—ä¸­å¯èƒ½çš„é”™è¯¯ï¼š</p>\n<p>ç¨‹åºå¼‚å¸¸é€€å‡ºï¼Œuncausedexception ï¼ˆctrl+fæœç´¢â€˜Fatalâ€™ï¼‰<br>ç¨‹åºå¼ºåˆ¶å…³é—­ï¼ŒForceClosed (ç®€ç§°FC) ï¼ˆåŒä¸Šï¼‰<br>ç¨‹åºæ— å“åº”ï¼ŒApplicationNo Responseï¼ˆctrl+fæœç´¢â€˜ANR â€™ï¼ŒåŠ ç©ºæ ¼æ˜¯ä¸ºäº†å±è”½æ‰ä¸€äº›æ— æ•ˆä¿¡æ¯)<br>æ‰‹åŠ¨ç”Ÿæˆã€‚</p>\n<h2 id=\"æ›´å¤š\"><a href=\"#æ›´å¤š\" class=\"headerlink\" title=\"æ›´å¤š\"></a>æ›´å¤š</h2><p>å…³äºmonkeyå‹åŠ›æµ‹è¯•ï¼Œæœ‰åŒå­¦äº†è§£çš„æ›´å¤šï¼Œæƒ³äº†è§£æ›´è¯¦ç»†å¯ä»¥æŸ¥é˜…è¿™ç¯‡æ–‡ç« <a href=\"https://blog.csdn.net/sinat_35762047/article/details/75137436\" target=\"_blank\" rel=\"noopener\">Androidå‹åŠ›æµ‹è¯•å¿«é€Ÿå…¥é—¨æ•™ç¨‹</a></p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2019/03/11/monkeyå‹åŠ›æµ‹è¯•/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2019/03/11/monkeyå‹åŠ›æµ‹è¯•/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["æµ‹è¯•","monkey"]},{"title":"mac å®Œæ•´åˆ é™¤Android Studio","url":"http://yoursite.com/2019/02/13/mac-å®Œæ•´åˆ é™¤Android-Studio/","content":"<h2 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h2><p>mac pro AndroidStudioå‡çº§åˆ°3.3ä¹‹åä¸€å¼€å§‹æ²¡å¤šå¤§é—®é¢˜ï¼Œåˆšæ‰å¡äº†ä¸€æ¬¡ï¼Œç›´æ¥æŠŠç¬”è®°æœ¬å‰©ä½™çš„180Gæ’‘æ»¡ï¼Œå¯¼è‡´æœºå™¨å¡æ­»ï¼Œå…³æœºå…³ä¸äº†ã€‚å¼ºåˆ¶å…³æœºåï¼Œå¼€æœºè¶…çº§æ…¢ï¼Œåº”è¯¥æ˜¯æ‰§è¡Œäº†äº›å›æ»šçš„æ“ä½œï¼Œç­‰äº†å¥½é•¿æ—¶é—´å¼€æœºä¹‹åï¼Œæ¡Œé¢èƒŒæ™¯ä¹Ÿè¢«åˆå§‹åŒ–äº†ã€‚å†…å­˜è¿˜æ˜¯æ’‘æ»¡çš„çŠ¶æ€ï¼Œç³»ç»Ÿæ–‡ä»¶å†…å­˜ä¸€ç‰‡é»„ã€‚æ— å¥ˆä¹‹ä¸‹åªèƒ½å½»åº•åˆ é™¤AndroidStudioæ¥è§£å†³ã€‚ä»¥ä¸‹æ“ä½œä¹Ÿæ˜¯ä»ç½‘ä¸Šæ‰¾åˆ°çš„ï¼Œäº²æµ‹æœ‰æ•ˆï¼Œæ¸…ç†å®Œåï¼Œå†…å­˜æ¢å¤æ­£å¸¸çŠ¶æ€ã€‚</p>\n<h2 id=\"æ“ä½œ\"><a href=\"#æ“ä½œ\" class=\"headerlink\" title=\"æ“ä½œ\"></a>æ“ä½œ</h2><h3 id=\"ç¬¬ä¸€æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\"><a href=\"#ç¬¬ä¸€æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK\"></a>ç¬¬ä¸€æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -Rf /Applications/Android\\ Studio.app</span><br><span class=\"line\">rm -Rf ~/Library/Preferences/AndroidStudio*</span><br><span class=\"line\">rm ~/Library/Preferences/com.google.android.studio.plist</span><br><span class=\"line\">rm -Rf ~/Library/Application\\ Support/AndroidStudio*</span><br><span class=\"line\">rm -Rf ~/Library/Logs/AndroidStudio*</span><br><span class=\"line\">rm -Rf ~/Library/Caches/AndroidStudio*</span><br></pre></td></tr></table></figure>\n<h3 id=\"ç¬¬äºŒæ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\"><a href=\"#ç¬¬äºŒæ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK\"></a>ç¬¬äºŒæ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -Rf ~/AndroidStudioProjects</span><br></pre></td></tr></table></figure>\n<h3 id=\"ç¬¬ä¸‰æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\"><a href=\"#ç¬¬ä¸‰æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK\"></a>ç¬¬ä¸‰æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -Rf ~/.gradle</span><br></pre></td></tr></table></figure>\n<h3 id=\"ç¬¬å››æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\"><a href=\"#ç¬¬å››æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\" class=\"headerlink\" title=\"ç¬¬å››æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK\"></a>ç¬¬å››æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -Rf ~/.android</span><br></pre></td></tr></table></figure>\n<h3 id=\"ç¬¬äº”æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\"><a href=\"#ç¬¬äº”æ­¥-å¤åˆ¶ç²˜è´´-å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢-ç›´æ¥å›è½¦å°±OK\" class=\"headerlink\" title=\"ç¬¬äº”æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK\"></a>ç¬¬äº”æ­¥: å¤åˆ¶ç²˜è´´!! å¤åˆ¶åˆ°å‘½ä»¤è¡Œé‡Œé¢,ç›´æ¥å›è½¦å°±OK</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -Rf ~/Library/Android*</span><br></pre></td></tr></table></figure>\n<p>åšå®Œè¿™äº”æ­¥,å…³é—­ä½ çš„ç»ˆç«¯,å…¨éƒ¨å®Œæ¯•ã€‚æ­¤æ—¶å†…å­˜å·²ç»æ¢å¤ï¼Œå¯ä»¥é‡æ–°ä¸‹è½½å®‰è£…AndroidStudio</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2019/02/13/mac-å®Œæ•´åˆ é™¤Android-Studio/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2019/02/13/mac-å®Œæ•´åˆ é™¤Android-Studio/</a></p>\n</blockquote>\n","categories":["ç¼–è¯‘å™¨ Mac"],"tags":["AndroidStudio"]},{"title":"CenterVerticalTextSpan","url":"http://yoursite.com/2018/11/12/CenterVerticalTextSpan/","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä½¿TextViewä¸­ä¸åŒå¤§å°å­—ä½“å‚ç›´å±…ä¸­</span></span><br><span class=\"line\"><span class=\"comment\"> * Created by Robin on 2018/11/8.</span></span><br><span class=\"line\"><span class=\"comment\"> * Email: robinxdroid@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> * Blog: http://robinx.net/</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CenterVerticalTextSpan</span> <span class=\"keyword\">extends</span> <span class=\"title\">ReplacementSpan</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> fontSizePx;    <span class=\"comment\">//å­—ä½“å¤§å°px</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CenterVerticalTextSpan</span><span class=\"params\">(<span class=\"keyword\">int</span> fontSizePx)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fontSizePx = fontSizePx;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getSize</span><span class=\"params\">(Paint paint, CharSequence text, <span class=\"keyword\">int</span> start, <span class=\"keyword\">int</span> end, Paint.FontMetricsInt fm)</span> </span>&#123;</span><br><span class=\"line\">        text = text.subSequence(start, end);</span><br><span class=\"line\">        Paint p = getCustomTextPaint(paint);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">int</span>) p.measureText(text.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">draw</span><span class=\"params\">(Canvas canvas, CharSequence text, <span class=\"keyword\">int</span> start, <span class=\"keyword\">int</span> end, <span class=\"keyword\">float</span> x, <span class=\"keyword\">int</span> top, <span class=\"keyword\">int</span> y, <span class=\"keyword\">int</span> bottom, Paint paint)</span> </span>&#123;</span><br><span class=\"line\">        text = text.subSequence(start, end);</span><br><span class=\"line\">        Paint p = getCustomTextPaint(paint);</span><br><span class=\"line\">        Paint.FontMetricsInt fm = p.getFontMetricsInt();</span><br><span class=\"line\">        canvas.drawText(text.toString(), x, y - ((y + fm.descent + y + fm.ascent) / <span class=\"number\">2</span> - (bottom + top) / <span class=\"number\">2</span>), p);    <span class=\"comment\">//æ­¤å¤„é‡æ–°è®¡ç®—yåæ ‡ï¼Œä½¿å­—ä½“å±…ä¸­</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> TextPaint <span class=\"title\">getCustomTextPaint</span><span class=\"params\">(Paint srcPaint)</span> </span>&#123;</span><br><span class=\"line\">        TextPaint paint = <span class=\"keyword\">new</span> TextPaint(srcPaint);</span><br><span class=\"line\">        paint.setTextSize(fontSizePx);   <span class=\"comment\">//è®¾å®šå­—ä½“å¤§å°, spè½¬æ¢ä¸ºpx</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> paint;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2018/11/12/CenterVerticalTextSpan/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2018/11/12/CenterVerticalTextSpan/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["TextView","Span"]},{"title":"TextViewå‚ç›´æ–¹å‘ä½ç½®Span","url":"http://yoursite.com/2018/08/30/TextViewå‚ç›´æ–¹å‘ä½ç½®Span/","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">VerticalAlignmentSpan</span> <span class=\"keyword\">extends</span> <span class=\"title\">MetricAffectingSpan</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">double</span> ratio = <span class=\"number\">0.5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">VerticalAlignmentSpan</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">VerticalAlignmentSpan</span><span class=\"params\">(<span class=\"keyword\">double</span> ratio)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.ratio = ratio;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateDrawState</span><span class=\"params\">(TextPaint paint)</span> </span>&#123;</span><br><span class=\"line\">        paint.baselineShift += (<span class=\"keyword\">int</span>) (paint.ascent() * ratio);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateMeasureState</span><span class=\"params\">(TextPaint paint)</span> </span>&#123;</span><br><span class=\"line\">        paint.baselineShift += (<span class=\"keyword\">int</span>) (paint.ascent() * ratio);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2018/08/30/TextViewå‚ç›´æ–¹å‘ä½ç½®Span/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2018/08/30/TextViewå‚ç›´æ–¹å‘ä½ç½®Span/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["TextView","Span"]},{"title":"react-nativeå¸¸ç”¨å‘½ä»¤","url":"http://yoursite.com/2018/03/22/react-nativeå¸¸ç”¨å‘½ä»¤/","content":"<ul>\n<li>è®¾å®šæ‰‹æœºç«¯å£å·ä¸react nativeæœåŠ¡è¿æ¥ï¼š<code>adb reverse tcp:8081 tcp:8081</code></li>\n<li>æ‰“åŒ…js bundleï¼ˆè·¯å¾„è‡ªå·±æ›¿æ¢ï¼‰:<code>react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/com/your-company-name/app-package-name/src/main/assets/index.android.bundle --assets-dest android/com/your-company-name/app-package-name/src/main/res/</code><pre><code>ï¼ˆ1ï¼‰--platformï¼šå¹³å°&lt;br&gt;\nï¼ˆ2ï¼‰ --devï¼šå¼€å‘æ¨¡å¼&lt;br&gt;\nï¼ˆ3ï¼‰ --entry-fileï¼šæ¡ç›®æ–‡ä»¶&lt;br&gt;\nï¼ˆ4ï¼‰--bundle-outputï¼šbundleæ–‡ä»¶ç”Ÿæˆçš„ç›®å½•&lt;br&gt;\nï¼ˆ5ï¼‰--assets-destï¼šèµ„æºæ–‡ä»¶ç”Ÿæˆçš„ç›®å½•&lt;br&gt;\n</code></pre></li>\n<li>æ‰“åŒ…js bundleï¼ˆå·²æœ‰é¡¹ç›®é›†æˆrn,è·¯å¾„è‡ªå·±æ›¿æ¢ï¼‰ï¼š<code>react-native bundle --platform android --dev false --entry-file index.js --bundle-output ../app/src/main/assets/index.android.bundle --assets-dest ../app/src/main/res</code></li>\n<li>å¯åŠ¨react-nativeæœåŠ¡ï¼š<code>npm start</code></li>\n<li>ç”Ÿæˆpackage.jsonï¼š<code>npm init</code></li>\n<li>å®‰è£…node modulesï¼š<code>npm install</code></li>\n<li>æŸ¥çœ‹å½“å‰reactNativeç‰ˆæœ¬ï¼š<code>react-native --version</code>                                  </li>\n<li>æ›´æ–°å…¨å±€çš„reactNativeåˆ°æœ€æ–°ç‰ˆæœ¬ï¼š<code>sudo npm update -g react-native-cli</code>         </li>\n<li>æŸ¥çœ‹æœåŠ¡å™¨ç«¯çš„reactNativeçš„å„ç‰ˆæœ¬ä¿¡æ¯ï¼š<code>npm info react-native</code>        </li>\n<li>æ ¹æ®package.jsoné…ç½®çš„RNç‰ˆæœ¬,æ›´æ–°RNç¯å¢ƒä»£ç ï¼š<code>react-native upgrade</code>                     </li>\n<li>è¿è¡ŒAndroidå·¥ç¨‹ï¼š<code>react-native run-android</code></li>\n<li>è¿è¡ŒIOSå·¥ç¨‹ï¼š<code>react-native run-ios</code></li>\n<li>åˆå§‹åŒ–ä¸€ä¸ªå·¥ç¨‹ã€ä¸‹è½½React Nativeçš„æ‰€æœ‰æºä»£ç å’Œä¾èµ–åŒ…ï¼š<code>react-native init å·¥ç¨‹å</code>                 </li>\n<li>é¡¹ç›®é™çº§æˆ–å‡çº§åˆ°æŒ‡å®šç‰ˆæœ¬,è®°å¾—react-native upgradeæ›´æ–°ä¸€ä¸‹é¡¹ç›®ä¾èµ–ç­‰ï¼š<code>npm install --save react-native@0.18</code>          </li>\n<li>å®‰è£…æŸä¸ªlibåˆ°é¡¹ç›®ä¸­ï¼š<code>npm install react-native-storage --save</code></li>\n</ul>\n<hr>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2018/03/22/react-nativeå¸¸ç”¨å‘½ä»¤/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2018/03/22/react-nativeå¸¸ç”¨å‘½ä»¤/</a>    </p>\n</blockquote>\n","categories":["Android"],"tags":["Android","react-native"]},{"title":"Androidä¸­çš„è·¯å¾„è®°å½•","url":"http://yoursite.com/2018/02/02/Androidä¸­çš„è·¯å¾„è®°å½•/","content":"<p><code>Environment.getDataDirectory().getPath()=/data</code><br><code>Environment.getDownloadCacheDirectory().getPath()=/cache</code><br><code>Environment.getExternalStorageDirectory()=/storage/emulated/0</code><br><code>Environment.getRootDirectory().getPath()=/system</code><br><br>//è­¦æŠ¥çš„é“ƒå£°<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_ALARMS).getPath()=/storage/emulated/0/Alarms</code><br><br>//ç›¸æœºæ‹æ‘„çš„å›¾ç‰‡å’Œè§†é¢‘ä¿å­˜çš„ä½ç½®<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getPath()=/storage/emulated/0/DCIM</code><br><br>//ä¸‹è½½æ–‡ä»¶ä¿å­˜çš„ä½ç½®<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).getPath()=/storage/emulated/0/Download</code><br><br>//ç”µå½±ä¿å­˜çš„ä½ç½®<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES).getPath()=/storage/emulated/0/Movies</code><br><br>//éŸ³ä¹ä¿å­˜çš„ä½ç½®<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).getPath()=/storage/emulated/0/Music</code><br><br>//é€šçŸ¥éŸ³ä¿å­˜çš„ä½ç½®<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_NOTIFICATIONS).getPath()=/storage/emulated/0/Notifications</code><br><br>//ä¸‹è½½çš„å›¾ç‰‡ä¿å­˜çš„ä½ç½®<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).getPath()=/storage/emulated/0/Pictures</code><br><br>//ç”¨äºä¿å­˜podcastï¼ˆåšå®¢ï¼‰çš„éŸ³é¢‘æ–‡ä»¶<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PODCASTS).getPath()=/storage/emulated/0/Podcasts</code><br><br>//ä¿å­˜é“ƒå£°çš„ä½ç½®<br><code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_RINGTONES).getPath()=/storage/emulated/0/Ringtones</code><br><code>context.getCacheDir().getPath()=/data/data/åŒ…å/cache</code><br><code>context.getFilesDir().getPath()=/data/data/åŒ…å/files</code><br><code>context.getObbDir().getPath()=/storage/emulated/0/Android/obb/åŒ…å</code><br><code>context.getExternalCacheDir().getPath()=/storage/emulated/0/Android/data/åŒ…å/cache</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_ALARMS).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Alarms</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_DCIM).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/DCIM</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Download</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_MOVIES).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Movies</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_MUSIC).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Music</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_NOTIFICATIONS).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Notifications</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_PICTURES).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Pictures</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_PODCASTS).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Podcasts</code><br><code>context.getExternalFilesDir(Environment.DIRECTORY_RINGTONES).getPath()=/storage/emulated/0/Android/data/åŒ…å/files/Ringtones</code><br><code>context.getDatabasePath(&quot;XXX&quot;).getPath()=/data/data/åŒ…å/databases/XXX</code><br><code>context.getPackageCodePath()=/data/app/åŒ…å-2/base.apk</code><br><code>context.getPackageResourcePath()=/data/app/åŒ…å-2/base.apk</code></p>\n<hr>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2018/02/02/Androidä¸­çš„è·¯å¾„è®°å½•/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2018/02/02/Androidä¸­çš„è·¯å¾„è®°å½•/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["Android","Environment","Path"]},{"title":"ç¼–è¯‘libjpeg-turbo","url":"http://yoursite.com/2018/01/30/ç¼–è¯‘libjpeg-turbo/","content":"<h3 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h3><p>Androidä½¿ç”¨javaè¯­è¨€å¼€å‘ï¼Œè™½ç„¶javaè¶Šæ¥è¶Šå¥½ï¼Œä½†æ˜¯æ¶‰åŠåˆ°æ€§èƒ½æ–¹é¢ä¾ç„¶éƒ½æ˜¯æ™®éçš„C/C++ã€‚æœ¬æ¬¡æˆ‘ä»¬è¯´è¯´Androidä¸­å›¾ç‰‡å‹ç¼©ï¼Œå…³äºAndroidä¸­çš„å›¾ç‰‡å‹ç¼©ä½¿ç”¨åœºæ™¯å¤ªå¤šäº†ï¼Œæœ€ç®€å•çš„ä»ç›¸å†Œé€‰æ‹©ä¸€å¼ å›¾ç‰‡æ˜¾ç¤ºåˆ°å±å¹•ï¼Œè‚¯å®šè¦ç»è¿‡å‹ç¼©ï¼Œå‹ç¼©æ–¹å¼æœ‰å¤šç§ï¼Œjavaå±‚å°±æœ‰è´¨é‡å‹ç¼©ï¼Œå°ºå¯¸å‹ç¼©ï¼Œé‡‡æ ·å‹ç¼©ï¼ŒMtrixå‹ç¼©ç­‰ã€‚ä¸€å®šç¨‹åº¦ä¸Šéƒ½èƒ½æ»¡è¶³éœ€æ±‚ã€‚è¿½æ±‚æè‡´æ€§èƒ½çš„é‚£å°±è¦è€ƒè™‘Cå±‚çš„å‹ç¼©äº†ï¼Œ<code>LibJpeg</code>æ˜¯å›¾ç‰‡å¤„ç†æ–¹é¢å¾ˆå‡ºåçš„åº“ï¼Œä¹Ÿè¡ç”Ÿäº†<code>LibJpegTurbo</code>åº“ï¼Œç”¨äºAndroidå¹³å°ã€‚ç½‘ä¸Šæœç´¢åŸºæœ¬ä¸Šéƒ½èƒ½æœåˆ°ç›¸å…³çš„ç¼–è¯‘å¥½çš„soæ–‡ä»¶ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å·®ä¸å¤šçš„æ–‡ç« ï¼Œsoæ–‡ä»¶åªæœ‰<code>armeabi</code>,<code>armeabi-v7a</code>ä¸¤ä¸ªæ¶æ„ï¼Œæƒ³æ‰¾x86ç‰ˆæœ¬çš„ï¼Œåœ°ç¿»è¿‡æ¥éƒ½æ²¡æœ‰æ‰¾åˆ°ã€‚å’‹åŠï¼Œè‡ªå·±ç¼–å‘—ã€‚ã€‚</p>\n<h3 id=\"æºç \"><a href=\"#æºç \" class=\"headerlink\" title=\"æºç \"></a>æºç </h3><p><a href=\"https://libjpeg-turbo.org/\" target=\"_blank\" rel=\"noopener\">https://libjpeg-turbo.org/</a></p>\n<h3 id=\"ç¼–è¯‘ç¯å¢ƒæ­å»º\"><a href=\"#ç¼–è¯‘ç¯å¢ƒæ­å»º\" class=\"headerlink\" title=\"ç¼–è¯‘ç¯å¢ƒæ­å»º\"></a>ç¼–è¯‘ç¯å¢ƒæ­å»º</h3><h4 id=\"ç³»ç»Ÿå¹³å°\"><a href=\"#ç³»ç»Ÿå¹³å°\" class=\"headerlink\" title=\"ç³»ç»Ÿå¹³å°\"></a>ç³»ç»Ÿå¹³å°</h4><p><code>Linux</code><br>ä¸æ»¡è¶³æ¡ä»¶çš„å®‰è£…VMWareè™šæ‹Ÿæœºï¼Œæœ¬äººä¹Ÿæ˜¯å®‰è£…è™šæ‹Ÿæœºæ¥æ­å»ºå¹³å°ï¼Œå®‰è£…ä¹Œç­å›¾ç³»ç»Ÿå³å¯</p>\n<p><img src=\"https://github.com/robinxdroid/BlogRes/blob/master/images/2018-1-30/linux-ubuntu-sys-info.png?raw=true\" alt=\"\"></p>\n<h4 id=\"ç¼–è¯‘å‡†å¤‡\"><a href=\"#ç¼–è¯‘å‡†å¤‡\" class=\"headerlink\" title=\"ç¼–è¯‘å‡†å¤‡\"></a>ç¼–è¯‘å‡†å¤‡</h4><h5 id=\"NDK\"><a href=\"#NDK\" class=\"headerlink\" title=\"NDK\"></a>NDK</h5><p>ç¼–è¯‘soæ–‡ä»¶è‡ªç„¶å°‘ä¸äº†NDKï¼Œä¸€å®šè¦Linuxå¹³å°çš„NDKï¼Œä¸‹è½½åœ°å€<a href=\"https://dl.google.com/android/repository/android-ndk-r15c-linux-x86_64.zip?utm_source=androiddevtools&amp;utm_medium=website\" target=\"_blank\" rel=\"noopener\">android-ndk-r15c-linux-x86_64.zip</a></p>\n<h5 id=\"å¿…è¦è½¯ä»¶\"><a href=\"#å¿…è¦è½¯ä»¶\" class=\"headerlink\" title=\"å¿…è¦è½¯ä»¶\"></a>å¿…è¦è½¯ä»¶</h5><ol>\n<li><a href=\"http://ftp.gnu.org/gnu/m4/\" target=\"_blank\" rel=\"noopener\">m4</a> (ä¸‹è½½æœ€æ–°çš„gzæ–‡ä»¶)</li>\n<li><a href=\"ftp://ftp.gnu.org/gnu/autoconf/\" target=\"_blank\" rel=\"noopener\">autoconf</a> (ä¸‹è½½æœ€æ–°çš„gzæ–‡ä»¶)</li>\n<li><a href=\"http://ftp.gnu.org/gnu/automake/\" target=\"_blank\" rel=\"noopener\">automake</a> (ä¸‹è½½æœ€æ–°çš„gzæ–‡ä»¶)</li>\n<li><a href=\"ftp://ftp.gnu.org/gnu/libtool/\" target=\"_blank\" rel=\"noopener\">libtool</a> (ä¸‹è½½æœ€æ–°çš„gzæ–‡ä»¶)</li>\n<li><a href=\"http://www.nasm.us/\" target=\"_blank\" rel=\"noopener\">nasm</a> (ä¸‹è½½æœ€æ–°çš„gzæ–‡ä»¶ï¼Œæ­¤åº“æ˜¯ç¼–è¯‘x86æ¶æ„soå¿…é¡»çš„)</li>\n</ol>\n<p>ç”±äºä¸ªåˆ«è½¯ä»¶ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œæœ€å¥½æŒ‰ç…§ä»¥ä¸Šé¡ºåºæ¥å®‰è£…</p>\n<p>ä¸‹è½½å¥½åï¼Œé€ä¸ªè¿›è¡Œå®‰è£…,</p>\n<blockquote>\n<p><code>tar -xzvf   *.gz      //è§£å‹</code><br><br><code>cd dir                //åˆ‡æ¢åˆ°è§£å‹ç›®å½•</code></p>\n</blockquote>\n<blockquote>\n<p><code>./configure</code><br><br><code>make</code><br><br><code>sudo make install      //æœ‰éœ€è¦çš„è¾“å…¥ç³»ç»Ÿç™»å½•è´¦æˆ·å¯†ç </code></p>\n</blockquote>\n<p>æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ¯”å¦‚automake,ç»ˆç«¯å®šä½åˆ°å®‰è£…ç›®å½•ï¼Œæ‰§è¡Œ</p>\n<blockquote>\n<p><code>automake --version</code></p>\n</blockquote>\n<p>æ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬è¡¨ç¤ºå®‰è£…æˆåŠŸ</p>\n<p>å®‰å…¨å…¨éƒ¨è½¯ä»¶å¦‚å›¾ï¼š</p>\n<p><img src=\"https://github.com/robinxdroid/BlogRes/blob/master/images/2018-1-30/libjpeg-need-soft.png?raw=true\" alt=\"\"></p>\n<h5 id=\"é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡\"><a href=\"#é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡\" class=\"headerlink\" title=\"é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡\"></a>é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡</h5><p>å°†ä¸Šé¢å®‰è£…çš„è½¯ä»¶é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­</p>\n<blockquote>\n<p>sudo gedit /etc/environment</p>\n</blockquote>\n<p>æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œåœ¨<code>PATH=&#39;â€¦â€¦&#39;</code>åé¢åŠ å…¥<code>&quot;:æˆ‘ä»¬å®‰è£…çš„è·¯å¾„&quot;</code>,æ³¨æ„è·¯å¾„å‰é¢æœ‰å†’å·<code>:</code></p>\n<p><img src=\"https://github.com/robinxdroid/BlogRes/blob/master/images/2018-1-30/libjpeg-linux-sys-env.png?raw=true\" alt=\"\"></p>\n<p>ç¼–è¾‘å®Œåï¼Œç‚¹å‡»saveä¿å­˜å¹¶å…³é—­ï¼Œç„¶åæ‰§è¡Œ<br><code>source /etc/environment</code><br>ä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆ</p>\n<h4 id=\"ç¼–è¯‘æµç¨‹\"><a href=\"#ç¼–è¯‘æµç¨‹\" class=\"headerlink\" title=\"ç¼–è¯‘æµç¨‹\"></a>ç¼–è¯‘æµç¨‹</h4><ul>\n<li><p>æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå­˜æ”¾libjpegæºç ï¼Œè¿™é‡Œæˆ‘ä»¬å–å<code>source</code></p>\n</li>\n<li><p>åœ¨<code>source</code>ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªç›®å½•ç”¨äºå­˜æ”¾ç¼–è¯‘æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬å–å<code>libjpeg</code></p>\n</li>\n<li><p>åœ¨<code>source</code>ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªç›®å½•ç”¨äºå­˜æ”¾ç¼–è¯‘æˆåŠŸåç”Ÿæˆçš„soæ–‡ä»¶ç­‰ï¼Œè¿™é‡Œæˆ‘ä»¬å–å<code>dist</code></p>\n</li>\n<li><p>ç¼–å†™ç¼–è¯‘è„šæœ¬æ–‡ä»¶ï¼š</p>\n</li>\n</ul>\n<hr>\n<p><code>armeabi_v7a.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd libjpeg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">NDK_PATH=/home/robin/Android/android-ndk-r15c</span><br><span class=\"line\"></span><br><span class=\"line\">BUILD_PLATFORM=linux-x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN_VERSION=4.9</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_VERSION=21</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">HOST=arm-linux-androideabi</span><br><span class=\"line\"></span><br><span class=\"line\">SYSROOT=$&#123;NDK_PATH&#125;/platforms/android-$&#123;ANDROID_VERSION&#125;/arch-arm</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_CFLAGS=&quot;-march=armv7-a -mfloat-abi=softfp -fprefetch-loop-arrays -mfpu=neon -mthumb -D__ANDROID__ -D__ARM_ARCH_7__ \\</span><br><span class=\"line\"></span><br><span class=\"line\">  --sysroot=$&#123;SYSROOT&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN=$&#123;NDK_PATH&#125;/toolchains/$&#123;HOST&#125;-$&#123;TOOLCHAIN_VERSION&#125;/prebuilt/$&#123;BUILD_PLATFORM&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export CPP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-cpp</span><br><span class=\"line\"></span><br><span class=\"line\">export AR=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ar</span><br><span class=\"line\"></span><br><span class=\"line\">export NM=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-nm</span><br><span class=\"line\"></span><br><span class=\"line\">export CC=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-gcc</span><br><span class=\"line\"></span><br><span class=\"line\">export LD=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ld</span><br><span class=\"line\"></span><br><span class=\"line\">export RANLIB=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ranlib</span><br><span class=\"line\"></span><br><span class=\"line\">export OBJDUMP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-objdump</span><br><span class=\"line\"></span><br><span class=\"line\">export STRIP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-strip</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">sh ../libjpeg-turbo-master/configure --host=$&#123;HOST&#125; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -O3 -fPIE&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CPPFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125;&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   LDFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -pie&quot; --with-simd $&#123;1+&quot;$@&quot;&#125; --with-jpeg8 \\</span><br><span class=\"line\"></span><br><span class=\"line\">   --prefix=/home/robin/source/dist/libjpeg-turbo/armeabi-v7a/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<hr>\n<p><code>arm64_v8a.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd libjpeg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">NDK_PATH=/home/robin/Android/android-ndk-r15c</span><br><span class=\"line\"></span><br><span class=\"line\">BUILD_PLATFORM=linux-x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN_VERSION=4.9</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_VERSION=21</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">HOST=aarch64-linux-android</span><br><span class=\"line\"></span><br><span class=\"line\">SYSROOT=$&#123;NDK_PATH&#125;/platforms/android-$&#123;ANDROID_VERSION&#125;/arch-arm64</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_CFLAGS=&quot;--sysroot=$&#123;SYSROOT&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN=$&#123;NDK_PATH&#125;/toolchains/$&#123;HOST&#125;-$&#123;TOOLCHAIN_VERSION&#125;/prebuilt/$&#123;BUILD_PLATFORM&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export CPP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-cpp</span><br><span class=\"line\"></span><br><span class=\"line\">export AR=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ar</span><br><span class=\"line\"></span><br><span class=\"line\">export NM=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-nm</span><br><span class=\"line\"></span><br><span class=\"line\">export CC=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-gcc</span><br><span class=\"line\"></span><br><span class=\"line\">export LD=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ld</span><br><span class=\"line\"></span><br><span class=\"line\">export RANLIB=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ranlib</span><br><span class=\"line\"></span><br><span class=\"line\">export OBJDUMP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-objdump</span><br><span class=\"line\"></span><br><span class=\"line\">export STRIP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-strip</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">sh ../libjpeg-turbo-master/configure --host=$&#123;HOST&#125; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -O3 -fPIE&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CPPFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125;&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   LDFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -pie&quot; --with-simd $&#123;1+&quot;$@&quot;&#125; --with-jpeg8 \\</span><br><span class=\"line\"></span><br><span class=\"line\">   --prefix=/home/robin/source/dist/libjpeg-turbo/arm64-v8a/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<hr>\n<p><code>x86.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd libjpeg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">NDK_PATH=/home/robin/Android/android-ndk-r15c</span><br><span class=\"line\"></span><br><span class=\"line\">BUILD_PLATFORM=linux-x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN_VERSION=4.9</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_VERSION=21</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">HOST=i686-linux-android</span><br><span class=\"line\"></span><br><span class=\"line\">SYSROOT=$&#123;NDK_PATH&#125;/platforms/android-$&#123;ANDROID_VERSION&#125;/arch-x86</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_CFLAGS=&quot;--sysroot=$&#123;SYSROOT&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN=$&#123;NDK_PATH&#125;/toolchains/x86-$&#123;TOOLCHAIN_VERSION&#125;/prebuilt/$&#123;BUILD_PLATFORM&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export CPP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-cpp</span><br><span class=\"line\"></span><br><span class=\"line\">export AR=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ar</span><br><span class=\"line\"></span><br><span class=\"line\">export NM=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-nm</span><br><span class=\"line\"></span><br><span class=\"line\">export CC=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-gcc</span><br><span class=\"line\"></span><br><span class=\"line\">export LD=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ld</span><br><span class=\"line\"></span><br><span class=\"line\">export RANLIB=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ranlib</span><br><span class=\"line\"></span><br><span class=\"line\">export OBJDUMP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-objdump</span><br><span class=\"line\"></span><br><span class=\"line\">export STRIP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-strip</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">sh ../libjpeg-turbo-master/configure --host=$&#123;HOST&#125; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -O3 -fPIE&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CPPFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125;&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   LDFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -pie&quot; --with-simd $&#123;1+&quot;$@&quot;&#125; --with-jpeg8 \\</span><br><span class=\"line\"></span><br><span class=\"line\">   --prefix=/home/robin/source/dist/libjpeg-turbo/x86/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<hr>\n<p><code>x86_64.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd libjpeg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">NDK_PATH=/home/robin/Android/android-ndk-r15c</span><br><span class=\"line\"></span><br><span class=\"line\">BUILD_PLATFORM=linux-x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN_VERSION=4.9</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_VERSION=21</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">HOST=x86_64-linux-android</span><br><span class=\"line\"></span><br><span class=\"line\">SYSROOT=$&#123;NDK_PATH&#125;/platforms/android-$&#123;ANDROID_VERSION&#125;/arch-x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">ANDROID_CFLAGS=&quot;--sysroot=$&#123;SYSROOT&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">TOOLCHAIN=$&#123;NDK_PATH&#125;/toolchains/x86_64-$&#123;TOOLCHAIN_VERSION&#125;/prebuilt/$&#123;BUILD_PLATFORM&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export CPP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-cpp</span><br><span class=\"line\"></span><br><span class=\"line\">export AR=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ar</span><br><span class=\"line\"></span><br><span class=\"line\">export NM=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-nm</span><br><span class=\"line\"></span><br><span class=\"line\">export CC=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-gcc</span><br><span class=\"line\"></span><br><span class=\"line\">export LD=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ld</span><br><span class=\"line\"></span><br><span class=\"line\">export RANLIB=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-ranlib</span><br><span class=\"line\"></span><br><span class=\"line\">export OBJDUMP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-objdump</span><br><span class=\"line\"></span><br><span class=\"line\">export STRIP=$&#123;TOOLCHAIN&#125;/bin/$&#123;HOST&#125;-strip</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">sh ../libjpeg-turbo-master/configure --host=$&#123;HOST&#125; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -O3 -fPIE&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   CPPFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125;&quot; \\</span><br><span class=\"line\"></span><br><span class=\"line\">   LDFLAGS=&quot;$&#123;ANDROID_CFLAGS&#125; -pie&quot; --with-simd $&#123;1+&quot;$@&quot;&#125; --with-jpeg8 \\</span><br><span class=\"line\"></span><br><span class=\"line\">   --prefix=/home/robin/source/dist/libjpeg-turbo/x86-64/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>ä»¥ä¸Šè„šæœ¬éœ€è¦æ ¹æ®ä½ çš„æºç ç›®å½•ï¼ŒNDKç›®å½•ï¼Œä¿®æ”¹ç›¸åº”çš„è·¯å¾„,â€“prefixæŒ‡å®šç¼–è¯‘çš„å®‰è£…ç›®å½•ï¼Œå°±æ˜¯æœ€ç»ˆçš„åº“å­˜æ”¾ä½ç½®</p>\n</li>\n<li><p>åœ¨ç»ˆç«¯é‡Œæ‰§è¡Œä»¥ä¸Šè„šæœ¬<code>sh ./armeabi-v7a.sh</code></p>\n</li>\n<li><p>ç¼–è¯‘ä¸€ç§æ¶æ„åï¼Œå¯ä»¥é€šè¿‡<code>make distclean</code>æ¸…é™¤ä¸Šä¸€æ¬¡ç¼–è¯‘ç»“æœï¼Œå¦‚æœå‡ºé”™ï¼Œæ‰‹åŠ¨åˆ é™¤libjpegç›®å½•ä¸‹æ–‡ä»¶å³å¯</p>\n</li>\n<li><p>å¦‚æœshæ–‡ä»¶æ‰§è¡Œä¸äº†ï¼Œä¾‹å¦‚æç¤ºcdå‘½ä»¤é”™è¯¯ï¼Œè¿™æ˜¯ç”±äºæ–‡ä»¶ä¸­å­˜åœ¨çš„ä¸€äº›ç©ºæ ¼ç¼–ç ï¼Œé€ æˆçš„ï¼Œéœ€è¦ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œè½¬ç ä¸‹ï¼Œç”Ÿæˆæ–°æ–‡ä»¶<br><code>tr -d &#39;\\r&#39; &lt; start.sh  &gt; fixed.sh</code>,ç„¶åæ‰§è¡Œæ–°çš„shæ–‡ä»¶å³å¯</p>\n</li>\n</ul>\n<p><img src=\"https://github.com/robinxdroid/BlogRes/blob/master/images/2018-1-30/libjpeg-compile.png?raw=true\" alt=\"\"></p>\n<p>æˆ‘ä»¬çš„ç¼–è¯‘æˆæœ</p>\n<p><img src=\"https://github.com/robinxdroid/BlogRes/blob/master/images/2018-1-30/libjpeg-compile-finish.png?raw=true\" alt=\"\"></p>\n<hr>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2018/01/30/ç¼–è¯‘libjpeg-turbo/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2018/01/30/ç¼–è¯‘libjpeg-turbo/</a></p>\n</blockquote>\n","categories":["Android","NDK","Linux"],"tags":["NDK","Android","å‹ç¼©","libjpeg"]},{"title":"ReactNativeç¯å¢ƒæ­å»º","url":"http://yoursite.com/2018/01/19/ReactNativeç¯å¢ƒæ­å»º/","content":"<p>ä¸ºä»€ä¹ˆå†™è¿™ç¯‡ï¼Œç½‘ä¸Šçš„RNç¯å¢ƒæ­å»ºæ•™ç¨‹å¾ˆå¤šï¼Œä½†æ˜¯åŸºæœ¬ä¸Šéƒ½æ˜¯copyæ¥copyå»ï¼Œåœ¨æ­å»ºè¿‡ç¨‹ä¸­è¿˜æ˜¯æœ‰ä¸å°‘å‘ï¼Œè™½ç„¶ä¸æ˜¯ç‰¹åˆ«å¤§çš„å‘ï¼Œä½†æ˜¯å¯¹äºåˆå­¦è€…æ¯ä¸ªéƒ½è¦å»è°·æ­Œæ‰¾ç­”æ¡ˆï¼Œå¾ˆè´¹æ—¶é—´ã€‚åœ¨æ­¤è®°å½•æ•´ä¸ªç¯å¢ƒæ­å»ºè¿‡ç¨‹ï¼Œä»¥åŠé‡åˆ°çš„é—®é¢˜ï¼Œä¿—ç§°â€œå‘â€</p>\n<h2 id=\"å®‰è£…æµç¨‹\"><a href=\"#å®‰è£…æµç¨‹\" class=\"headerlink\" title=\"å®‰è£…æµç¨‹\"></a>å®‰è£…æµç¨‹</h2><p>æœ¬æ¬¡å®‰è£…ç¯å¢ƒåŸºäº<code>Windows10</code>,å®‰è£…<code>ReactNative</code>ç‰ˆæœ¬åŸºäº<code>0.51</code></p>\n<p>ps:è®¿é—®å›°éš¾çš„ï¼Œè¯·è‡ªå¤‡æ¢¯å­</p>\n<h3 id=\"å¿…é¡»è½¯ä»¶\"><a href=\"#å¿…é¡»è½¯ä»¶\" class=\"headerlink\" title=\"å¿…é¡»è½¯ä»¶\"></a>å¿…é¡»è½¯ä»¶</h3><h4 id=\"1-Chocolatey\"><a href=\"#1-Chocolatey\" class=\"headerlink\" title=\"1.Chocolatey\"></a>1.Chocolatey</h4><p><a href=\"https://chocolatey.org/\" target=\"_blank\" rel=\"noopener\">Chocolatey</a>æ˜¯ä¸€ä¸ªWindowsä¸Šçš„åŒ…ç®¡ç†å™¨ï¼Œç±»ä¼¼äºlinuxä¸Šçš„yumå’Œ apt-getã€‚ ä½ å¯ä»¥åœ¨å…¶<a href=\"https://chocolatey.org/\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹ç½‘ç«™</a>ä¸ŠæŸ¥çœ‹å…·ä½“çš„ä½¿ç”¨è¯´æ˜ã€‚ä¸€èˆ¬çš„å®‰è£…æ­¥éª¤åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p>\n<blockquote>\n<p><code>@powershell -NoProfile -ExecutionPolicy Bypass -Command &quot;iex ((new-object net.webclient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))&quot; &amp;&amp; SET PATH=%PATH%;%ALLUSERSPROFILE%\\chocolatey\\bin</code></p>\n</blockquote>\n<p><code>win+x</code>æ‰“å¼€èœå•ï¼Œé€‰æ‹©â€œå‘½ä»¤æç¤ºç¬¦ï¼ˆç®¡ç†å‘˜ï¼‰â€ï¼Œæ‰“å¼€ç®¡ç†å‘˜dosçª—å£ï¼Œå¤åˆ¶ä»¥ä¸Šå‘½ä»¤ï¼Œå›è½¦ï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚ä½ å¯ä»¥è¾“å…¥<code>choco -v</code>ï¼Œæ­£ç¡®è¾“å‡ºç‰ˆæœ¬å·çš„è¯ï¼Œå®‰è£…æ­£å¸¸</p>\n<h4 id=\"2-Python-2\"><a href=\"#2-Python-2\" class=\"headerlink\" title=\"2.Python 2\"></a>2.Python 2</h4><p>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œä½¿ç”¨Chocolateyæ¥å®‰è£…Python 2.ï¼ˆæ³¨æ„ç›®å‰ä¸æ”¯æŒPython 3ç‰ˆæœ¬ã€‚ï¼‰</p>\n<blockquote>\n<p><code>choco install python2</code></p>\n</blockquote>\n<p>å‘½ä»¤çª—å£ä¸­è¾“å…¥ä»¥ä¸Šå‘½ä»¤ï¼Œç­‰å¾…ä¸‹è½½å®‰è£…</p>\n<h4 id=\"3-Node\"><a href=\"#3-Node\" class=\"headerlink\" title=\"3.Node\"></a>3.Node</h4><p>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œä½¿ç”¨Chocolateyæ¥å®‰è£…NodeJSã€‚</p>\n<blockquote>\n<p><code>choco install nodejs.install</code></p>\n</blockquote>\n<p>å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸Šå‘½ä»¤ï¼Œç­‰å¾…ä¸‹è½½å®‰è£…</p>\n<p>å®‰è£…å®Œnodeåå»ºè®®è®¾ç½®npmé•œåƒä»¥åŠ é€Ÿåé¢çš„è¿‡ç¨‹ï¼ˆæˆ–ä½¿ç”¨ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼‰ã€‚æ³¨æ„ï¼šä¸è¦ä½¿ç”¨cnpmï¼cnpmå®‰è£…çš„æ¨¡å—è·¯å¾„æ¯”è¾ƒå¥‡æ€ªï¼Œpackagerä¸èƒ½æ­£å¸¸è¯†åˆ«ï¼</p>\n<blockquote>\n<p><code>npm config set registry https://registry.npm.taobao.org --global</code><br><code>npm config set disturl https://npm.taobao.org/dist --global</code></p>\n</blockquote>\n<p>å‘½ä»¤è¡Œç»§ç»­è¾“å…¥ä»¥ä¸Šå‘½ä»¤ã€‚å¦‚æœæ— æ³•è¯†åˆ«npmå‘½ä»¤ï¼Œå…³é—­dosçª—å£ï¼Œé‡æ–°æ‰“å¼€æ–°çš„dosçª—å£ï¼Œè¾“å…¥ä»¥ä¸Šå‘½ä»¤ï¼Œå› ä¸ºç¯å¢ƒå˜é‡è‡ªåŠ¨é…ç½®ä»¥åï¼Œæ—§çš„dosçª—å£æ— æ³•è¯†åˆ«</p>\n<h4 id=\"4-Yarnã€React-Nativeçš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆreact-native-cliï¼‰\"><a href=\"#4-Yarnã€React-Nativeçš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆreact-native-cliï¼‰\" class=\"headerlink\" title=\"4.Yarnã€React Nativeçš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆreact-native-cliï¼‰\"></a>4.Yarnã€React Nativeçš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆreact-native-cliï¼‰</h4><p>Yarnæ˜¯Facebookæä¾›çš„æ›¿ä»£npmçš„å·¥å…·ï¼Œå¯ä»¥åŠ é€Ÿnodeæ¨¡å—çš„ä¸‹è½½ã€‚React Nativeçš„å‘½ä»¤è¡Œå·¥å…·ç”¨äºæ‰§è¡Œåˆ›å»ºã€åˆå§‹åŒ–ã€æ›´æ–°é¡¹ç›®ã€è¿è¡Œæ‰“åŒ…æœåŠ¡ï¼ˆpackagerï¼‰ç­‰ä»»åŠ¡ã€‚</p>\n<blockquote>\n<p><code>npm install -g yarn react-native-cli</code></p>\n</blockquote>\n<p>å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸Šå‘½ä»¤ï¼Œç­‰å¾…ä¸‹è½½å®‰è£…</p>\n<p>å®‰è£…å®ŒyarnååŒç†ä¹Ÿè¦è®¾ç½®é•œåƒæºï¼š</p>\n<blockquote>\n<p><code>yarn config set registry https://registry.npm.taobao.org --global</code><br><code>yarn config set disturl https://npm.taobao.org/dist --global</code></p>\n</blockquote>\n<p>å‘½ä»¤è¡Œç»§ç»­è¾“å…¥ä»¥ä¸Šå‘½ä»¤</p>\n<h4 id=\"5-Android-Studio\"><a href=\"#5-Android-Studio\" class=\"headerlink\" title=\"5.Android Studio\"></a>5.Android Studio</h4><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œè¿™ä¸ªæä¸å®šï¼Œä¹Ÿåˆ«æ•´ä»€ä¹ˆRNäº†ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šReact Nativeç›®å‰éœ€è¦Android Studio2.0æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚JDKç”¨1.8å°±å¥½</p>\n<p>é…ç½®ä¸‹Androidçš„ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œæˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯Androidç¯å¢ƒå˜é‡è¢«è‡ªåŠ¨ç§»é™¤äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºå®‰è£…ä»¥ä¸Šè½¯ä»¶çš„æ—¶å€™å½±å“çš„ï¼Œå› ä¸ºæˆ‘ä¹‹å‰è®¾ç½®è¿‡äº†Androidç¯å¢ƒå˜é‡ï¼Œåé¢è¿è¡Œçš„æŠ¥é”™ï¼Œæ‰å‘ç°adbå‘½ä»¤éƒ½æ‰§è¡Œä¸äº†ï¼Œæ‰€ä»¥é‡æ–°æ£€æŸ¥è®¾ç½®ä¸‹Androidç¯å¢ƒå˜é‡ï¼Œè‡³äºæ€ä¹ˆè®¾ç½®ï¼Œè‡ªè¡Œæœç´¢</p>\n<h6 id=\"è‡³æ­¤ï¼Œç¯å¢ƒæ­å»ºåˆæ­¥å®Œæˆ\"><a href=\"#è‡³æ­¤ï¼Œç¯å¢ƒæ­å»ºåˆæ­¥å®Œæˆ\" class=\"headerlink\" title=\"è‡³æ­¤ï¼Œç¯å¢ƒæ­å»ºåˆæ­¥å®Œæˆ\"></a>è‡³æ­¤ï¼Œç¯å¢ƒæ­å»ºåˆæ­¥å®Œæˆ</h6><h2 id=\"æµ‹è¯•\"><a href=\"#æµ‹è¯•\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h2><p>è¿ä¸Šæ‰‹æœº<br>ä½¿ç”¨<code>adb devices</code>æŸ¥çœ‹æ‰‹æœºæ˜¯å¦è¿æ¥æ­£å¸¸</p>\n<p>å…³é—­æ‰ç®¡ç†å‘˜dosçª—å£ï¼Œå› ä¸ºå…¶å®šä½ç›®å½•ä¸º<code>Cï¼šWindows\\System32</code>ç›®å½•,ä¼šæœ‰ä¸€äº›æƒé™ç›¸å…³çš„è®¾ç½®ï¼Œä¸æ–¹ä¾¿æˆ‘ä»¬åœ¨æ­¤ç›®å½•æµ‹è¯•ï¼Œè¿è¡Œçš„æ—¶å€™ä¼š<code>build faild</code></p>\n<p>éšä¾¿æ‰¾ä¸ªç›˜ï¼Œæ–°å»ºä¸€ä¸ªworkspaceï¼Œæ‰“å¼€dosçª—å£ï¼Œè¿™é‡Œä½ ä¹Ÿå¯ä»¥ç”¨<code>git bash</code>å‘½ä»¤çª—å£ï¼Œå¦‚æœä½ å®‰è£…äº†gitçš„è¯ã€‚</p>\n<p>åˆå§‹åŒ–æµ‹è¯•é¡¹ç›®</p>\n<blockquote>\n<p><code>react-native init AwesomeProject</code></p>\n</blockquote>\n<p>è¿›å…¥é¡¹ç›®ç›®å½•</p>\n<blockquote>\n<p><code>cd AwesomeProject</code></p>\n</blockquote>\n<p>ç¼–è¯‘è¿è¡ŒAndroidé¡¹ç›®</p>\n<blockquote>\n<p><code>react-native run-android</code></p>\n</blockquote>\n<p>ç­‰å¾…ç¼–è¯‘è¿è¡Œï¼Œè¿è¡Œåˆ°æ‰‹æœºä¸Šåï¼Œå¦‚æœå‡ºç°çº¢å±ï¼Œå¹¶æ˜¾ç¤º<br><code>Unable to load script from assets index.android.bundle on windows</code></p>\n<p>è§£å†³æ–¹æ³•ï¼šæ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œè¿›å…¥<code>android/app/src/main</code>ç›®å½•ï¼Œæ–°å»ºä¸€ä¸ª<code>assets</code>ç›®å½•ï¼Œç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œå‘½ä»¤è¡Œè¾“å…¥</p>\n<blockquote>\n<p><code>react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res</code></p>\n</blockquote>\n<p>å®Œäº‹å†æ¬¡è¾“å…¥è¿è¡Œå‘½ä»¤ï¼Œç¼–è¯‘è¿è¡Œ</p>\n<blockquote>\n<p><code>react-native run-android</code></p>\n</blockquote>\n<p>æˆåŠŸéƒ¨ç½²åæ˜¾ç¤ºï¼š</p>\n<p><img src=\"https://github.com/robinxdroid/BlogRes/blob/master/images/2018-1-19/rn_test_success.png?raw=true\" alt=\"\"></p>\n<p>å†æµ‹è¯•ä¸‹æ›´æ–°ï¼Œå‘½ä»¤è¡Œå¯åŠ¨RNæœåŠ¡</p>\n<blockquote>\n<p><code>react-native start</code></p>\n</blockquote>\n<p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼Œæ‰¾åˆ°App.js,æ‰“å¼€ä¿®æ”¹ä¸‹ï¼Œä¿å­˜ã€‚ç„¶ååœ¨æ‰‹æœºä¸ŠæŒ‰èœå•é”®å‘¼å‡ºå¼¹çª—ï¼ˆä½ ä¹Ÿå¯ä»¥æ‘‡åŠ¨æ‰‹æœºå‘¼å‡ºï¼‰é€‰æ‹©ç¬¬ä¸€é¡¹<code>Reload</code>å°±ä¼šçœ‹åˆ°åˆšæ‰åšçš„ä¿®æ”¹</p>\n<hr>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2018/01/19/ReactNativeç¯å¢ƒæ­å»º/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2018/01/19/ReactNativeç¯å¢ƒæ­å»º/</a></p>\n</blockquote>\n","categories":["Android","ReactNative"],"tags":["ReactNative","ç¯å¢ƒ"]},{"title":"2017å¹´ç»ˆæ€»ç»“","url":"http://yoursite.com/2018/01/03/2017å¹´ç»ˆæ€»ç»“/","content":"<p>çœ¨çœ¼å°±æ˜¯ä¸€å¹´ï¼Œè¿90åæ‰€æœ‰äººéƒ½æˆå¹´äº†ã€‚</p>\n<h3 id=\"2017å¹´æ€»ç»“\"><a href=\"#2017å¹´æ€»ç»“\" class=\"headerlink\" title=\"2017å¹´æ€»ç»“\"></a>2017å¹´æ€»ç»“</h3><p>æ¯ä¸€å¹´éƒ½å¾ˆç‰¹åˆ«ï¼Œä»Šå¹´å°¤ä¸ºç‰¹æ®Šï¼Œå¿™äºæˆ¿å±‹è£…ä¿®ä»¥åŠäººç”Ÿå¤§äº‹ï¼Œè¿˜æœ‰å·¥ä½œï¼Œéƒ½æŒ¤åˆ°ä¸€èµ·äº†ã€‚å¹´åº•æ€»ç®—å¿™çš„å·®ä¸å¤šã€‚ç®—ç¨³å®šä¸‹æ¥ã€‚<br></p>\n<p>è£…ä¿®çƒ§é’±ï¼Œä¸­é—´ä¹Ÿè¢«äººå‘è¿‡ï¼Œä¹Ÿæ‰¯è¿‡çš®ï¼Œå¯¹ä¹ æƒ¯é»˜é»˜æ•²é”®ç›˜çš„æˆ‘æ¥è¯´ï¼Œå¤ªä¸ä¹ æƒ¯ã€‚</p>\n<p>äººç”Ÿå¤§äº‹è§£å†³äº†ï¼Œæ„Ÿè°¢å¥¹é™ªæˆ‘è¿™ä¹ˆä¹…ã€‚æ€»è¦è®¸ä¸€ä¸ªæœªæ¥ã€‚</p>\n<p>å·¥ä½œæ¢äº†ï¼Œç®—æ˜¯åƒä¸€å ‘é•¿ä¸€æ™ºæ˜‚ï¼Œå¥½äººå±…å¤šï¼Œåäººç»å¯¹ä¸å°‘ã€‚å¥‰åŠå¤§å®¶æ“¦äº®çœ¼ç›å•Šã€‚</p>\n<p>æŠ€æœ¯æœ‰å¢é•¿ï¼Œå­¦ä¼škotlinè¯­è¨€ï¼ŒåŠå­¦cï¼Œä¸ºä»€ä¹ˆåŠå‘¢ï¼Œå› ä¸ºç”Ÿæ´»ä¸Šçš„äº‹æƒ…ï¼Œåˆæ–­äº†ï¼Œ18å¹´å†ç»§ç»­å§ã€‚é™†é™†ç»­ç»­å†™äº†ä¸å°‘ä»£ç ç»„ä»¶åº“ï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ã€‚</p>\n<h3 id=\"2018å¹´è§„åˆ’\"><a href=\"#2018å¹´è§„åˆ’\" class=\"headerlink\" title=\"2018å¹´è§„åˆ’\"></a>2018å¹´è§„åˆ’</h3><p>äººé•¿å¤§äº†æ˜¯çœŸçš„çƒ¦æ¼å¤šå•Šï¼Œç‰¹åˆ«å¤šï¼Œæ–°çš„ä¸€å¹´</p>\n<ul>\n<li>Blogå¤šæ›´äº›æŠ€æœ¯åˆ†äº«</li>\n<li>è¯¥å­¦ä¹ çš„å¥½å¥½å­¦ä¹ </li>\n<li>è¯¥å·¥ä½œçš„å¥½å¥½å·¥ä½œ</li>\n<li>ä¸ªäººèµ„å†æå‡</li>\n<li>è§„åˆ’ä¸‹ä»¥å</li>\n</ul>\n<hr>\n","categories":["éšç¬”"],"tags":["2017","2018"]},{"title":"fexoä¸»é¢˜é›†æˆgitalkè¯„è®ºç»„ä»¶","url":"http://yoursite.com/2018/01/03/fexoä¸»é¢˜é›†æˆgitalkè¯„è®ºç»„ä»¶/","content":"<h3 id=\"å‰è¨€ï¼š\"><a href=\"#å‰è¨€ï¼š\" class=\"headerlink\" title=\"å‰è¨€ï¼š\"></a>å‰è¨€ï¼š</h3><p>å¤šè¯´è¯„è®ºç»„ä»¶å·²ç»ä¸‹æ¶ï¼Œç¢ç£¨äº†ä¸‹å‘ç°gitalkä¸é”™ï¼ŒåŸºäºgithubçš„issueã€‚æœç´¢çš„é›†æˆæ•™ç¨‹åŸºæœ¬ä¸Šéƒ½æ˜¯nextä¸»é¢˜é›†æˆï¼Œè°è®©è¿™æ¬¾ä¸»é¢˜ç”¨çš„äººå¤šå‘¢ã€‚æœ¬æ–‡ä¸ºé›†æˆfexoä¸»é¢˜é›†æˆgitalk</p>\n<h3 id=\"å‰è¨€ï¼šå¼€å§‹é›†æˆ\"><a href=\"#å‰è¨€ï¼šå¼€å§‹é›†æˆ\" class=\"headerlink\" title=\"å‰è¨€ï¼šå¼€å§‹é›†æˆ\"></a>å‰è¨€ï¼šå¼€å§‹é›†æˆ</h3><h4 id=\"step1\"><a href=\"#step1\" class=\"headerlink\" title=\"step1\"></a>step1</h4><p>githubåˆ›å»ºä¸€ä¸ªä»£ç ä»“åº“ï¼Œç”¨äºå­˜å‚¨è¯„è®ºæ•°æ®ï¼Œè¿™é‡Œå–å<code>BlogComments</code>,</p>\n<p>ç„¶å<code>ä¸ªäººç”¨æˆ·-&gt;setting-&gt;Developer settings-&gt;OAuth Apps</code></p>\n<ul>\n<li>Application name  å¡«å†™ä»“åº“åï¼Œè¿™é‡Œæ˜¯<code>BlogComments</code></li>\n<li>Homepage URL  ç½‘ç«™çš„åœ°å€</li>\n<li>Application description  æè¿°ï¼Œéšæ„ï¼Œå¯ä¸å¡«</li>\n<li>Authorization callback URL ç½‘ç«™çš„åœ°å€</li>\n</ul>\n<p>å¡«å¥½ä¹‹åï¼Œç‚¹å‡»Register applicationï¼Œå³å¯å¾—åˆ°<code>Client ID</code>ä¸<code>Client Secret</code>ã€‚æ”¾ç€ï¼Œåé¢æœ‰ç”¨</p>\n<h4 id=\"step2\"><a href=\"#step2\" class=\"headerlink\" title=\"step2\"></a>step2</h4><p>æ‰“å¼€Hexo\\themes\\fexo\\layout_partial\\component,åˆ›å»º<code>gitalk.ejs</code></p>\n<p>æ–‡ä»¶å†…å®¹ç›´æ¥å¤åˆ¶</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;% <span class=\"keyword\">if</span> (theme.gitalk_shortname)&#123; %&gt;</span><br><span class=\"line\">&lt;!-- Gitalkè¯„è®ºæ’ä»¶é€šç”¨ä»£ç  --&gt;</span><br><span class=\"line\">&lt;div id=\"git\"&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;link rel=<span class=\"string\">\"stylesheet\"</span> href=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css\"</span>&gt;</span><br><span class=\"line\">&lt;script src=\"https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js\"&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"keyword\">const</span> gitalk = <span class=\"keyword\">new</span> Gitalk(&#123;</span><br><span class=\"line\">  clientID: <span class=\"string\">'å¡«å…¥ç¬¬ä¸€æ­¥è·å–çš„clientID'</span>,</span><br><span class=\"line\">  clientSecret: <span class=\"string\">'å¡«å…¥ç¬¬ä¸€æ­¥è·å–çš„clientSecret'</span>,</span><br><span class=\"line\">  repo: <span class=\"string\">'ä»“åº“åç§°æœ¬æ–‡ä¸­ä¸ºBlogComments'</span>,</span><br><span class=\"line\">  owner: <span class=\"string\">'ä½ çš„ç”¨æˆ·å'</span>,</span><br><span class=\"line\">  admin: [<span class=\"string\">'ä½ çš„ç”¨æˆ·å'</span>],</span><br><span class=\"line\">  <span class=\"comment\">// facebook-like distraction free mode</span></span><br><span class=\"line\">  distractionFreeMode: <span class=\"keyword\">false</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">gitalk.render(<span class=\"string\">'git'</span>)</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;!-- Gitalkä»£ç ç»“æŸ --&gt;</span><br><span class=\"line\">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"step3\"><a href=\"#step3\" class=\"headerlink\" title=\"step3\"></a>step3</h4><p>æ‰“å¼€Hexo\\themes\\fexo\\layout_partial\\article.ejs,åœ¨æ–‡ä»¶åº•éƒ¨æ‰¾åˆ°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;% if (theme.duoshuo_shortname)&#123; %&gt;</span><br><span class=\"line\">   &lt;i class=&quot;icon-comment&quot;&gt;&lt;/i&gt; </span><br><span class=\"line\">   &lt;span class=&quot;ds-thread-count&quot; data-thread-key=&quot;&lt;%= page.layout %&gt;-&lt;%= page.slug %&gt;&quot;&gt;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt; æ¡è¯„è®º</span><br><span class=\"line\">  &lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>\n<p>åˆ é™¤å®ƒã€‚<br></p>\n<p>åœ¨<code>article</code>æ ‡ç­¾å†…æ·»åŠ <br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  &lt;% if (theme.gitalk_shortname &amp;&amp; page.comments &amp;&amp; theme.url)&#123; %&gt;</span><br><span class=\"line\">    &lt;%- partial(&apos;component/gitalk&apos;) %&gt;</span><br><span class=\"line\">&lt;% &#125; else &#123; %&gt;</span><br><span class=\"line\">    &lt;div class=&quot;git&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>\n<p>ä¿å­˜å³å¯</p>\n<p>å®Œæ•´æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;article id=&quot;&lt;%= post.layout %&gt;-&lt;%= post.slug %&gt;&quot; class=&quot;article article-type-&lt;%= post.layout %&gt;&quot; itemprop=&quot;blogPost&quot;&gt;</span><br><span class=\"line\">  &lt;header class=&quot;article-header&quot;&gt;</span><br><span class=\"line\">    &lt;h1 class=&quot;post-title&quot;&gt;&lt;%= post.title || &apos;(no title)&apos; %&gt;&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;div class=&quot;article-meta&quot;&gt;</span><br><span class=\"line\">      &lt;span&gt;</span><br><span class=\"line\">        &lt;i class=&quot;icon-calendar&quot;&gt;&lt;/i&gt;</span><br><span class=\"line\">        &lt;span&gt;&lt;%= date(post.date, &apos;YYYY.MM.DD&apos;) %&gt;&lt;/span&gt;</span><br><span class=\"line\">      &lt;/span&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;% if (config.author)&#123; %&gt;</span><br><span class=\"line\">        &lt;span class=&quot;article-author&quot;&gt;</span><br><span class=\"line\">          &lt;i class=&quot;icon-user&quot;&gt;&lt;/i&gt;</span><br><span class=\"line\">          &lt;span&gt;&lt;%= config.author %&gt;&lt;/span&gt;</span><br><span class=\"line\">        &lt;/span&gt;</span><br><span class=\"line\">      &lt;% &#125; %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;%- partial(&apos;component/category&apos;) %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;% if (theme.disqus_shortname &amp;&amp; theme.url &amp;&amp; page.comments)&#123; %&gt;</span><br><span class=\"line\">        &lt;span&gt;</span><br><span class=\"line\">          &lt;i class=&quot;icon-comment&quot;&gt;&lt;/i&gt;</span><br><span class=\"line\">          &lt;a href=&quot;&lt;%= theme.url + url_for(page.path) + &apos;#disqus_thread&apos; %&gt;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;/span&gt;</span><br><span class=\"line\">      &lt;% &#125; %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;% if (theme.busuanzi)&#123; %&gt;</span><br><span class=\"line\">      &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt; </span><br><span class=\"line\">        &lt;span id=&quot;busuanzi_container_page_pv&quot;&gt;</span><br><span class=\"line\">           &amp;nbspçƒ­åº¦ &lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;</span><br><span class=\"line\">           &lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt;â„ƒ</span><br><span class=\"line\">        &lt;/span&gt;</span><br><span class=\"line\">      &lt;% &#125; %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  &lt;/header&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;div class=&quot;article-content&quot;&gt;</span><br><span class=\"line\">    &lt;% if (post.excerpt &amp;&amp; index)&#123; %&gt;</span><br><span class=\"line\">      &lt;%- post.excerpt %&gt;</span><br><span class=\"line\">      &lt;% if (theme.excerpt_link)&#123; %&gt;</span><br><span class=\"line\">        &lt;p class=&quot;article-more-link&quot;&gt;</span><br><span class=\"line\">          &lt;a class=&quot;btn btn-primary&quot; href=&quot;&lt;%- url_for(post.path) %&gt;#more&quot;&gt;&lt;%= theme.excerpt_link %&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;/p&gt;</span><br><span class=\"line\">      &lt;% &#125; %&gt;</span><br><span class=\"line\">    &lt;% &#125; else &#123; %&gt;</span><br><span class=\"line\">      &lt;%- post.content %&gt;</span><br><span class=\"line\">    &lt;% &#125; %&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">    &lt;% if (theme.gitalk_shortname &amp;&amp; page.comments &amp;&amp; theme.url)&#123; %&gt;</span><br><span class=\"line\">      &lt;%- partial(&apos;component/gitalk&apos;) %&gt;</span><br><span class=\"line\">  &lt;% &#125; else &#123; %&gt;</span><br><span class=\"line\">      &lt;div class=&quot;git&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">  &lt;% &#125; %&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;/article&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"step4\"><a href=\"#step4\" class=\"headerlink\" title=\"step4\"></a>step4</h4><p>æ‰“å¼€ Hexo\\themes\\fexo_config.ymlæ–‡ä»¶</p>\n<p>æ³¨é‡Šæ‰<code>disqus_shortname forsigner</code><br>æ·»åŠ <code>gitalk_shortname: robinxdroid</code></p>\n<hr>\n<p>åˆ°æ­¤ï¼Œé…ç½®å®Œæˆï¼Œå¯ä»¥git bash è¾“å…¥hexo serverå‘½ä»¤ï¼Œå†è§ˆå™¨è¾“å…¥<br><code>http://localhost:4000/</code>æµ‹è¯•æ˜¯å¦æ­£å¸¸åŠ è½½gitalkæ¨¡å—</p>\n<hr>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2018/01/03/fexoä¸»é¢˜é›†æˆgitalkè¯„è®ºç»„ä»¶\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2018/01/03/fexoä¸»é¢˜é›†æˆgitalkè¯„è®ºç»„ä»¶</a></p>\n</blockquote>\n","categories":["Blog"],"tags":["2017","fexo"]},{"title":"èŒä¸šåŠ¨è¡","url":"http://yoursite.com/2017/12/28/èŒä¸šåŠ¨è¡/","content":"<p>10æœˆåº•ï¼Œç¦»å¼€äº†å·¥ä½œ2å¹´åŠçš„å…¬å¸ï¼Œ11æœˆè¿›å…¥æ–°å…¬å¸ã€‚è‡³æ­¤ï¼Œæˆ‘å·²ä»äº‹Androidå¼€å‘å·¥ä½œ3å¹´åŠæ—¶é—´ã€‚ç›¸å¯¹äºå‰ä¸¤å¹´ï¼Œæ‰¾å·¥ä½œçš„æ—¶å€™æ˜æ˜¾æ„Ÿè§‰åˆ°å·¥ä½œéš¾æ‰¾äº†å¾ˆå¤šï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå¹´åº•ã€‚èŒä¸šæœ‰å…´ç››æœ‰è¡°è½ï¼ŒAndroidçš„æœªæ¥æˆ‘ä»¬ä¸å¾—è€ŒçŸ¥ï¼Œä¹Ÿçœ‹è¿‡å¤§ç¥çš„è°ˆè®ºæ–‡ç« ï¼Œæ€»ç»“ä¹Ÿæ˜¯ä¿®ç‚¼è‡ªèº«æ‰æ˜¯æ­£é“ï¼Œå¤šå­¦å¤šçœ‹ï¼Œæœ‰é‚£ä¸ªç²¾åŠ›ä¹Ÿå¯ä»¥è·¨è¡Œå­¦å­¦ã€‚<br><br>å‰æ®µæ—¶é—´ä¸­å…´çš„ç¨‹åºå‘˜è·³æ¥¼äº‹ä»¶ç€å®åœ¨åœˆå­é‡Œå¼•å‘äº†ä¸å°çš„åŠ¨è¡ä¸åæ€ï¼Œä¸‰å››åå²ä¹‹åçš„æˆ‘ä»¬è¦æ€ä¹ˆåŠï¼Œç«äº‰ä¸è¿‡å¹´è½»äººï¼Œè¢«ä¼ä¸šå«Œå¼ƒã€‚ã€‚ã€‚æˆ‘è§‰å¾—ä¸å¿…è¿‡å¤šçš„æƒ³è¿™äº›äº‹æƒ…ï¼Œåå‡ å¹´ä¹‹å†…è°çŸ¥é“ä¼šå‘ç”Ÿä»€ä¹ˆäº‹å‘¢ï¼Œè°ä¸å®šä½ ä¸«å°±ä¸­äº†å½©ç¥¨-_-!!ã€‚å°±åƒæœ‰çš„äººè¸ä¸ŠAndroidå¼€å‘çš„è·¯éƒ½å¯èƒ½æ˜¯ä¸ªæ„å¤–ã€‚å½“ç„¶ï¼ŒèŒä¸šè§„åˆ’è¿˜æ˜¯è¦æœ‰çš„ï¼Œæœªæ¥é™¤äº†ç²¾ç ”è‡ªèº«çš„æŠ€æœ¯å¤–ï¼Œè¦å­¦ä¸€å­¦å…¶ä»–æ–¹é¢çš„çŸ¥è¯†ï¼Œç»™è‡ªå·±ç•™ä¸ªå‡ºè·¯ã€‚æ¯•ç«Ÿæˆ‘ä»¬éƒ½æ˜¯è¦å…»å®¶çš„äººã€‚ã€‚ã€‚<br><br>æ—¶é—´ä¸å¤Ÿï¼Œå­¦ä¹ çƒ­æƒ…å‡å°‘ï¼Œè¿™äº›éšœç¢éœ€è¦è‡ªå·±å»å…‹æœï¼Œèµ°äº†è¿™æ¡è·¯å°±è¦å¯¹è‡ªå·±è´Ÿè´£â€¦</p>\n<hr>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2017/12/28/èŒä¸šåŠ¨è¡\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2017/12/28/èŒä¸šåŠ¨è¡</a></p>\n</blockquote>\n","categories":["éšç¬”"],"tags":["2017"]},{"title":"Gradleçš„å®šåˆ¶","url":"http://yoursite.com/2017/07/20/Gradleçš„å®šåˆ¶/","content":"<h2 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h2><p>AndroidStudioæ™®åŠä»¥æ¥ï¼Œä¸€ä¸ªå®Œæ•´çš„Androidåº”ç”¨Gradleçš„é…ç½®å¿…ä¸å¯å°‘ï¼Œé’ˆå¯¹Gradleçš„å®šåˆ¶ï¼Œç»“åˆè‡ªå·±æ—¥å¸¸ä½¿ç”¨ä»¥åŠç½‘ç»œä¸Šå…¶ä»–äººåˆ†äº«çš„å†…å®¹æ•´ç†äº†è¿™ç¯‡</p>\n<h2 id=\"æˆ‘çš„é…ç½®\"><a href=\"#æˆ‘çš„é…ç½®\" class=\"headerlink\" title=\"æˆ‘çš„é…ç½®\"></a>æˆ‘çš„é…ç½®</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply plugin: <span class=\"string\">'com.android.application'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//æ‰“åŒ…çš„é»˜è®¤æ—¶é—´</span></span><br><span class=\"line\"><span class=\"function\">def <span class=\"title\">releaseTime</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Date().format(<span class=\"string\">\"yyyy-MM-dd\"</span>, TimeZone.getTimeZone(<span class=\"string\">\"UTC\"</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">android &#123;</span><br><span class=\"line\">    compileSdkVersion ANDROID_BUILD_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">    buildToolsVersion ANDROID_BUILD_TOOLS_VERSION</span><br><span class=\"line\"></span><br><span class=\"line\">    defaultConfig &#123;</span><br><span class=\"line\">        applicationId <span class=\"string\">\"net.robinx.hengrui\"</span></span><br><span class=\"line\">        minSdkVersion ANDROID_BUILD_MIN_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">        targetSdkVersion ANDROID_BUILD_TARGET_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">        versionCode VERSION_CODE as <span class=\"keyword\">int</span></span><br><span class=\"line\">        versionName VERSION_NAME</span><br><span class=\"line\"></span><br><span class=\"line\">        vectorDrawables.useSupportLibrary = <span class=\"keyword\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ç­¾åæ–‡ä»¶é…ç½®</span></span><br><span class=\"line\">    signingConfigs &#123;</span><br><span class=\"line\">        myConfig &#123;</span><br><span class=\"line\">            <span class=\"function\">storeFile <span class=\"title\">file</span><span class=\"params\">(<span class=\"string\">'xxxxx.jks'</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">            storePassword 'xxxxxx'</span></span><br><span class=\"line\"><span class=\"function\">            keyAlias 'xxxxx'</span></span><br><span class=\"line\"><span class=\"function\">            keyPassword 'xxxxx'</span></span><br><span class=\"line\"><span class=\"function\">        &#125;</span></span><br><span class=\"line\"><span class=\"function\">    &#125;</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">    buildTypes </span>&#123;</span><br><span class=\"line\">        release &#123;</span><br><span class=\"line\">            <span class=\"comment\">//ç­¾åæ–‡ä»¶é…ç½®</span></span><br><span class=\"line\">            signingConfig android.signingConfigs.myConfig</span><br><span class=\"line\">            minifyEnabled <span class=\"keyword\">false</span></span><br><span class=\"line\">            <span class=\"comment\">//æ··æ·†æ–‡ä»¶é…ç½®</span></span><br><span class=\"line\">            <span class=\"function\">proguardFiles <span class=\"title\">getDefaultProguardFile</span><span class=\"params\">(<span class=\"string\">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"comment\">// --------------å¤šæ¸ é“æ‰“åŒ…è‡ªå®šä¹‰è¾“å‡ºé…ç½®start-----------------------</span></span></span><br><span class=\"line\"><span class=\"function\">            applicationVariants.all </span>&#123; variant -&gt;</span><br><span class=\"line\">                variant.outputs.each &#123; output -&gt;</span><br><span class=\"line\">                    def outputFile = output.outputFile</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (outputFile != <span class=\"keyword\">null</span> &amp;&amp; outputFile.name.endsWith(<span class=\"string\">'.apk'</span>)) &#123;</span><br><span class=\"line\">                        <span class=\"comment\">// è¾“å‡ºapkåç§°ä¸ºHengRui_v1.0_2016-01-15_wandoujia.apk</span></span><br><span class=\"line\">                        def fileName = <span class=\"string\">\"HengRui_v$&#123;defaultConfig.versionCode&#125;_$&#123;releaseTime()&#125;_$&#123;variant.productFlavors[0].name&#125;.apk\"</span></span><br><span class=\"line\">                        output.outputFile = <span class=\"keyword\">new</span> File(outputFile.parent, fileName)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// --------------å¤šæ¸ é“æ‰“åŒ…è‡ªå®šä¹‰è¾“å‡ºé…ç½®end-----------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//ç™¾åº¦åœ°å›¾Key</span></span><br><span class=\"line\">            manifestPlaceholders = [baidu_map_key: <span class=\"string\">\"xxxxxxxxxxxxxxxxxxx\"</span>]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        debug &#123;</span><br><span class=\"line\">            signingConfig android.signingConfigs.myConfig</span><br><span class=\"line\">            minifyEnabled <span class=\"keyword\">false</span></span><br><span class=\"line\">            <span class=\"function\">proguardFiles <span class=\"title\">getDefaultProguardFile</span><span class=\"params\">(<span class=\"string\">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"comment\">//ç™¾åº¦åœ°å›¾Key</span></span></span><br><span class=\"line\"><span class=\"function\">            manifestPlaceholders </span>= [baidu_map_key: <span class=\"string\">\"xxxxxxxxxxxxxxxxxxx\"</span>]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//--------------------å¤šæ¸ é“æ‰“åŒ…start---------------------</span></span><br><span class=\"line\">    productFlavors &#123;</span><br><span class=\"line\">        Default &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">//        XiaoMI &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        WanDouJia &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Oppo &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        QiHu360 &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        HuaWei &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        YingYongBao &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        BaiDu &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        TaoBaoPP &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        MeiZu &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        GooglePlay &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        CoolChua &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Pgyer &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        SAMSUNG &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Lenovo &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        AppChina &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Eoe &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Haixin &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Letv &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        WoStore &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Gfan &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Nduoa &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        MoguStore &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        MuMaYI &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        TianYi &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        LiQucn &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        AnZhuoYuan &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Mopo &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        Ard9 &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        AppFun &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        AnBei &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        YingYongBei &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        AnFone &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        ZhuoLe &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        AndroidMarket &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        UC &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        MobileMarket &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        KaiQi &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        SouGou &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        AiQiYi &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//        YunOS &#123;&#125;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    productFlavors.all &#123;</span><br><span class=\"line\">        flavor -&gt; flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//--------------------å¤šæ¸ é“æ‰“åŒ…end---------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//å–å‡ºLinkæŠ¥é”™ï¼Œå¦åˆ™æ— æ³•æ‰“æ­£å¼åŒ…</span></span><br><span class=\"line\">    lintOptions &#123;</span><br><span class=\"line\">        checkReleaseBuilds <span class=\"keyword\">false</span></span><br><span class=\"line\">        abortOnError <span class=\"keyword\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//aarç›®å½•</span></span><br><span class=\"line\">    repositories &#123;</span><br><span class=\"line\">        flatDir &#123;</span><br><span class=\"line\">            dirs <span class=\"string\">'libs'</span>, <span class=\"string\">'../lib.aar/libs'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">dependencies &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//file lib</span></span><br><span class=\"line\">    <span class=\"function\">compile <span class=\"title\">fileTree</span><span class=\"params\">(include: [<span class=\"string\">'*.jar'</span>], dir: <span class=\"string\">'libs'</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"comment\">//module lib</span></span></span><br><span class=\"line\"><span class=\"function\">    compile <span class=\"title\">project</span><span class=\"params\">(<span class=\"string\">':lib.aar'</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"comment\">//android lib</span></span></span><br><span class=\"line\"><span class=\"function\">    compile 'com.android.support:appcompat-v7:25.0.1'</span></span><br><span class=\"line\"><span class=\"function\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>è¿™æ˜¯å¹³æ—¶è‡ªå·±ç”¨çš„é…ç½®ï¼Œä¸»è¦è‡ªå®šä¹‰äº†æ‰“åŒ…çš„æ–‡ä»¶åç§°ï¼ŒdebugåŒ…ä½¿ç”¨releaseç­¾åï¼Œä»¥åŠå¤šæ¸ é“æ‰“åŒ…</p>\n<h2 id=\"å…¶ä»–é…ç½®\"><a href=\"#å…¶ä»–é…ç½®\" class=\"headerlink\" title=\"å…¶ä»–é…ç½®\"></a>å…¶ä»–é…ç½®</h2><p>ç½‘ç»œä¸Šçš„ä¸€ç¯‡é…ç½®</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    compileSdkVersion <span class=\"number\">25</span></span><br><span class=\"line\">    buildToolsVersion <span class=\"string\">\"25.0.3\"</span></span><br><span class=\"line\">    defaultConfig &#123;</span><br><span class=\"line\">        applicationId <span class=\"string\">\"com.imliujun.gradle\"</span></span><br><span class=\"line\">        minSdkVersion <span class=\"number\">16</span></span><br><span class=\"line\">        targetSdkVersion <span class=\"number\">25</span></span><br><span class=\"line\">        <span class=\"function\">versionCode <span class=\"title\">gitVersionCode</span><span class=\"params\">()</span>  <span class=\"comment\">//è·å– git çš„ commit æ¬¡æ•°</span></span></span><br><span class=\"line\"><span class=\"function\">        versionName rootProject.ext.versionName</span></span><br><span class=\"line\"><span class=\"function\">        manifestPlaceholders </span>= [UMENG_APP_KEY      : <span class=\"string\">\"å¡«ä½ çš„å‹ç›Ÿ APP KEY\"</span>,</span><br><span class=\"line\">                                UMENG_CHANNEL_VALUE: <span class=\"string\">\"é»˜è®¤çš„æ¸ é“å\"</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    signingConfigs &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//åœ¨è¿™é‡Œé…ç½®ç›¸å…³çš„ç­¾åä¿¡æ¯</span></span><br><span class=\"line\">        keyStore &#123;</span><br><span class=\"line\">            <span class=\"function\">storeFile <span class=\"title\">file</span><span class=\"params\">(<span class=\"string\">\"test.jks\"</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">            storePassword \"111111\"</span></span><br><span class=\"line\"><span class=\"function\">            keyAlias \"test\"</span></span><br><span class=\"line\"><span class=\"function\">            keyPassword \"111111\"</span></span><br><span class=\"line\"><span class=\"function\">        &#125;</span></span><br><span class=\"line\"><span class=\"function\">    &#125;</span></span><br><span class=\"line\"><span class=\"function\">    buildTypes </span>&#123;</span><br><span class=\"line\">        release &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ä¸æ˜¾ç¤ºLog</span></span><br><span class=\"line\">            buildConfigField <span class=\"string\">\"boolean\"</span>, <span class=\"string\">\"LOG_DEBUG\"</span>, <span class=\"string\">\"false\"</span></span><br><span class=\"line\">            signingConfig signingConfigs.keyStore <span class=\"comment\">//è®¾ç½®ç­¾åæ–‡ä»¶</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        debug &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ˜¾ç¤ºLog</span></span><br><span class=\"line\">            buildConfigField <span class=\"string\">\"boolean\"</span>, <span class=\"string\">\"LOG_DEBUG\"</span>, <span class=\"string\">\"true\"</span></span><br><span class=\"line\">            versionNameSuffix <span class=\"string\">\"-debug\"</span>  <span class=\"comment\">//è®¾ç½®åç¼€</span></span><br><span class=\"line\">            signingConfig signingConfigs.keyStore  <span class=\"comment\">//è®¾ç½®ç­¾åæ–‡ä»¶</span></span><br><span class=\"line\">            manifestPlaceholders.UMENG_CHANNEL_VALUE = <span class=\"string\">\"test\"</span> <span class=\"comment\">//ä¿®æ”¹æ¸ é“å</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    productFlavors &#123;</span><br><span class=\"line\">        offline &#123;</span><br><span class=\"line\">            buildConfigField <span class=\"string\">\"String\"</span>, <span class=\"string\">\"DOMAIN_NAME\"</span>, <span class=\"string\">\"\\\"https://offline.domain.com/\\\"\"</span></span><br><span class=\"line\">            <span class=\"function\">versionName <span class=\"title\">getTestVersionName</span><span class=\"params\">()</span> <span class=\"comment\">//ä¿®æ”¹ versionName</span></span></span><br><span class=\"line\"><span class=\"function\">        &#125;</span></span><br><span class=\"line\"><span class=\"function\">        online </span>&#123;</span><br><span class=\"line\">            buildConfigField <span class=\"string\">\"String\"</span>, <span class=\"string\">\"DOMAIN_NAME\"</span>, <span class=\"string\">\"\\\"https://online.domain.com/\\\"\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        admin &#123;</span><br><span class=\"line\">            buildConfigField <span class=\"string\">\"String\"</span>, <span class=\"string\">\"DOMAIN_NAME\"</span>, <span class=\"string\">\"\\\"https://admin.domain.com/\\\"\"</span></span><br><span class=\"line\">            versionName rootProject.ext.versionName + <span class=\"string\">\"-ç®¡ç†å‘˜\"</span> <span class=\"comment\">//ä¿®æ”¹ versionName</span></span><br><span class=\"line\">            manifestPlaceholders.UMENG_CHANNEL_VALUE = <span class=\"string\">\"admin\"</span> <span class=\"comment\">//ä¿®æ”¹æ¸ é“å</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ ¹ç›®å½•gradleæ–‡ä»¶é…ç½®</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ext &#123;</span><br><span class=\"line\">    versionName = <span class=\"string\">\"2.0.2\"</span></span><br><span class=\"line\">    testNum = <span class=\"string\">\"0001\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">def <span class=\"title\">getTestVersionName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> String.format(<span class=\"string\">\"%s.%s\"</span>, rootProject.ext.versionName,</span><br><span class=\"line\">            rootProject.ext.testNum)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">gitVersionCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    def count = <span class=\"string\">\"git rev-list HEAD --count\"</span>.execute().text.trim()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> count.isInteger() ? count.toInteger() : <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸è‡ªå·±å¹³æ—¶ä½¿ç”¨çš„æœ‰äº›ç»†å¾®å·®åˆ«ï¼Œå¯ä»¥å‚çœ‹è¿™ç¯‡æ–‡ç« <a href=\"http://www.imliujun.com/gradle1.html\" target=\"_blank\" rel=\"noopener\">http://www.imliujun.com/gradle1.html</a></p>\n<h2 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h2><p>ç»“åˆä¸¤è€…ç›¸ä¿¡å¯ä»¥å®šåˆ¶å‡ºé€‚åˆè‡ªå·±é¡¹ç›®çš„gradleé…ç½®</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2017/07/20/Gradleçš„å®šåˆ¶/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2017/07/20/Gradleçš„å®šåˆ¶/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["gradle"]},{"title":"Kotlinç¬”è®°","url":"http://yoursite.com/2017/06/26/Kotlinç¬”è®°/","content":"<h2 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h2><p>2017å¹´çš„è°·æ­Œ I/Oå¤§ä¼šä¸Šï¼ŒAndroidå›¢é˜Ÿå®£å¸ƒKotlinæˆä¸ºäº†Androidå¹³å°çš„å®˜æ–¹æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€ã€‚è·Ÿéšæ—¶ä»£çš„è„šæ­¥ï¼Œä¹Ÿé©¬ä¸Šçš„å¼€å§‹å­¦ä¹ è¿™é—¨è¯­è¨€ï¼Œè¿‡ç¨‹ä¸­ï¼Œè®°å½•ä¸€äº›è¦ç‚¹ï¼Œå¿ƒå¾—</p>\n<h2 id=\"åŸºæœ¬è¯­æ³•\"><a href=\"#åŸºæœ¬è¯­æ³•\" class=\"headerlink\" title=\"åŸºæœ¬è¯­æ³•\"></a>åŸºæœ¬è¯­æ³•</h2><p>ç›´æ¥çœ‹æ–‡æ¡£æ›´åˆé€‚ï¼š<a href=\"https://github.com/huanglizhuo/kotlin-in-chinese\" target=\"_blank\" rel=\"noopener\">https://github.com/huanglizhuo/kotlin-in-chinese</a></p>\n<h2 id=\"ä¸€äº›åŒºåˆ«\"><a href=\"#ä¸€äº›åŒºåˆ«\" class=\"headerlink\" title=\"ä¸€äº›åŒºåˆ«\"></a>ä¸€äº›åŒºåˆ«</h2><p>kotlinä¸javaçš„ä¸€äº›ç›´æ¥çš„å¯¹æ¯”ï¼š<a href=\"https://github.com/MindorksOpenSource/from-java-to-kotlin/blob/master/README-ZH.md\" target=\"_blank\" rel=\"noopener\">https://github.com/MindorksOpenSource/from-java-to-kotlin</a></p>\n<h2 id=\"è¦ç‚¹\"><a href=\"#è¦ç‚¹\" class=\"headerlink\" title=\"è¦ç‚¹\"></a>è¦ç‚¹</h2><p>ä¸‹é¢æ˜¯ä¸ªäººå­¦ä¹ kotlinå¼€å‘çš„æ—¶å€™çš„ä¸€äº›å¿ƒå¾—ä¸è¦ç‚¹</p>\n<h3 id=\"å±æ€§\"><a href=\"#å±æ€§\" class=\"headerlink\" title=\"å±æ€§\"></a>å±æ€§</h3><ul>\n<li><p>kotlinçš„å®ä½“ç±»é»˜è®¤å®ç°äº†get setæ–¹æ³•ï¼Œç›´æ¥é€šè¿‡<code>.</code>å·å–å€¼èµ‹å€¼</p>\n</li>\n<li><p>kotlinå®šä¹‰å˜é‡çš„æ—¶å€™æœ‰ <code>var</code> <code>val</code>ä¸¤ç§ï¼Œ<code>var</code>æ˜¯æ™®é€šå˜é‡ï¼Œ<code>val</code>æ˜¯åªè¯»å˜é‡ï¼Œå³javaä¸­çš„<code>final</code></p>\n</li>\n<li><p>kotlinç±»ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œeg:<code>MainActivity.this</code>,ç”¨kotlinè¡¨ç¤º:<code>this@MainActivity</code></p>\n</li>\n<li><p><code>?</code>ç¬¦å·æ˜¯ä¸ªç¥å™¨ï¼Œå‚è§ä¸Šé¢ç»™å‡ºçš„æ–‡æ¡£ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™è¦æ³¨æ„ä¸‹ï¼Œæ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡<br><br> <code>private var mContext: Context? = null</code><br><br>é‚£ä¹ˆä¸‹æ¬¡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦ä½ ç¡®è®¤å®ƒä¸ä¸ºnullï¼Œéœ€è¦è¿™æ ·å†™mContext!!ï¼Œå†™çš„åœ°æ–¹å¤šå°±ä¼šå«Œéº»çƒ¦,é‚£ä¹ˆä½ å¯ä»¥è¿™æ ·å®šä¹‰ï¼Œé¿å…è¿™ä¸ªé—®é¢˜<br><br> <code>lateinit internal var mContext: Context</code></p>\n</li>\n</ul>\n<h3 id=\"æ–¹æ³•\"><a href=\"#æ–¹æ³•\" class=\"headerlink\" title=\"æ–¹æ³•\"></a>æ–¹æ³•</h3><ul>\n<li>é™æ€æ–¹æ³•å®šä¹‰:<br><br>åˆ©ç”¨ä¼´éšå¯¹è±¡<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">companion object &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\">fun <span class=\"title\">callIntent</span><span class=\"params\">(context: Context, folder: Folder)</span>: Intent </span>&#123;</span><br><span class=\"line\">            val intent = Intent(context, PlayListDetailsActivity::<span class=\"class\"><span class=\"keyword\">class</span>.<span class=\"title\">java</span>)</span></span><br><span class=\"line\"><span class=\"class\">            <span class=\"title\">intent</span>.<span class=\"title\">putExtra</span>(<span class=\"title\">EXTRA_FOLDER</span>, <span class=\"title\">folder</span>)</span></span><br><span class=\"line\"><span class=\"class\">            <span class=\"title\">return</span> <span class=\"title\">intent</span></span></span><br><span class=\"line\"><span class=\"class\">        &#125;</span></span><br><span class=\"line\"><span class=\"class\">    &#125;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"ç±»\"><a href=\"#ç±»\" class=\"headerlink\" title=\"ç±»\"></a>ç±»</h3><ul>\n<li>classè°ƒç”¨:<br><br>java:<code>PlayListDetailsActivity.class</code><br>kotlin:<code>PlayListDetailsActivity::class.java</code></li>\n</ul>\n<h3 id=\"æ¥å£\"><a href=\"#æ¥å£\" class=\"headerlink\" title=\"æ¥å£\"></a>æ¥å£</h3><ul>\n<li><p>kotlinçš„æ¥å£å°±æµå¼Šäº†ï¼Œæ¥å£ä¸­å¯ä»¥æœ‰å‡½æ•°ä½“ï¼Œè¿™ç‚¹javaåšä¸åˆ°ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šè§£è€¦çš„å·¥ä½œï¼Œæ¯”å¦‚åªè¦å®ç°ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å°±èƒ½ä½¿ç”¨å®ƒå†…éƒ¨å®šä¹‰å¥½çš„åŠŸèƒ½å‡½æ•°ï¼Œéå¸¸nice<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Toaster</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">fun <span class=\"title\">toast</span><span class=\"params\">(context: Context,string: String)</span></span>&#123;</span><br><span class=\"line\">        Toast.makeText(context,string,Toast.LENGTH_SHORT).show()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å®ç°å›è°ƒä¸ç›‘å¬:<br><br>åˆ©ç”¨<code>object</code>å…³é”®å­—é€šè¿‡<code>:</code>å®ç°è¿™ä¸ªæ¥å£ï¼Œé‡æ–°å†…éƒ¨æŠ½è±¡å‡½æ•°<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adapter.setOnItemClickListener(object : OnItemClickListener &#123;</span><br><span class=\"line\">            <span class=\"function\">override fun <span class=\"title\">onItemClick</span><span class=\"params\">(itemView: View?, viewType: Int, position: Int)</span> </span>&#123;</span><br><span class=\"line\">                RxBus.get().post(PlayListNowEvent(mPlayList!!, position))</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"æŠ½è±¡ç±»\"><a href=\"#æŠ½è±¡ç±»\" class=\"headerlink\" title=\"æŠ½è±¡ç±»\"></a>æŠ½è±¡ç±»</h3><ul>\n<li>å®ç°æŠ½è±¡ç±»å‡½æ•°:<br><br>åˆ©ç”¨<code>object</code>å…³é”®å­—é€šè¿‡<code>:</code>ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œé‡æ–°å†…éƒ¨æŠ½è±¡å‡½æ•°ï¼Œè¦æ³¨æ„çš„æ˜¯ç±»ååé¢è¦åŠ <code>()</code>è¿™æ˜¯ä¸æ¥å£çš„åŒºåˆ«<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">view_pager.addOnPageChangeListener(object : ViewPager.SimpleOnPageChangeListener() &#123;</span><br><span class=\"line\">         <span class=\"function\">override fun <span class=\"title\">onPageSelected</span><span class=\"params\">(position: Int)</span> </span>&#123;</span><br><span class=\"line\">             radioButtons[position].isChecked = <span class=\"keyword\">true</span></span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"å…¶ä»–ç‚¹\"><a href=\"#å…¶ä»–ç‚¹\" class=\"headerlink\" title=\"å…¶ä»–ç‚¹\"></a>å…¶ä»–ç‚¹</h3><ul>\n<li>æ‡’åŠ è½½,lazyå†…éƒ¨ä»£ç æ‰§è¡Œæ—¶é—´ä¸ºè¿™ä¸ªå˜é‡ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> val mTitles by lazy &#123; resources.getStringArray(R.array.mp_main_titles) &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h2><p>ä¸é—´æ–­è¡¥å……ï¼ŒKotlinè¿™é—¨è¯­è¨€ç”¨ç€ç›®å‰æ„Ÿå—ä¸é”™ï¼Œä»¥åå†æ…¢æ…¢æ·±å…¥å§</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2017/06/26/Kotlinç¬”è®°/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2017/06/26/Kotlinç¬”è®°/</a></p>\n</blockquote>\n","categories":["Android","Kotlin"],"tags":["kotlin","è¯­è¨€"]},{"title":"ä¼ä¸šAppæ¶æ„ç»„ä»¶åˆ†å±‚","url":"http://yoursite.com/2017/03/06/ä¼ä¸šAppæ¶æ„ç»„ä»¶åˆ†å±‚/","content":"<h2 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h2><p>ä¸Šä¸€ç¯‡è¯´äº†Android app æ¶æ„ï¼Œä¸»è¦æ–¹å‘æ˜¯ç»„ä»¶åŒ–ã€‚è¿™ç¯‡è¯´è¯´ä¼ä¸šAppçš„ç»„ä»¶åŒ–ç»†åˆ†ï¼Œä¸»è¦æ˜¯ä¸€äº›ä¸ªäººç»éªŒä»¥åŠå»ºè®®</p>\n<h2 id=\"ç»„ä»¶åŒ–ä¸æ¨¡å—åŒ–\"><a href=\"#ç»„ä»¶åŒ–ä¸æ¨¡å—åŒ–\" class=\"headerlink\" title=\"ç»„ä»¶åŒ–ä¸æ¨¡å—åŒ–\"></a>ç»„ä»¶åŒ–ä¸æ¨¡å—åŒ–</h2><p>æˆ‘ä»¬ä¼šç»å¸¸çœ‹åˆ°è¿™ä¸¤ä¸ªæ¦‚å¿µâ€œç»„ä»¶åŒ–â€ï¼Œâ€œæ¨¡å—åŒ–â€ï¼Œè¦è¯´ä»–ä»¬çš„è¯¦ç»†åŒºåˆ«ä¹Ÿä¸å¥½è¯´ï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸ªlibrary moduleã€‚å…¶å®æ˜¯æœ‰åŒºåˆ«çš„ï¼Œç†è§£æ¸…æ¥šæ‰èƒ½è®©æˆ‘ä»¬çš„appæ¶æ„æ›´æ¸…æ™°</p>\n<h2 id=\"ç»„ä»¶åŒ–\"><a href=\"#ç»„ä»¶åŒ–\" class=\"headerlink\" title=\"ç»„ä»¶åŒ–\"></a>ç»„ä»¶åŒ–</h2><p>â€œç»„ä»¶â€è‹±æ–‡ç¿»è¯‘è¿‡æ¥æ˜¯<code>Component</code>ï¼Œä»å­—é¢æ„æ€ï¼Œæˆ‘ä»¬ç†è§£ä¸ºä¸€ä¸ªç»„æˆå•å…ƒï¼Œä¸”ä¸èƒ½å†å¾€ä¸‹æ‹†åˆ†ï¼Œè¿™æ˜¯é‡ç‚¹ï¼Œä¾‹å¦‚ï¼šâ€œå›¾ç‰‡åŠ è½½â€ç»„ä»¶ï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>å¯å¤ç”¨</li>\n<li>å¯æ›¿æ¢</li>\n<li>ç‹¬ç«‹ ï¼ˆä¸å…¶ä»–ç»„ä»¶ä¸å­˜åœ¨ä¾èµ–å…³ç³»ï¼‰</li>\n<li>ä¸å¯æ‹†åˆ† ï¼ˆä¸šåŠ¡ä»£ç ä¸èƒ½å†å‘ä¸‹æ‹†åˆ†ï¼‰</li>\n</ul>\n<p>é’ˆå¯¹ä»¥ä¸Šæ‰€è¯´ï¼Œéšä¾¿ä¸¾å‡ ä¸ªä¾‹å­ï¼Œæœ‰å“ªäº›å¸¸è§çš„ç»„ä»¶ï¼š</p>\n<pre><code>1. å›¾ç‰‡åŠ è½½ç»„ä»¶\n2. å›¾ç‰‡ä¸Šä¼ ç»„ä»¶\n3. æ—¥å¿—ç»„ä»¶\n4. ä¼šè¯ç»„ä»¶\n5. ç½‘ç»œè¯·æ±‚ç»„ä»¶\n6. æ•°æ®åº“æ“ä½œç»„ä»¶\n7. appæ›´æ–°ç»„ä»¶\n8. åœ°å›¾ç»„ä»¶\n9. ç­‰ç­‰...\n</code></pre><h2 id=\"æ¨¡å—åŒ–\"><a href=\"#æ¨¡å—åŒ–\" class=\"headerlink\" title=\"æ¨¡å—åŒ–\"></a>æ¨¡å—åŒ–</h2><p>ç»„ä»¶åŒ–ææ¸…æ¥šï¼Œæ¨¡å—åŒ–å°±ä¸éš¾ç†è§£äº†ï¼Œè‹±æ–‡ç¿»è¯‘è¿‡æ¥æ˜¯<code>Module</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡ï¼Œå…·ä½“çš„ä¸šåŠ¡åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç»„ä»¶ï¼Œä¾‹å¦‚ï¼šé’±åŒ…æ¨¡å—ï¼Œå®ƒçš„å¤§ä½“ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>å¯ä»¥æ˜¯ä¸€ä¸ªå…·ä½“çš„å¤§å‹ä¸šåŠ¡</li>\n<li>å¯ä»¥æ˜¯æ¶æ„ç»„æˆçš„å…¶ä¸­ä¸€ä¸ªæŠ€æœ¯æ¨¡å—</li>\n<li>å¯ä»¥æ˜¯å‡ ä¸ªç»„ä»¶çš„åŠŸèƒ½é›†åˆ</li>\n</ul>\n<p>å¸¸è§çš„æ¨¡å—ç¤ºä¾‹ï¼š</p>\n<pre><code>1. é’±åŒ…æ¨¡å—\n2. å³æ—¶é€šè®¯æ¨¡å—\n3. æ”¯ä»˜æ¨¡å—\n4. æ‰«ç æ¨¡å—\n5. ç­‰ç­‰...\n</code></pre><h2 id=\"Appæ¶æ„ç»„æˆ\"><a href=\"#Appæ¶æ„ç»„æˆ\" class=\"headerlink\" title=\"Appæ¶æ„ç»„æˆ\"></a>Appæ¶æ„ç»„æˆ</h2><p>ç»„ä»¶åŒ–ä¸æ¨¡å—åŒ–ææ¸…æ¥šåæˆ‘ä»¬å°±å¼€å§‹è¯´è¯¦ç»†çš„æ¶æ„</p>\n<h3 id=\"1-å®¿ä¸»\"><a href=\"#1-å®¿ä¸»\" class=\"headerlink\" title=\"1.å®¿ä¸»\"></a>1.å®¿ä¸»</h3><p>å®¿ä¸»å°±æ˜¯æˆ‘ä»¬çš„ä¸»å·¥ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå£³ï¼Œå¯èƒ½åŒ…å«ä¸€äº›ä¸šåŠ¡ï¼Œå¤§éƒ¨åˆ†æˆ–è€…å…¨éƒ¨ä¸šåŠ¡éƒ½è¢«ä¸‹é¢çš„æ¨¡å—åŒ…æ½ï¼Œå®ƒåªè¦ä¾èµ–ä¸åŒçš„æ¨¡å—å³å¯ã€‚</p>\n<h4 id=\"å‘½å\"><a href=\"#å‘½å\" class=\"headerlink\" title=\"å‘½å\"></a>å‘½å</h4><p>AndroidStudioé»˜è®¤å‘½åä¸º<code>app</code>ï¼Œå¯è‡ªå·±éšæ„å–ï¼Œä¸ªäººä¹ æƒ¯ç”¨é»˜è®¤çš„å‘½å</p>\n<h3 id=\"2-ç»„ä»¶\"><a href=\"#2-ç»„ä»¶\" class=\"headerlink\" title=\"2.ç»„ä»¶\"></a>2.ç»„ä»¶</h3><p>æ–°å¼€å‘ä¸€ä¸ªAppï¼Œé¦–å…ˆå‡†å¤‡å¥½éœ€è¦ç”¨åˆ°çš„ç»„ä»¶</p>\n<ul>\n<li>ç½‘ç»œè¯·æ±‚ç»„ä»¶</li>\n<li>å›¾ç‰‡åŠ è½½ç»„ä»¶</li>\n<li>å›¾ç‰‡ä¸Šä¼ ç»„ä»¶</li>\n<li>åŠ¨æ€æƒé™ç»„ä»¶</li>\n<li>appæ›´æ–°ç»„ä»¶</li>\n<li>äº‹ä»¶æ€»çº¿ç»„ä»¶</li>\n<li>å·¥å…·ç±»ç»„ä»¶</li>\n<li>è‡ªå®šä¹‰Viewç»„ä»¶</li>\n<li>ç­‰ç­‰â€¦æ ¹æ®ä¸ªäººéœ€æ±‚å¢åˆ </li>\n</ul>\n<h4 id=\"å‘½å-1\"><a href=\"#å‘½å-1\" class=\"headerlink\" title=\"å‘½å\"></a>å‘½å</h4><p>å…³äºç»„ä»¶çš„å‘½åï¼Œä¸ªäººä¸€èˆ¬å–œæ¬¢<code>lib.xxx</code>,ä¹Ÿå¯ä»¥<code>component.xxx</code>ï¼ŒåŠ å‰ç¼€ä¸€æ˜¯èµ·åˆ°åˆ†ç±»ä½œç”¨ï¼ŒäºŒæ˜¯å¯è¯»æ€§è¾ƒå¼º</p>\n<h3 id=\"3-æ¨¡å—\"><a href=\"#3-æ¨¡å—\" class=\"headerlink\" title=\"3.æ¨¡å—\"></a>3.æ¨¡å—</h3><p>æ¨¡å—æ¶‰åŠåˆ°å…·ä½“ä¸šåŠ¡ï¼Œç¤ºä¾‹ï¼š</p>\n<ul>\n<li>è´­ç‰©è½¦æ¨¡å—</li>\n<li>å•†å“æ¨¡å—</li>\n<li>ç»“ç®—æ¨¡å—</li>\n<li>æ”¯ä»˜æ¨¡å—</li>\n<li>é’±åŒ…æ¨¡å—</li>\n<li>å³æ—¶é€šè®¯æ¨¡å—</li>\n<li>ç­‰ç­‰â€¦æ ¹æ®ä¸šåŠ¡ç§ç±»æ‹†åˆ†</li>\n</ul>\n<h4 id=\"å‘½å-2\"><a href=\"#å‘½å-2\" class=\"headerlink\" title=\"å‘½å\"></a>å‘½å</h4><p>æ¨¡å—çš„å‘½åï¼Œä¸€èˆ¬æ˜¯<code>module.xxx</code>,å‘½åå¯æ ¹æ®è‡ªå·±å–œå¥½ï¼Œè¿™é‡Œåªæ˜¯ä¸ªäººè§è§£</p>\n<h3 id=\"4-å…¬å…±Library\"><a href=\"#4-å…¬å…±Library\" class=\"headerlink\" title=\"4.å…¬å…±Library\"></a>4.å…¬å…±Library</h3><p>appå°‘ä¸äº†ä¸€äº›å¤šä¸ªmoduleéƒ½ä¾èµ–çš„ä¸€äº›ç»„ä»¶ï¼Œä¸€èˆ¬æˆ‘ä»¬æŠŠè¿™äº›ç»„ä»¶æ”¾åœ¨ä¸€ä¸ªå…¬å…±çš„library moduleä¸­ï¼Œå…¶ä»–ç”¨åˆ°è¿™äº›ç»„ä»¶çš„moduleï¼Œå¯ä»¥ç›´æ¥ä¾èµ–ï¼Œè¿™å°±æ˜¯å…¬å…±åº“</p>\n<h4 id=\"å‘½å-3\"><a href=\"#å‘½å-3\" class=\"headerlink\" title=\"å‘½å\"></a>å‘½å</h4><p>å‘½åä¸€èˆ¬æ˜¯<code>lib.common</code></p>\n<h3 id=\"5-è·¯ç”±\"><a href=\"#5-è·¯ç”±\" class=\"headerlink\" title=\"5.è·¯ç”±\"></a>5.è·¯ç”±</h3><p>ç»„ä»¶åŒ–çš„æ ¸å¿ƒå°±æ˜¯è·¯ç”±ï¼Œmoduleä¸moduleä¹‹é—´çš„æ— ä¾èµ–é€šä¿¡å…¨é å®ƒï¼Œè·¯ç”±çš„é€‰æ‹©ï¼Œä¸Šç¯‡æ–‡ç« æœ‰ä»‹ç»</p>\n<h2 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h2><p>æ¶æ„ç»„æˆåŸºæœ¬ä¸Šå°±ä¸Šé¢è¯´çš„è¿™äº›ï¼Œè¿˜æœ‰ä¸€äº›æ³¨æ„ç‚¹ï¼š</p>\n<ul>\n<li>ç»„ä»¶ä¹‹é—´ç‹¬ç«‹æ— ä¾èµ–</li>\n<li>æ¨¡å—ä¹‹é—´ç‹¬ç«‹æ— ä¾èµ–ï¼Œæ¨¡å—ä¸æ¨¡å—é€šä¿¡ä½¿ç”¨è·¯ç”±</li>\n<li>æ¨¡å—ä¸šåŠ¡æ¸…æ™°ï¼Œç‹¬ç«‹ï¼Œä¸€ä¸ªæ¨¡å—è´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å•ä¸€åŸåˆ™</li>\n</ul>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2017/03/06/ä¼ä¸šAppæ¶æ„ç»„ä»¶åˆ†å±‚/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2017/03/06/ä¼ä¸šAppæ¶æ„ç»„ä»¶åˆ†å±‚/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["æ¶æ„","ç»„ä»¶"]},{"title":"Androidæ¶æ„","url":"http://yoursite.com/2017/03/02/Androidæ¶æ„/","content":"<h2 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h2><p>ä»¥ä¸‹çš„appé¡¹ç›®ç»“æ„ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å†™è¿‡<br></p>\n<pre><code>|--package\n   |--activity\n   |--adapter\n   |--constants\n   |--dao\n   |--entity\n   |--fragment\n   |--utils\n   |--view\n</code></pre><p>ç›¸åŒåŠŸèƒ½çš„ç±»éƒ½æ”¾åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼Œè€¦åˆä¹Ÿç‰¹åˆ«ä¸¥é‡ï¼Œå½“å·¥ä½œäº†ä¸€æ®µæ—¶é—´åï¼Œéšç€æŠ€æœ¯æå‡ï¼Œæˆ‘ä»¬çŸ¥é“äº†é«˜å†…èšï¼Œä½è€¦åˆï¼Œå…¶ä¸­è§£è€¦æ˜¯ä¸ªéå¸¸é‡è¦çš„è¿‡ç¨‹ã€‚è¿™å°±æ¶‰åŠåˆ°äº†ä»Šå¤©çš„ä¸»é¢˜ï¼šappæ¶æ„</p>\n<h2 id=\"ä¸ºä»€ä¹ˆè¦é‡è§†è§£è€¦ï¼Œé‡è§†æ¶æ„\"><a href=\"#ä¸ºä»€ä¹ˆè¦é‡è§†è§£è€¦ï¼Œé‡è§†æ¶æ„\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦é‡è§†è§£è€¦ï¼Œé‡è§†æ¶æ„\"></a>ä¸ºä»€ä¹ˆè¦é‡è§†è§£è€¦ï¼Œé‡è§†æ¶æ„</h2><p>è¿™ä¸ªæœ‰ä¸€å®šçš„Androidå¼€å‘ç»éªŒçš„éƒ½çŸ¥é“ï¼Œåœ¨å¼€å‘å®Œæˆåï¼Œæˆ‘ä»¬çš„å·¥ä½œæ˜¯ç»´æŠ¤ï¼Œç‰ˆæœ¬çš„å‡çº§ï¼ŒåŠŸèƒ½ä¿®æ”¹ï¼ŒåŠŸèƒ½å¢åŠ ï¼ŒåŠŸèƒ½åºŸé™¤ï¼Œå¦‚æœç±»ä¼¼å¼•è¨€ä¸­çš„é¡¹ç›®ç»“æ„ï¼Œéšä¾¿å°æ”¹ä¸€ä¸‹ï¼Œå…¶ä»–æ¨¡å—éšä¹‹å°±è¦æ”¹å˜ï¼Œç‰µä¸€å‘åŠ¨å…¨èº«ã€‚ç»´æŠ¤è‰°éš¾ï¼Œæˆæœ¬é«˜æ˜‚ã€‚</p>\n<h2 id=\"Android-moduleæ¶æ„\"><a href=\"#Android-moduleæ¶æ„\" class=\"headerlink\" title=\"Android moduleæ¶æ„\"></a>Android moduleæ¶æ„</h2><p>è‰¯å¥½çš„æ¶æ„æ— ç–‘ä¼šç®€åŒ–appç»“æ„ï¼Œå±‚æ¬¡åˆ†æ˜ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ï¼Œå¼€å‘èµ·æ¥ä¹Ÿå¾—å¿ƒåº”æ‰‹ã€‚</p>\n<ul>\n<li>MVC æœ€å¸¸è§çš„ï¼Œå¼•è¨€ä¸­çš„é¡¹ç›®ç»“æ„å°±æ˜¯ä¸€ä¸ªmvc</li>\n<li>MVP è¿‘ä¸¤å¹´Androidå°ä¼™ä¼´ä»¬æ¨å´‡çš„æ¶æ„</li>\n<li>Flux FaceBookæå‡ºçš„Androidæ¶æ„ï¼Œæ²¡å°è¯•è¿‡ï¼ŒåŸºäºäº‹ä»¶æ€»çº¿é€šä¿¡ï¼Œä¸ªäººä¸å¤ªå–œæ¬¢</li>\n<li>Clean å…³äºCleanæ¡†æ¶çš„ä»‹ç»ï¼Œç½‘ä¸Šä¹Ÿæœ‰ä¸å°‘ï¼Œå°è¯•å†™è¿‡ï¼Œåˆ†å±‚æ˜ç¡®ï¼Œåœ¨mvpæ¶æ„åŸºç¡€ä¸Šæ›´åŠ æ·±å…¥è§£è€¦ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥ä¸€äº›è´Ÿé¢çš„ä¸œè¥¿ï¼Œæ¯”å¦‚é€»è¾‘çš„å¤æ‚æ€§ï¼Œå†™ä¸€èˆ¬çš„å°å‹appï¼Œæ²¡å¿…è¦ä½¿ç”¨ï¼Œå› ä¸ºå¤ªéº»çƒ¦äº†ï¼Œç›´è§‚æ„Ÿå—ã€‚</li>\n</ul>\n<p>ä»¥ä¸Šåªæ˜¯ä¸€ä¸ªAndroid Moudleä¸­ä½¿ç”¨çš„æ¶æ„ã€‚Fluxï¼ŒCleanæš‚ä¸”ä¸è¯´ï¼ŒMVPä¼˜åŒ–moduleå†…éƒ¨çš„è§£è€¦ï¼Œå¯ä»¥å°è¯•ã€‚</p>\n<h2 id=\"Android-projectæ¶æ„\"><a href=\"#Android-projectæ¶æ„\" class=\"headerlink\" title=\"Android projectæ¶æ„\"></a>Android projectæ¶æ„</h2><p>moduleçš„æ¶æ„ä¼˜åŒ–åªèƒ½æå‡moduleå†…éƒ¨çš„è§£è€¦å·¥ä½œã€‚å½“ä¸€ä¸ªappç”±å¤šäººååŒå¼€å‘ï¼Œå†…éƒ¨æœ‰å¤šä¸ªmoduleçš„æ—¶å€™ï¼Œé—®é¢˜å°±æš´éœ²çš„æ›´å¤šäº†ã€‚</p>\n<p>AndroidStudio å¼•å…¥moduleæ¦‚å¿µï¼Œå…¶å®å°±æ˜¯æ¨¡å—åŒ–ï¼Œä¸€ä¸ªmoduleä¸€ä¸ªåŠŸèƒ½ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼šä¸€æ¬¾ç®€æ˜“å•†åŸappï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—</p>\n<ol>\n<li>ä¸»moduleï¼Œå£³å·¥ç¨‹ï¼Œä¾èµ–ä»¥ä¸‹æ¨¡å—</li>\n<li>æœç´¢æ¨¡å—</li>\n<li>è´­ç‰©è½¦æ¨¡å—</li>\n<li>ç»“ç®—æ¨¡å—</li>\n<li>é’±åŒ…æ¨¡å—</li>\n<li>å•†å“æ¨¡å—</li>\n<li>å‡çº§æ¨¡å—</li>\n</ol>\n<p>è¿™æ ·æ¯ä¸ªäººè´Ÿè´£ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—ï¼Œäº’ä¸å¹²æ‰°ï¼Œçœ‹èµ·æ¥è›®ä¸é”™çš„ï¼Œç»“æ„åˆ†æ˜ã€‚ä½†æ˜¯ä¸èƒ½é«˜å…´å¤ªæ—©ï¼Œè¿™åªèƒ½ç®—ç®€å•çš„appåˆ†å—ï¼Œå½“appè¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œmoduleä¸moduleä¹‹é—´ä¼šä¸å¯é¿å…çš„ä¹Ÿä¼šå­˜åœ¨ç›¸äº’ä¾èµ–ï¼Œå°±åƒæ»šé›ªçƒä¸€æ ·ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šä¸å¯æ§ï¼Œä¿®æ”¹äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¦èŠ±è´¹å¿ƒæ€å¯»æ‰¾æ‰€æœ‰ä¾èµ–module Açš„module Næ˜¯å¦ä¼šå‡ºç°é—®é¢˜,å½“éœ€è¦åˆ é™¤ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œæ‰€æœ‰ä¾èµ–çš„moduleä¹Ÿéƒ½ä¼šæŠ¥é”™ã€‚é”™ç»¼å¤æ‚ã€‚</p>\n<p>å› æ­¤ï¼Œåœ¨app projectæ¶æ„ä¸Šè¿˜è¦èŠ±å¿ƒæ€ã€‚ä»å»å¹´å¼€å§‹ï¼Œåœˆä¸­ä»æ’ä»¶åŒ–æµå‘ç»„ä»¶åŒ–ï¼Œå› ä¸ºç›¸æ¯”äºæ’ä»¶åŒ–ï¼Œç»„ä»¶åŒ–ä¸ä¼šè¿‡å¤šçš„æ¶‰åŠç¼–è¯‘å±‚çš„é—®é¢˜ï¼Œå¼€å‘é€æ˜ã€‚ç»„ä»¶åŒ–å…¶ä¸­é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µå«â€œè·¯ç”±â€<br>å…³äºç»„ä»¶åŒ–ï¼Œæˆ‘ä¹Ÿä¸€ç›´åœ¨æ€è€ƒã€‚è¿™ä¸¤å¤©æ­£å¥½çœ‹åˆ°äº†ä¸€ç‰‡è¯´ç»„ä»¶åŒ–çš„æ–‡ç« ï¼Œè¯´çš„éå¸¸å¥½ï¼Œè€Œä¸”ç»™å‡ºäº†ä»£ç ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ï¼Œä¼ é€é—¨ï¼š<a href=\"http://blog.spinytech.com/2016/12/28/android_modularization/\" target=\"_blank\" rel=\"noopener\">Androidæ¶æ„æ€è€ƒ(æ¨¡å—åŒ–ã€å¤šè¿›ç¨‹)</a></p>\n<p>githubä¸Šä¹Ÿæœ‰è®¸å¤šäººå¼€æºå‡ºäº†ä¸åŒçš„è·¯ç”±åº“ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šéƒ½åªæ¶‰åŠåˆ°äº†Activityä¹‹é—´çš„è·³è½¬ã€‚å¯¹äºé€šä¿¡è¿™å—è€ƒè™‘çš„å¹¶ä¸å¤Ÿã€‚ä¸Šæ–‡çš„æ–¹æ¡ˆå¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™æ–¹é¢é—®é¢˜ï¼Œè€Œä¸”ç»™å‡ºäº†å¤šè¿›ç¨‹é—´é€šä¿¡çš„é—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œå¾ˆniceã€‚</p>\n<h2 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h2><p>å…³äºAndroidçš„æ¶æ„ï¼ŒæŒ‰ç…§ä»¥ä¸Šæ‰€è¯´ï¼ŒåŸºæœ¬å¯ä»¥å¾ˆå¥½çš„ä¼˜åŒ–ï¼Œå½“ç„¶é€‚ç”¨äºå¤§å‹é¡¹ç›®ï¼Œç±»ä¼¼å¤–åŒ…è¿™ç§å¿«é€Ÿå°å‹é¡¹ç›®ï¼Œé‚£å°±æ²¡å¿…è¦äº†ã€‚</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2017/03/02/Androidæ¶æ„/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2017/03/02/Androidæ¶æ„/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["æ¶æ„"]},{"title":"RecyclerViewä¸“é¢˜","url":"http://yoursite.com/2017/02/14/RecyclerViewä¸“é¢˜/","content":"<h2 id=\"çœ‹è§ä¸€ä¸ªä¸é”™çš„RecyclerViewæ•´ç†\"><a href=\"#çœ‹è§ä¸€ä¸ªä¸é”™çš„RecyclerViewæ•´ç†\" class=\"headerlink\" title=\"çœ‹è§ä¸€ä¸ªä¸é”™çš„RecyclerViewæ•´ç†\"></a>çœ‹è§ä¸€ä¸ªä¸é”™çš„RecyclerViewæ•´ç†</h2><ul>\n<li><a href=\"https://gold.xitu.io/post/5856825c1b69e6006c96a58b\" target=\"_blank\" rel=\"noopener\">å¡ç‰‡å±‚å å¸ƒå±€ï¼Œä»¿æ¢æ¢ã€äººäººå½±è§†è®¢é˜…ç•Œé¢ ç®€å•&amp;ä¼˜é›…ï¼šLayoutManager+ItemTouchHelper - mcxtzhang - æ˜é‡‘ä¸“æ </a></li>\n<li><a href=\"http://group.jobbole.com/22143/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topic\" target=\"_blank\" rel=\"noopener\">æ‰“é€ æœ€å¼ºRecyclerViewï¼ŒItemä¾§æ»‘èœå•ï¼Œé•¿æŒ‰æ‹–æ‹½Itemï¼Œæ»‘åŠ¨åˆ é™¤Item - å°ç»„ - ä¼¯ä¹åœ¨çº¿</a></li>\n<li><a href=\"https://github.com/zaihuishou/ExpandableRecyclerview\" target=\"_blank\" rel=\"noopener\">å¯æŠ˜å å±•å¼€çš„ExpandableRecycleradapter</a></li>\n<li><a href=\"http://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650820629&amp;idx=1&amp;sn=dafee7298419df6c9161368db7f7198d&amp;scene=0#wechat_redirect\" target=\"_blank\" rel=\"noopener\">å¯¹RecyclerView ItemåšåŠ¨ç”»</a></li>\n<li><a href=\"http://mp.weixin.qq.com/s/CzrKotyupXbYY6EY2HP_dA\" target=\"_blank\" rel=\"noopener\">RecyclerView å¿…çŸ¥å¿…ä¼š</a></li>\n<li><a href=\"http://blog.csdn.net/leejizhou/article/details/50742544\" target=\"_blank\" rel=\"noopener\">RecyclerViewçš„ä½¿ç”¨ï¼ˆ3ï¼‰ä¹‹æ·»åŠ Headerå’ŒFooter - ææµæ´²çš„åšå®¢ - åšå®¢é¢‘é“ - CSDN.NET</a></li>\n<li><a href=\"http://kymjs.com/code/2016/07/10/01\" target=\"_blank\" rel=\"noopener\">æ·±å…¥æµ…å‡º RecyclerView|å¼€æºå®éªŒå®¤-å¼ æ¶›</a></li>\n<li><a href=\"https://gold.xitu.io/entry/581324a267f3560058523526\" target=\"_blank\" rel=\"noopener\">æŒæ¡è‡ªå®šä¹‰ LayoutManager(ä¸€) ç³»åˆ—å¼€ç¯‡ å¸¸è§è¯¯åŒºã€é—®é¢˜ã€æ³¨æ„äº‹é¡¹ï¼Œå¸¸ç”¨ APIã€‚</a></li>\n<li><a href=\"http://mp.weixin.qq.com/s/sJtHfaslJZoxYDiqfieXDg\" target=\"_blank\" rel=\"noopener\">æŒæ¡è‡ªå®šä¹‰LayoutManagerä¹‹å®ç°æµå¼å¸ƒå±€</a></li>\n<li><a href=\"https://gold.xitu.io/entry/582ad543570c35006cdc812a\" target=\"_blank\" rel=\"noopener\">Android å¤æ‚çš„åˆ—è¡¨è§†å›¾æ–°å†™æ³•</a></li>\n<li><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5MzI3NjE2MA==&amp;mid=2650236424&amp;idx=1&amp;sn=3f70ba16b7cc4c2301a128eb743598ae&amp;scene=0#wechat_redirect\" target=\"_blank\" rel=\"noopener\">SuperRecyclerViewï¼Œåªä¸ºæ‰“é€ å‡ºæ›´å¥½ç”¨çš„RecyclerView</a></li>\n<li><a href=\"http://android.jobbole.com/83410/\" target=\"_blank\" rel=\"noopener\">é‚£äº›é…·ç‚«çš„RecyclerViewå¼€æºåº“æ•´ç†</a></li>\n<li><a href=\"http://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650820355&amp;idx=1&amp;sn=a9cae8d5d9d607d691715b93a35fecc3&amp;scene=0#wechat_redirect\" target=\"_blank\" rel=\"noopener\">é’ˆå¯¹RecyclerViewæ‰“é€ å±äºä½ çš„LayoutManager</a></li>\n<li><a href=\"http://blog.csdn.net/wuhengde/article/details/46833967\" target=\"_blank\" rel=\"noopener\"> RecyclerViewç¼“å­˜çš„é—®é¢˜</a></li>\n<li><a href=\"http://www.jianshu.com/p/32c963b1ebc1\" target=\"_blank\" rel=\"noopener\">Android è¸©å‘è®°å½•ï¼ˆä¸€ï¼‰- Recyclerviewçš„ç¼“å­˜æœºåˆ¶</a></li>\n<li><a href=\"http://mojijs.com/2016/07/217437/index.html\" target=\"_blank\" rel=\"noopener\">RecyclerViewè§£æ</a></li>\n<li><a href=\"http://mp.weixin.qq.com/s/o_Hu8ZT1XayNMZ6fM6rk-g\" target=\"_blank\" rel=\"noopener\">æ§åˆ¶RecyclerView Itemåœç•™ä½ç½®ï¼ˆå±…ä¸­ï¼Ÿå·¦å¯¹é½ï¼Ÿï¼‰</a></li>\n<li><a href=\"http://www.jianshu.com/p/4f554aba2bec\" target=\"_blank\" rel=\"noopener\">RecyclerViewå®šåˆ¶ï¼šé€šç”¨ItemDecorationåŠå…¨å±•å¼€RecyclerViewçš„å®ç°</a></li>\n</ul>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2017/02/14/RecyclerViewä¸“é¢˜/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2017/02/14/RecyclerViewä¸“é¢˜/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["RecyclerView","ä¸“é¢˜"]},{"title":"2017ç»§ç»­æ‰¬å¸†","url":"http://yoursite.com/2017/02/03/2017ç»§ç»­æ‰¬å¸†/","content":"<p>å…ˆç¥å¤§å®¶æ–°å¹´å¿«ä¹(^o^)/ï¼Œä»Šå¤©2017è¿‡å®Œå¹´æ¥ç¬¬ä¸€å¤©ä¸Šç­ï¼Œè·¯ä¸Šè¿˜æ˜¯è›®å†·æ¸…çš„ã€‚éƒ½è¿˜æ²‰æµ¸åœ¨è¿‡å¹´ä¸­</p>\n<h2 id=\"2016å¹´æ€»ç»“\"><a href=\"#2016å¹´æ€»ç»“\" class=\"headerlink\" title=\"2016å¹´æ€»ç»“\"></a>2016å¹´æ€»ç»“</h2><ul>\n<li>æˆ¿å­æ‹¿äº†ï¼Œè§£å†³äº†ä¸€åŠäººç”Ÿå¤§äº‹ï¼Œè¿™ä¸€å¹´è¿‡çš„æ¯”è¾ƒå¹³é™ï¼Œé™¤äº†æˆ¿å­çš„äº‹æƒ…ï¼Œå¤§ä½“æ¥è¯´ç®—è›®å¼€å¿ƒçš„ï¼ŒæŠ€æœ¯æ°´å¹³æœ‰å¢é•¿ï¼Œä½†æ˜¯ä¸å¤šï¼Œæ„Ÿè§‰è‡ªå·±å·²ç»åˆ°äº†ç“¶é¢ˆ</li>\n<li>æ­å–œåˆè‚¥ä¸Šäº†å…¨çƒæˆ¿ä»·æ¶¨å¹…æ’è¡Œæ¦œï¼Œå¹²æ‰äº†å…¨å›½ç¬¬ä¸€ï¼Œé¡ºä¾¿æ‹¿äº†å…¨çƒç¬¬ä¸€(ï¼ƒï¼ï¼)/ .ã€‚åˆè‚¥å¸‚å¸‚é•¿æ€ä¹ˆè¯´æ¥ç€ï¼Œæˆ‘ä»¬ä¸€å®šè¦æŠŠæ”¾å‡æ§åˆ¶åœ¨2wä»¥å†…ï¼Œç°åœ¨æ˜¯å“ˆå“ˆå“’äº†(â”€.â”€|||ï¼Œè¯´åˆ°æˆ¿å­å°±å¿ƒç´¯ã€‚</li>\n<li>2016å¹´æ˜¯äº’è”ç½‘å¯’å†¬ï¼Œç¨‹åºå‘˜å·¥ä½œä¸å¥½æ‰¾ï¼Œå¥½å‡ ä¸ªå°ä¼™ä¼´æ‰¾å·¥ä½œæ‰¾çš„æ¯”è¾ƒç´¯ã€‚ç‰¹åˆ«æ˜¯åŒ—ä¸Šå¹¿ï¼ŒåŸ¹è®­ç­å‡ºæ¥çš„åˆçº§äººå‘˜å¤ªå¤šï¼Œç°åœ¨æ‰¾å‘˜å·¥ä¸åƒä»¥å‰é‚£æ ·éš¾æ‹›ï¼Œä½†æ˜¯æ°´å¹³é«˜çš„ä¹Ÿä¸æ˜¯å¾ˆå¤šã€‚è‡³äºåé¢æ˜¯ä»€ä¹ˆå‘å±•æ–¹å‘ï¼Œä¿ºä¹Ÿä¸çŸ¥é“äº†ï¼Œåªæœ‰ä¸æ–­çš„æå‡è‡ªå·±ï¼Œæ‰èƒ½ä¸å˜åº”ä¸‡å˜</li>\n<li>å¾®ä¿¡å°ç¨‹åºä¸Šçº¿äº†ï¼Œè‡³äºå‘å±•æˆä»€ä¹ˆæ ·å­ï¼Œå’±ä»¬èµ°ç€çœ‹ï¼Œç›®å‰æ²¡æœ‰å­¦ä¹ çš„å€¾å‘</li>\n<li>2016å¹´VRæŠ€æœ¯æ˜¯ä¸ªçˆ†å‘æœŸï¼Œå„å¤§äº’è”ç½‘å…¬å¸éƒ½æŠ•å…¥äº†ç ”å‘ä¸­ï¼Œæ¥æ‰«å¼ æ•¬ä¸šç¦å§~</li>\n<li>è¦é—®è€çŒ´å“ªå®¶å¼ºï¼Œå°ç±³é›·å†›é»ä¸‡å¼ºï¼Œæˆ‘åªæ˜¯æƒ³ä¹°ä¸ªæ‰‹æœºè€Œå·²ï¼Œå„ç§æ²¡è´§</li>\n</ul>\n<h2 id=\"2017å¹´ç»§ç»­åŠªåŠ›\"><a href=\"#2017å¹´ç»§ç»­åŠªåŠ›\" class=\"headerlink\" title=\"2017å¹´ç»§ç»­åŠªåŠ›\"></a>2017å¹´ç»§ç»­åŠªåŠ›</h2><p>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Šï¼Œæ–°çš„ä¸€å¹´ï¼Œå­¦ä¹ æ–°çš„æŠ€æœ¯â•°(ï¿£â–½ï¿£)â•®ï¼Œç¥å¤§å®¶éƒ½èƒ½ä¸æ–­çš„æå‡è‡ªå·±ï¼Œäº‹ä¸šæœ‰æˆ</p>\n","categories":["éšç¬”"],"tags":["2017"]},{"title":"Appå¼€å‘ä¸­çš„å†…å­˜ç¼“å­˜","url":"http://yoursite.com/2017/01/03/Appå¼€å‘ä¸­çš„å†…å­˜ç¼“å­˜/","content":"<p>ç¼“å­˜å¯¹äºè€å¸æœºæ¥è¯´åº”è¯¥ä¸é™Œç”Ÿï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´æ¥è§¦çš„åº”è¯¥ä¸å¤šã€‚</p>\n<h2 id=\"ç¼“å­˜çš„ä½œç”¨\"><a href=\"#ç¼“å­˜çš„ä½œç”¨\" class=\"headerlink\" title=\"ç¼“å­˜çš„ä½œç”¨\"></a>ç¼“å­˜çš„ä½œç”¨</h2><ul>\n<li>ä¼˜åŒ–åŠ è½½é€Ÿåº¦</li>\n<li>å‡å°‘é¢‘ç¹çš„ç½‘ç»œè¯·æ±‚ï¼Œå‡å°‘å¹¶å‘ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›</li>\n<li>èŠ‚çœç”¨æˆ·æµé‡</li>\n</ul>\n<h2 id=\"ç¼“å­˜çš„å¸¸ç”¨åœºæ™¯\"><a href=\"#ç¼“å­˜çš„å¸¸ç”¨åœºæ™¯\" class=\"headerlink\" title=\"ç¼“å­˜çš„å¸¸ç”¨åœºæ™¯\"></a>ç¼“å­˜çš„å¸¸ç”¨åœºæ™¯</h2><ol>\n<li>å›¾ç‰‡è¯·æ±‚æ¡†æ¶åº”è¯¥æ˜¯æœ€å¸¸è§çš„äº†ï¼Œ<code>UIL</code>ï¼Œ<code>Picasso</code>ï¼Œ<code>Glide</code>,<code>Fresco</code>ç­‰åŸºæœ¬ä¸Šéƒ½æ˜¯2çº§ç¼“å­˜ï¼ˆç£ç›˜ï¼Œå†…å­˜ï¼‰</li>\n<li>æ¥å£æ•°æ®é‡å¤§ï¼Œä¸”æ›´æ–°ä¸æ˜¯ç‰¹åˆ«é¢‘ç¹çš„æ•°æ®ï¼Œå¯ä»¥è¿›è¡Œç¼“å­˜ã€‚ä¾‹å¦‚ï¼šç”µå•†Appä¸»é¡µ</li>\n<li>å½“ç„¶ä¹Ÿå¯ä»¥åšæ°¸ä¹…ç¼“å­˜ï¼Œä»£æ›¿<code>SharedPreference</code>å­˜å‚¨ç›¸å…³æ•°æ®<h2 id=\"ç¼“å­˜çš„ç±»å‹\"><a href=\"#ç¼“å­˜çš„ç±»å‹\" class=\"headerlink\" title=\"ç¼“å­˜çš„ç±»å‹\"></a>ç¼“å­˜çš„ç±»å‹</h2></li>\n</ol>\n<p>Androidä¸­å¸¸è§çš„ç¼“å­˜ç±»å‹åŸºæœ¬ä¸Šå°±2ç§</p>\n<ul>\n<li>å†…å­˜ç¼“å­˜</li>\n<li>ç£ç›˜ç¼“å­˜</li>\n</ul>\n<h2 id=\"å†…å­˜ç¼“å­˜\"><a href=\"#å†…å­˜ç¼“å­˜\" class=\"headerlink\" title=\"å†…å­˜ç¼“å­˜\"></a>å†…å­˜ç¼“å­˜</h2><p>æœ¬ç¯‡æˆ‘ä»¬å…ˆè®¨è®ºå†…å­˜ç¼“å­˜<code>MemoryCahce</code></p>\n<h3 id=\"å†…å­˜ç¼“å­˜çš„å®ç°æ–¹å¼\"><a href=\"#å†…å­˜ç¼“å­˜çš„å®ç°æ–¹å¼\" class=\"headerlink\" title=\"å†…å­˜ç¼“å­˜çš„å®ç°æ–¹å¼\"></a>å†…å­˜ç¼“å­˜çš„å®ç°æ–¹å¼</h3><p>å†…å­˜ç¼“å­˜çš„å®ç°å¾ˆç®€å•ï¼Œæœ¬è´¨å°±æ˜¯å­˜åœ¨ä¸€ä¸ªå˜é‡ï¼Œå˜é‡å¤„äºå†…å­˜ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ç®¡å®ƒå«å†…å­˜ç¼“å­˜ï¼Œå¸¸è§å®ç°æ–¹å¼ä¸º<code>Map</code>å­˜å‚¨å˜é‡ï¼ŒAndroid çš„SDKç›®å‰å·²ç»å†…ç½®äº†å†…å­˜ç¼“å­˜<code>LruCache</code>,åœ¨V4åŒ…ä¸­ä¹Ÿæœ‰è¿™æ ·ä¸€ä¸ªç±»ï¼ŒåŒºåˆ«æ˜¯V4åŒ…ä¸­å¤šäº†ä¸€ä¸ªæ–¹æ³•ï¼Œå…¶ä»–ä¸€æ ·ã€‚æŸ¥çœ‹è¿™ä¸ªç±»çš„æºç ä¼šå‘ç°å†…å­˜å­˜å‚¨å˜é‡çš„å®¹å™¨å°±æ˜¯ä¸€ä¸ª<code>Map</code></p>\n<h3 id=\"å†…å­˜ç¼“å­˜ç­–ç•¥\"><a href=\"#å†…å­˜ç¼“å­˜ç­–ç•¥\" class=\"headerlink\" title=\"å†…å­˜ç¼“å­˜ç­–ç•¥\"></a>å†…å­˜ç¼“å­˜ç­–ç•¥</h3><p>ç¼“å­˜çš„å®¹é‡ä¼šæœ‰ä¸€ä¸ªæœ€å¤§å€¼é™åˆ¶ï¼Œä¸å¯èƒ½æ— é™ç¼“å­˜å˜é‡ï¼Œå½“å†…å­˜æ»¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç§»å‡ºä¸€äº›æ—§çš„æ•°æ®ï¼Œæ€ä¹ˆåˆ¤å®šç§»é™¤å“ªä¸€ä¸ªæ•°æ®ï¼Œè¿™å°±éœ€è¦ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç­–ç•¥ï¼Œç­–ç•¥æœ‰å¤šç§</p>\n<ul>\n<li><code>FIFO</code> FirstInFirstOutï¼Œå…ˆè¿›å…ˆå‡ºç®—æ³•ï¼Œå½“å†…å­˜æ»¡æ—¶ï¼Œç§»é™¤æœ€å…ˆå­˜å…¥é˜Ÿåˆ—entry</li>\n<li><code>Largest</code>ï¼Œæœ€å¤§ä½¿ç”¨ç®—æ³•ï¼Œå½“å†…å­˜æ»¡æ—¶ï¼Œç§»é™¤å ç©ºé—´æœ€å¤§çš„entry</li>\n<li><code>LFU</code> LeastFrequentlyUsedï¼Œæœ€ä½ä½¿ç”¨é¢‘ç‡ç®—æ³•ï¼Œå½“å†…å­˜æ»¡æ—¶ï¼Œç§»é™¤ä½¿ç”¨é¢‘ç‡æœ€ä½çš„entry</li>\n<li><code>LRU</code> LeastRecentlyUsedï¼Œè¿‘æœŸæœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œå½“å†…å­˜æ»¡æ—¶ï¼Œç§»é™¤æœ€è¿‘ä½¿ç”¨é¢‘ç‡æœ€ä½çš„entry(LFUåŸºç¡€ä¸Šæ›´åŠ å®Œå–„)</li>\n</ul>\n<p>Android SDKä¸­çš„<code>LruCache</code>çœ‹åå­—å°±çŸ¥é“æ˜¯å®ç°äº†<code>LRU</code>ç­–ç•¥</p>\n<h3 id=\"è‡ªå·±å®ç°å†…å­˜ç¼“å­˜\"><a href=\"#è‡ªå·±å®ç°å†…å­˜ç¼“å­˜\" class=\"headerlink\" title=\"è‡ªå·±å®ç°å†…å­˜ç¼“å­˜\"></a>è‡ªå·±å®ç°å†…å­˜ç¼“å­˜</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PolicyMemoryCache</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">MemoryCache</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAX_NORMAL_CACHE_SIZE_IN_MB = <span class=\"number\">16</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> SIZE_UNIT_MB = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAX_NORMAL_CACHE_SIZE = MAX_NORMAL_CACHE_SIZE_IN_MB * SIZE_UNIT_MB;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> sizeLimit;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"memory cache\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> AtomicInteger cacheSize;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> Map&lt;K, V&gt; mMap = Collections.synchronizedMap(<span class=\"keyword\">new</span> LinkedHashMap&lt;K, V&gt;());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PolicyMemoryCache</span><span class=\"params\">(<span class=\"keyword\">int</span> sizeLimit)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sizeLimit = sizeLimit;</span><br><span class=\"line\"></span><br><span class=\"line\">        cacheSize = <span class=\"keyword\">new</span> AtomicInteger();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sizeLimit &gt; MAX_NORMAL_CACHE_SIZE) &#123;</span><br><span class=\"line\">            Log.w(TAG, <span class=\"string\">\"You set too large memory cache size (more than %1$d Mb)\"</span> + MAX_NORMAL_CACHE_SIZE_IN_MB);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> putSuccessfully = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"comment\">// Try to add value to hard cache</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> valueSize = safeSizeOf(key, value);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sizeLimit = getSizeLimit();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> curCacheSize = cacheSize.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (valueSize &lt; sizeLimit) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (curCacheSize + valueSize &gt; sizeLimit) &#123;</span><br><span class=\"line\">                K removeKey = removeNext();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (removeKey == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                V v = mMap.remove(removeKey);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    curCacheSize = cacheSize.addAndGet(-safeSizeOf(removeKey, v)); <span class=\"comment\">//cacheSize--</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            mMap.put(key, value);</span><br><span class=\"line\">            cacheSize.addAndGet(valueSize);</span><br><span class=\"line\">            putSuccessfully = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> putSuccessfully;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">remove</span><span class=\"params\">(K key)</span> </span>&#123;</span><br><span class=\"line\">        V v = mMap.remove(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            cacheSize.addAndGet(-safeSizeOf(key, v)); <span class=\"comment\">//cacheSize--</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mMap.get(key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        mMap.clear();</span><br><span class=\"line\">        cacheSize.set(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> <span class=\"title\">getSizeLimit</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sizeLimit;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;K&gt; <span class=\"title\">keys</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (mMap) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> HashSet&lt;K&gt;(mMap.keySet());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> <span class=\"title\">safeSizeOf</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = sizeOf(key, value);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Negative size: \"</span> + key + <span class=\"string\">\"=\"</span> + value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">/*Iterator&lt;Map.Entry&lt;K, V&gt;&gt; iterator = mMap.entrySet().iterator();</span></span><br><span class=\"line\"><span class=\"comment\">        while (iterator.hasNext()) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">            System.out.println(iterator.next().getValue());</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;*/</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"mMap:\"</span>+mMap);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> <span class=\"title\">sizeOf</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> size = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value <span class=\"keyword\">instanceof</span> String) &#123;</span><br><span class=\"line\">            size = ((String) value).getBytes().length;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (value <span class=\"keyword\">instanceof</span> Bitmap) &#123;</span><br><span class=\"line\">            Bitmap bitmapValue = (Bitmap) value;</span><br><span class=\"line\">            <span class=\"comment\">//size = bitmapValue.getRowBytes() * bitmapValue.getHeight();</span></span><br><span class=\"line\">            size = (<span class=\"keyword\">int</span>) sizeOf(bitmapValue);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (value <span class=\"keyword\">instanceof</span> Serializable) &#123;</span><br><span class=\"line\">            Serializable serializableValue =(Serializable) value;</span><br><span class=\"line\">            size = (<span class=\"keyword\">int</span>) sizeOf(serializableValue);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (value <span class=\"keyword\">instanceof</span> Iterable) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Object item : ((Iterable) value)) &#123;</span><br><span class=\"line\">                size += sizeOf(key, (V) item);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">long</span> <span class=\"title\">sizeOf</span><span class=\"params\">(Serializable serial)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (serial == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">long</span> size = -<span class=\"number\">1</span>;</span><br><span class=\"line\">        ByteArrayOutputStream baos = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        ObjectOutputStream oos = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            baos = <span class=\"keyword\">new</span> ByteArrayOutputStream();</span><br><span class=\"line\">            oos = <span class=\"keyword\">new</span> ObjectOutputStream(baos);</span><br><span class=\"line\">            oos.writeObject(serial);</span><br><span class=\"line\">            oos.flush();</span><br><span class=\"line\">            size = baos.size();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (FileNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> SizeCalculateException(e.getMessage());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NotSerializableException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> SizeCalculateException(<span class=\"string\">\"Cache object does not implement serializable interface\"</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                oos.close();</span><br><span class=\"line\">                baos.close();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">long</span> <span class=\"title\">sizeOf</span><span class=\"params\">(Bitmap bitmap)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (bitmap == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">long</span> size = -<span class=\"number\">1</span>;</span><br><span class=\"line\">        ByteArrayOutputStream baos = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            baos = <span class=\"keyword\">new</span> ByteArrayOutputStream();</span><br><span class=\"line\">            bitmap.compress(Bitmap.CompressFormat.PNG, <span class=\"number\">100</span>, baos);</span><br><span class=\"line\">            size = baos.size();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                baos.close();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> K <span class=\"title\">removeNext</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œå®ç°äº†å˜é‡çš„å­˜å‚¨ï¼Œå–å‡ºï¼Œå˜é‡å¤§å°è®¡ç®—ï¼ŒæŠ½è±¡äº†removeNextå‡½æ•°è¿”å›éœ€è¦ç§»é™¤çš„entryçš„Keyï¼Œç”±å­ç±»å®ç°ç­–ç•¥</p>\n<p>ä¸‹é¢çœ‹çœ‹<code>Largest</code>ç­–ç•¥çš„å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LargestMemoryCache</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">PolicyMemoryCache</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K, Integer&gt; valueSizes = Collections.synchronizedMap(<span class=\"keyword\">new</span> HashMap&lt;K, Integer&gt;());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LargestMemoryCache</span><span class=\"params\">(<span class=\"keyword\">int</span> sizeLimit)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(sizeLimit);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">super</span>.put(key, value)) &#123;</span><br><span class=\"line\">            valueSizes.put(key, safeSizeOf(key, value));</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">remove</span><span class=\"params\">(K key)</span> </span>&#123;</span><br><span class=\"line\">        valueSizes.remove(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.remove(key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        valueSizes.clear();</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.clear();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> K <span class=\"title\">removeNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Integer maxSize = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        K largestKey = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        Set&lt;Entry&lt;K, Integer&gt;&gt; entries = valueSizes.entrySet();</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (valueSizes) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Entry&lt;K, Integer&gt; entry : entries) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (largestKey == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    maxSize = entry.getValue();</span><br><span class=\"line\">                    largestKey = entry.getKey();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    Integer size = entry.getValue();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (size &gt; maxSize) &#123;</span><br><span class=\"line\">                        maxSize = size;</span><br><span class=\"line\">                        largestKey = entry.getKey();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        valueSizes.remove(largestKey);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> largestKey;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨putå˜é‡çš„æ—¶å€™ä½¿ç”¨Mapå­˜å‚¨äº†æ¯ä¸ªå˜é‡çš„å¤§å°ï¼Œåœ¨removeNextä¸­è®¡ç®—å‡ºå½“å‰å­˜å‚¨å˜é‡ä¸­sizeæœ€å¤§çš„ä¸€ä¸ªEntryçš„keyã€‚</p>\n<p>å†çœ‹çœ‹<code>LFU</code>çš„ç­–ç•¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LFUMemoryCache</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">PolicyMemoryCache</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K, Integer&gt; usingCounts = Collections.synchronizedMap(<span class=\"keyword\">new</span> HashMap&lt;K, Integer&gt;());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LFUMemoryCache</span><span class=\"params\">(<span class=\"keyword\">int</span> sizeLimit)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(sizeLimit);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">super</span>.put(key, value)) &#123;</span><br><span class=\"line\">            usingCounts.put(key, <span class=\"number\">0</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K key)</span> </span>&#123;</span><br><span class=\"line\">        V value = <span class=\"keyword\">super</span>.get(key);</span><br><span class=\"line\">        <span class=\"comment\">// Increment usage count for value if value is contained in hardCache</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            Integer usageCount = usingCounts.get(key);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (usageCount != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                usingCounts.put(key, usageCount + <span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">remove</span><span class=\"params\">(K key)</span> </span>&#123;</span><br><span class=\"line\">        usingCounts.remove(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.remove(key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        usingCounts.clear();</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.clear();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> K <span class=\"title\">removeNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Integer minUsageCount = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        K leastUsedKey = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        Set&lt;Entry&lt;K, Integer&gt;&gt; entries = usingCounts.entrySet();</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (usingCounts) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Entry&lt;K, Integer&gt; entry : entries) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (leastUsedKey == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    leastUsedKey = entry.getKey();</span><br><span class=\"line\">                    minUsageCount = entry.getValue();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    Integer lastValueUsage = entry.getValue();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (lastValueUsage &lt; minUsageCount) &#123;</span><br><span class=\"line\">                        minUsageCount = lastValueUsage;</span><br><span class=\"line\">                        leastUsedKey = entry.getKey();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        usingCounts.remove(leastUsedKey);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> leastUsedKey;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åŒæ ·ä¹Ÿæ˜¯ç”¨ä¸€ä¸ªMapæ¥ä¿å­˜æ¯ä¸ªå˜é‡çš„ä½¿ç”¨æ¬¡æ•°ï¼Œåœ¨æ¯æ¬¡getçš„æ—¶å€™ï¼Œè¿›è¡Œ+1ï¼ŒremoveNextå‡½æ•°ä¸­è®¡ç®—å‡ºä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„Entryçš„Key</p>\n<h2 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h2><p>å†…å­˜ç¼“å­˜åŸºæœ¬å°±è¿™äº›ï¼Œæ²¡ä»€ä¹ˆéš¾çš„çŸ¥è¯†ï¼Œæ— éå°±æ˜¯ç­–ç•¥çš„å®ç°ä¼šå¤æ‚ä¸€äº›ï¼Œä»¥ä¸Šåªæ˜¯ä¸€ç§å®ç°æ–¹å¼ï¼Œä¹Ÿæœ‰åˆ«çš„å®ç°æ–¹å¼ï¼Œæ¬¢è¿äº¤æµ</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2017/01/03/Appå¼€å‘ä¸­çš„å†…å­˜ç¼“å­˜/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2017/01/03/Appå¼€å‘ä¸­çš„å†…å­˜ç¼“å­˜/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["Cache","MemoryCahce","LruCache"]},{"title":"ä¼˜é›…çš„è´£ä»»é“¾æ¨¡å¼","url":"http://yoursite.com/2016/12/06/ä¼˜é›…çš„è´£ä»»é“¾æ¨¡å¼/","content":"<p>24ç§è®¾è®¡æ¨¡å¼6å¤§åŸåˆ™ä¸­çš„è´£ä»»é“¾å¹³æ—¶å¼€å‘ä¸­æ¥è§¦åˆ°çš„å¹¶ä¸å¤šï¼Œå¦‚æœä½ è¯»è¿‡<code>Volley</code>çš„æºç åº”è¯¥ä¼šæœ‰ä½“ä¼šï¼ŒAndroidåŒå­¦ä»¬éƒ½è¯´<code>Volley</code>ä»£ç ä¼˜é›…ï¼Œæˆ‘æƒ³è´£ä»»é“¾çš„è¿ç”¨åº”è¯¥æ˜¯å®ƒä¼˜é›…çš„éƒ¨åˆ†åŸå› ã€‚</p>\n<h2 id=\"è´£ä»»é“¾åŸºæœ¬ä»‹ç»\"><a href=\"#è´£ä»»é“¾åŸºæœ¬ä»‹ç»\" class=\"headerlink\" title=\"è´£ä»»é“¾åŸºæœ¬ä»‹ç»\"></a>è´£ä»»é“¾åŸºæœ¬ä»‹ç»</h2><p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…äº†è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚<br><br>è¯´ç™½ä¸€ç‚¹å°±æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿›å…¥ä¸€æ¡é“¾ï¼Œè¿™æ¡é“¾ä¸Šå­˜åœ¨å¤šä¸ªå¤„ç†å™¨ï¼Œä»ç¬¬ä¸€ä¸ªå¤„ç†å™¨å¼€å§‹ï¼Œä¸€ç›´å‘åä¼ é€’ï¼Œä½¿å¾—æ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè°å¯ä»¥å¤„ç†è°å°±å¤„ç†ï¼Œå¤„ç†å®Œä¸å†å‘åä¼ é€’ã€‚æ­¤ä»»åŠ¡è¢«å¤„ç†å®Œæ¯•ã€‚<br><br>ç®€å•çš„æŠ½è±¡å¤„ç†å™¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> Handler nextHandler;</span><br><span class=\"line\">\t<span class=\"comment\">//æ¯ä¸ªå¤„ç†è€…éƒ½å¿…é¡»å¯¹è¯·æ±‚åšå‡ºå¤„ç†</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> Response <span class=\"title\">handleMessage</span><span class=\"params\">(Request request)</span></span>&#123;</span><br><span class=\"line\">\t\tResponse response = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"comment\">//åˆ¤æ–­æ˜¯å¦æ˜¯è‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.getHandlerLevel().equals(request.getRequestLevel()))&#123;</span><br><span class=\"line\">\t\t\tresponse = <span class=\"keyword\">this</span>.echo(request);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span>&#123; <span class=\"comment\">//ä¸å±äºè‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå¤„ç†è€…</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.nextHandler != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\t\tresponse = <span class=\"keyword\">this</span>.nextHandler.handleMessage(request);</span><br><span class=\"line\">\t\t\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//æ²¡æœ‰é€‚å½“çš„å¤„ç†è€…ï¼Œä¸šåŠ¡è‡ªè¡Œå¤„ç†</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> response;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//è®¾ç½®ä¸‹ä¸€ä¸ªå¤„ç†è€…æ˜¯è°</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNext</span><span class=\"params\">(Handler _handler)</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.nextHandler = _handler;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//æ¯ä¸ªå¤„ç†è€…éƒ½æœ‰ä¸€ä¸ªå¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> Level <span class=\"title\">getHandlerLevel</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">\t<span class=\"comment\">//æ¯ä¸ªå¤„ç†è€…éƒ½å¿…é¡»å®ç°å¤„ç†ä»»åŠ¡</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> Response <span class=\"title\">echo</span><span class=\"params\">(Request request)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æŠ½è±¡çš„å¤„ç†è€…å®ç°ä¸‰ä¸ªèŒè´£ï¼šä¸€æ˜¯å®šä¹‰ä¸€ä¸ªè¯·æ±‚çš„å¤„ç†æ–¹æ³•<code>handleMessage</code>ï¼Œå”¯ä¸€å¯¹å¤–å¼€æ”¾çš„æ–¹æ³•ï¼›äºŒæ˜¯å®šä¹‰ä¸€ä¸ªé“¾çš„ç¼–æ’æ–¹æ³•<code>setNext</code>ï¼Œè®¾ç½®ä¸‹ä¸€ä¸ªå¤„ç†è€…ï¼›ä¸‰æ˜¯å®šä¹‰äº†å…·ä½“çš„è¯·æ±‚è€…å¿…é¡»å®ç°çš„ä¸¤ä¸ªæ–¹æ³•ï¼šå®šä¹‰è‡ªå·±èƒ½å¤Ÿå¤„ç†çš„çº§åˆ«<code>getHandlerLevel</code>å’Œå…·ä½“çš„å¤„ç†ä»»åŠ¡<code>echo</code>ã€‚</p>\n<p>ä»¬å®šä¹‰ä¸‰ä¸ªå…·ä½“çš„å¤„ç†è€…ï¼Œä»¥ä¾¿å¯ä»¥ç»„æˆä¸€ä¸ªé“¾</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//å®šä¹‰è‡ªå·±çš„å¤„ç†é€»è¾‘</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Response <span class=\"title\">echo</span><span class=\"params\">(Request request)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//å®Œæˆå¤„ç†é€»è¾‘</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//è®¾ç½®è‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Level <span class=\"title\">getHandlerLevel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//è®¾ç½®è‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//å®šä¹‰è‡ªå·±çš„å¤„ç†é€»è¾‘</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Response <span class=\"title\">echo</span><span class=\"params\">(Request request)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//å®Œæˆå¤„ç†é€»è¾‘</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//è®¾ç½®è‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Level <span class=\"title\">getHandlerLevel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//è®¾ç½®è‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler3</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//å®šä¹‰è‡ªå·±çš„å¤„ç†é€»è¾‘</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Response <span class=\"title\">echo</span><span class=\"params\">(Request request)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//å®Œæˆå¤„ç†é€»è¾‘</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//è®¾ç½®è‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Level <span class=\"title\">getHandlerLevel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//è®¾ç½®è‡ªå·±çš„å¤„ç†çº§åˆ«</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨åœºæ™¯ç±»æˆ–é«˜å±‚æ¨¡å—ä¸­å¯¹é“¾è¿›è¡Œç»„è£…ï¼Œå¹¶ä¼ é€’è¯·æ±‚ï¼Œè¿”å›ç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Client</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//å£°æ˜æ‰€æœ‰çš„å¤„ç†èŠ‚ç‚¹</span></span><br><span class=\"line\">\t\tHandler handler1 = <span class=\"keyword\">new</span> ConcreteHandler1();</span><br><span class=\"line\">\t\tHandler handler2 = <span class=\"keyword\">new</span> ConcreteHandler2();</span><br><span class=\"line\">\t\tHandler handler3 = <span class=\"keyword\">new</span> ConcreteHandler3();</span><br><span class=\"line\">\t\t<span class=\"comment\">//è®¾ç½®é“¾ä¸­çš„é˜¶æ®µé¡ºåº1--&gt;2--&gt;3</span></span><br><span class=\"line\">\t\thandler1.setNext(handler2);</span><br><span class=\"line\">\t\thandler2.setNext(handler3);</span><br><span class=\"line\">\t\t<span class=\"comment\">//æäº¤è¯·æ±‚ï¼Œè¿”å›ç»“æœ</span></span><br><span class=\"line\">\t\tResponse response = handler1.handlerMessage(<span class=\"keyword\">new</span> Request());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªå°è£…ç±»å¯¹è´£ä»»æ¨¡å¼è¿›è¡Œå°è£…ï¼Œä¹Ÿå°±æ˜¯æ›¿ä»£<code>Client</code>ç±»ï¼Œç›´æ¥è¿”å›é“¾ä¸­çš„ç¬¬ä¸€ä¸ªå¤„ç†è€…ï¼Œå…·ä½“é“¾çš„è®¾ç½®ä¸éœ€è¦é«˜å±‚æ¬¡æ¨¡å—å…³ç³»ï¼Œè¿™æ ·ï¼Œæ›´ç®€åŒ–äº†é«˜å±‚æ¬¡æ¨¡å—çš„è°ƒç”¨ï¼Œå‡å°‘æ¨¡å—é—´çš„è€¦åˆï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ã€‚</p>\n<h2 id=\"Volleyä¸­çš„è´£ä»»é“¾\"><a href=\"#Volleyä¸­çš„è´£ä»»é“¾\" class=\"headerlink\" title=\"Volleyä¸­çš„è´£ä»»é“¾\"></a>Volleyä¸­çš„è´£ä»»é“¾</h2><p>åœ¨<code>Volley</code>ä¸­ï¼ŒæŠŠè´£ä»»é“¾ä¸çº¿ç¨‹é˜Ÿåˆ—ç»“åˆäº†èµ·æ¥ï¼Œå½¢æˆä¸€æ¡å¾ªç¯çš„æµæ°´å¤„ç†çº¿ï¼Œè¿™ä¸ªè´£ä»»é“¾ä¸­å­˜åœ¨äº†ä¸¤ä¸ªå¤„ç†å™¨<code>Handler</code>ï¼Œä¹Ÿå«è°ƒåº¦è€…<code>Dispatcher</code>æœ‰å…³<code>Volley</code>çš„åˆ†æï¼Œä½ å¯ä»¥é˜…è¯»æºç ï¼Œä¹Ÿå¯ä»¥çœ‹è¿™ç¯‡åˆ†ææ–‡ç« äº†è§£ä¸‹<a href=\"http://codekk.com/open-source-project-analysis/detail/Android/grumoon/Volley%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90\" target=\"_blank\" rel=\"noopener\">Volley æºç è§£æ</a></p>\n<h3 id=\"é˜Ÿåˆ—ä¸çº¿ç¨‹çš„é…åˆ\"><a href=\"#é˜Ÿåˆ—ä¸çº¿ç¨‹çš„é…åˆ\" class=\"headerlink\" title=\"é˜Ÿåˆ—ä¸çº¿ç¨‹çš„é…åˆ\"></a>é˜Ÿåˆ—ä¸çº¿ç¨‹çš„é…åˆ</h3><p>Javaä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šé˜Ÿåˆ—ç±»ï¼Œè¿™é‡Œä¸è¯¦ç»†ä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»è°·æ­Œä¸‹ï¼ŒVolleyä¸­å®é™…åˆ›å»ºäº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªç¼“å­˜é˜Ÿåˆ—ï¼Œä¸€ä¸ªç½‘ç»œè¯·æ±‚é˜Ÿåˆ—</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** The cache triage queue. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> PriorityBlockingQueue&lt;Request&lt;?&gt;&gt; mCacheQueue =</span><br><span class=\"line\">    <span class=\"keyword\">new</span> PriorityBlockingQueue&lt;Request&lt;?&gt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** The queue of requests that are actually going out to the network. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> PriorityBlockingQueue&lt;Request&lt;?&gt;&gt; mNetworkQueue =</span><br><span class=\"line\">    <span class=\"keyword\">new</span> PriorityBlockingQueue&lt;Request&lt;?&gt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>ç„¶ååˆ†åˆ«å¼€å¯äº†1ä¸ªç¼“å­˜çº¿ç¨‹å¾ªç¯ä»ç¼“å­˜é˜Ÿåˆ—ä¸­å–ä»»åŠ¡ï¼Œ4ä¸ªç½‘ç»œè¯·æ±‚çº¿ç¨‹å¾ªç¯ä»ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—ä¸­å–ä»»åŠ¡ã€‚åœ¨å–çš„æ—¶å€™é€šè¿‡é˜Ÿåˆ—çš„take()æ–¹æ³•å–å‡ºä»»åŠ¡ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯é˜»å¡çš„æ–¹æ³•ï¼Œå½“é˜Ÿåˆ—ä¸­æ— ä»»åŠ¡çš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šé˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°æœ‰æ–°çš„ä»»åŠ¡åˆ°æ¥</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Take a request from the queue.</span></span><br><span class=\"line\">request = mQueue.take();</span><br></pre></td></tr></table></figure>\n<h3 id=\"è´£ä»»é“¾å½¢æˆ\"><a href=\"#è´£ä»»é“¾å½¢æˆ\" class=\"headerlink\" title=\"è´£ä»»é“¾å½¢æˆ\"></a>è´£ä»»é“¾å½¢æˆ</h3><p>ä¸€ä¸ªæ–°çš„è¯·æ±‚åˆ°æ¥çš„æ—¶å€™ä¼šå…ˆè¿›å…¥ç¼“å­˜é˜Ÿåˆ—ï¼Œåœ¨ç¼“å­˜å¤„ç†çº¿ç¨‹ä¸­ï¼Œæœ‰ç¼“å­˜åˆ™ç›´æ¥æŠ›å‡ºç¼“å­˜æ•°æ®åˆ°ä¸»çº¿ç¨‹ï¼Œå½“å‘ç°æ­¤Requestæ²¡æœ‰ç¼“å­˜çš„è¯ï¼Œç›´æ¥è¿›å…¥ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—ï¼Œç”±ç½‘ç»œè¯·æ±‚çº¿ç¨‹è¿›è¡Œè¯·æ±‚ï¼Œè·å–åˆ°æ•°æ®ä¹‹åæŠ›å‡ºæ•°æ®åˆ°ä¸»çº¿ç¨‹ã€‚è¿™å°±å½¢æˆäº†ä¸¤ä¸ªå¤„ç†è€…æ„æˆçš„è´£ä»»é“¾ã€‚ä¹Ÿæ˜¯Volleyçš„æ ¸å¿ƒã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Attempt to retrieve this item from cache.</span></span><br><span class=\"line\">Cache.Entry entry = mCache.get(request.getCacheKey());</span><br><span class=\"line\"><span class=\"keyword\">if</span> (entry == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">    request.addMarker(<span class=\"string\">\"cache-miss\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// Cache miss; send off to the network dispatcher.</span></span><br><span class=\"line\">    mNetworkQueue.put(request);</span><br><span class=\"line\">    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"è´£ä»»é“¾çš„ä½¿ç”¨åœºæ™¯\"><a href=\"#è´£ä»»é“¾çš„ä½¿ç”¨åœºæ™¯\" class=\"headerlink\" title=\"è´£ä»»é“¾çš„ä½¿ç”¨åœºæ™¯\"></a>è´£ä»»é“¾çš„ä½¿ç”¨åœºæ™¯</h2><p>ç›¸ä¿¡æˆ‘ä»¬éƒ½æœ‰è¿‡è¯»è¿‡çš„ç›¸å…³çŸ¥è¯†ä¸çŸ¥é“åº”ç”¨åœºæ™¯ï¼Œå³ä½¿çŸ¥é“åº”ç”¨åœºæ™¯ï¼Œåˆ°äº†é‚£ä¸ªæ—¶å€™ä¹Ÿæƒ³ä¸èµ·æ¥ç”¨çš„æƒ…å†µã€‚è´£ä»»é“¾æˆ‘ä¸ªäººè§‰å¾—è™½ç„¶ç”¨çš„åœºæ™¯ä¸æ˜¯ç‰¹åˆ«é¢‘ç¹ï¼Œä½†æ˜¯å®ƒèƒ½è§£å†³ä¸€äº›æ ¸å¿ƒçš„ä¸œè¥¿ï¼Œä¸€äº›å¤æ‚çš„ä¸œè¥¿åœ¨å®ƒé¢å‰ä¼šå˜å¾—ååˆ†ç®€å•ã€‚</p>\n<p>æ›¾ç»æˆ‘å¸®äººåšè¿‡ä¸€ä¸ªç›¸æœºè¿æ‹çš„APPï¼Œéœ€æ±‚æ˜¯ä¸€ç§’é’Ÿè‡³å°‘æ‹æ‘„5å¼ ä»¥ä¸Šçš„ç…§ç‰‡ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°æœ¬åœ°ï¼Œæˆ‘çš„å®ç°æ˜¯é€šè¿‡è·å–ç›¸æœºæ¯ä¸€å¸§è½¬æ¢æˆå›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°ï¼Œè¿™å…¶ä¸­æœ‰ä¸å°‘å…¶ä»–é—®é¢˜ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯å­˜å‚¨çš„é—®é¢˜ï¼Œå¦‚æ­¤é«˜é€Ÿä¸‹ï¼Œå­˜å‚¨çš„å›¾ç‰‡å°è¿˜å¥½è¯´ï¼Œç¨å¾®å¤§ç‚¹ï¼Œæ”¾ä¸»çº¿ç¨‹è‚¯å®šæ˜¯å¤„ç†ä¸äº†çš„ï¼Œè¿˜æœ‰å°±æ˜¯å‰é¢çš„å›¾ç‰‡è¿˜æ²¡å­˜å‚¨å®Œï¼Œåé¢åˆä¸å®šæ—¶çš„æ¥æ–°çš„å›¾ç‰‡éœ€è¦å­˜å‚¨ã€‚å­˜å‚¨è¿‡ç¨‹ä¸­è¿˜è¦å®æ—¶å±•ç¤ºå­˜å‚¨è¿›åº¦ã€‚å½“æ—¶ç¢°åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ååº”æ˜¯é˜Ÿåˆ—æ¥æï¼Œç¬¬äºŒå°±æ˜¯è´£ä»»é“¾ï¼ŒåŸç†ä¸Volleyå¤„ç†è¯·æ±‚å¤§åŒå°å¼‚ã€‚è´£ä»»é“¾ä¸çº¿ç¨‹é˜Ÿåˆ—é…åˆè®©è¿™ä¸ªé—®é¢˜å˜çš„so easyï¼Œå†æ¬¡ä½©æœä¸‹è°·æ­Œçš„å·¥ç¨‹å¸ˆã€‚</p>\n<h2 id=\"å°è£…è´£ä»»é“¾é…åˆçº¿ç¨‹é˜Ÿåˆ—\"><a href=\"#å°è£…è´£ä»»é“¾é…åˆçº¿ç¨‹é˜Ÿåˆ—\" class=\"headerlink\" title=\"å°è£…è´£ä»»é“¾é…åˆçº¿ç¨‹é˜Ÿåˆ—\"></a>å°è£…è´£ä»»é“¾é…åˆçº¿ç¨‹é˜Ÿåˆ—</h2><p>æœ‰äº†é‚£æ¬¡ç»éªŒä¹‹åï¼Œæ„è¯†åˆ°äº†è´£ä»»é“¾åœ¨å¤„ç†ä¸€äº›é—®é¢˜æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦æ ¹æ®å…·ä½“çš„åœºæ™¯å®Œæ•´çš„æ­å»ºä¸€ä¸ªè´£ä»»é“¾æ¨¡å‹ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘è¿™ç§å°è£…ç‹‚é­”çš„é£æ ¼ã€‚å°è£…èµ·æ¥ç”¨ï¼Œåé¢é‡åˆ°ä»»ä½•éœ€è¦å¤„ç†é˜Ÿåˆ—çš„åœ°æ–¹ï¼Œç›´æ¥æ‹¿æ¥ç”¨ï¼Œçˆ½çˆ†äº†ã€‚é‚£ä¹ˆå°è£…å‰ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¥½æ”¯æŒä»¥ä¸‹ç‰¹æ€§</p>\n<ul>\n<li>åŸºæœ¬çš„é˜Ÿåˆ—ä¸çº¿ç¨‹é…åˆï¼Œå½¢æˆæµæ°´çº¿</li>\n<li>ä¼˜å…ˆçº§ï¼Œä»»åŠ¡å¤„ç†æœ‰å…ˆåï¼Œéœ€è¦æ”¯æŒè®¾ç½®ä¼˜å…ˆçº§</li>\n<li>å¤šé˜Ÿåˆ—é…åˆï¼ŒæŠŠä»»åŠ¡ä»ä¸€ä¸ªé˜Ÿåˆ—æŠ›å‡ºåˆ°å¦ä¸€ä¸ªé˜Ÿåˆ—è¿›è¡Œå¤„ç†</li>\n<li>æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªå¤„ç†ä»»åŠ¡ï¼Œè‡ªå®šä¹‰æ‹¦æˆªæ¡ä»¶</li>\n<li>åˆ†å‘å™¨ï¼Œè´Ÿè´£æŠŠå¤„ç†ç»“æœåˆ†å‘åˆ°ä¸»çº¿ç¨‹</li>\n<li>å¤„ç†è¿›åº¦çš„å®æ—¶ç›‘å¬</li>\n<li>ä»»åŠ¡å–æ¶ˆï¼Œéœ€è¦è‡ªç”±å–æ¶ˆå·²ç»å·²ç»æ”¾å…¥é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¸æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡</li>\n<li>é‡å¤ä»»åŠ¡è¿‡æ»¤ï¼Œç­‰å¾…</li>\n</ul>\n<h3 id=\"åŸºæœ¬çš„é˜Ÿåˆ—ä¸çº¿ç¨‹é…åˆå®ç°\"><a href=\"#åŸºæœ¬çš„é˜Ÿåˆ—ä¸çº¿ç¨‹é…åˆå®ç°\" class=\"headerlink\" title=\"åŸºæœ¬çš„é˜Ÿåˆ—ä¸çº¿ç¨‹é…åˆå®ç°\"></a>åŸºæœ¬çš„é˜Ÿåˆ—ä¸çº¿ç¨‹é…åˆå®ç°</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JobQueue</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span>&gt;&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_THREAD_POOL_SIZE = <span class=\"number\">4</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> PriorityBlockingQueue&lt;T&gt; mJobQueue = <span class=\"keyword\">new</span> PriorityBlockingQueue&lt;T&gt;();  <span class=\"comment\">//å¤„ç†é˜Ÿåˆ—</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> JobDispatcher&lt;T&gt;[] mJobDispatchers; <span class=\"comment\">//å¤„ç†çº¿ç¨‹</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Interceptor&lt;T&gt; mInterceptor; <span class=\"comment\">//æ‹¦æˆªå™¨</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Delivery&lt;T&gt; mDelivery; <span class=\"comment\">//åˆ†å‘å™¨</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;JobHandlerListener&lt;T&gt;&gt; mJobHandlerListener = <span class=\"keyword\">new</span> ArrayList&lt;&gt;(); <span class=\"comment\">//å¤„ç†è¿›åº¦ç›‘å¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AtomicInteger mSequenceGenerator = <span class=\"keyword\">new</span> AtomicInteger(); <span class=\"comment\">//å¯¹ä»»åŠ¡æ’åºç”¨ï¼Œç”¨äºè®¾ç½®ä¼˜å…ˆçº§</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">JobQueue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>(<span class=\"keyword\">new</span> DefaultInterceptor&lt;T&gt;());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">JobQueue</span><span class=\"params\">(<span class=\"keyword\">int</span> threadPoolSize)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>(threadPoolSize, <span class=\"keyword\">new</span> DefaultInterceptor&lt;T&gt;());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">JobQueue</span><span class=\"params\">(Interceptor interceptor)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>(DEFAULT_THREAD_POOL_SIZE, interceptor);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">JobQueue</span><span class=\"params\">(<span class=\"keyword\">int</span> threadPoolSize, Interceptor interceptor)</span> </span>&#123;</span><br><span class=\"line\">        mJobDispatchers = <span class=\"keyword\">new</span> JobDispatcher[threadPoolSize];</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mInterceptor = interceptor;</span><br><span class=\"line\">        mDelivery = <span class=\"keyword\">new</span> DefaultDelivery&lt;T&gt;(<span class=\"keyword\">new</span> android.os.Handler(Looper.getMainLooper()));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">start</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        stop();</span><br><span class=\"line\"></span><br><span class=\"line\">        ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) Executors.newFixedThreadPool(mJobDispatchers.length);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; mJobDispatchers.length; i++) &#123;</span><br><span class=\"line\">            JobDispatcher&lt;T&gt; savedDispatcher = <span class=\"keyword\">new</span> JobDispatcher&lt;T&gt;(mJobQueue, mInterceptor, mDelivery, mJobHandlerListener);</span><br><span class=\"line\">            mJobDispatchers[i] = savedDispatcher;</span><br><span class=\"line\">            threadPoolExecutor.submit(savedDispatcher);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">stop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; mJobDispatchers.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mJobDispatchers[i] != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                mJobDispatchers[i].quit();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> JobQueue <span class=\"title\">add</span><span class=\"params\">(T element)</span> </span>&#123;</span><br><span class=\"line\">        element.setSequence(getSequenceNumber());</span><br><span class=\"line\">        mJobQueue.add(element);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> JobQueue <span class=\"title\">action</span><span class=\"params\">(Action&lt;T&gt; action)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; mJobDispatchers.length; i++) &#123;</span><br><span class=\"line\">            mJobDispatchers[i].setAction(action);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> JobQueue <span class=\"title\">addListener</span><span class=\"params\">(JobHandlerListener listener)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mJobHandlerListener.contains(listener)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        mJobHandlerListener.add(listener);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">getSequenceNumber</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mSequenceGenerator.incrementAndGet();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™ç›¸å½“äºæˆ‘ä»¬å‰é¢è¯´çš„Clientå°è£…ç±»ï¼Œä»»åŠ¡ä»æ­¤ç±»<code>add()</code>å‡½æ•°è¿›å…¥<code>mJobQueue</code>é˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—å¯¹åº”é»˜è®¤4ä¸ª<code>JobDispatcher</code>å¤„ç†çº¿ç¨‹ã€‚å¯ä»¥ç†è§£ä¸ºå¹¶å‘é‡ä¸º4ï¼Œä¸€æ¬¡å¯åŒæ—¶å¹¶å‘å¤„ç†å››ä¸ªä»»åŠ¡ï¼Œå«Œå°çš„å¯ä»¥è®¾ç½®å¤§ç‚¹ã€‚</p>\n<h3 id=\"å¤„ç†çº¿ç¨‹\"><a href=\"#å¤„ç†çº¿ç¨‹\" class=\"headerlink\" title=\"å¤„ç†çº¿ç¨‹\"></a>å¤„ç†çº¿ç¨‹</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JobDispatcher</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span>&gt;&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> BlockingQueue&lt;T&gt; mJobQueue; <span class=\"comment\">//å¤„ç†é˜Ÿåˆ—</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Interceptor&lt;T&gt; mInterceptor; <span class=\"comment\">//æ‹¦æˆªå™¨</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Delivery&lt;T&gt; mDelivery;  <span class=\"comment\">//åˆ†å‘å™¨</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;JobHandlerListener&lt;T&gt;&gt; mJobHandlerListeners = <span class=\"keyword\">new</span> ArrayList&lt;&gt;(); <span class=\"comment\">//å¤„ç†ç›‘å¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Action&lt;T&gt; mAction; <span class=\"comment\">//æ‰§è¡ŒåŠ¨ä½œå›è°ƒï¼Œå…·ä½“çš„å¤„ç†é€»è¾‘ï¼Œç”±ä¸Šå±‚å®šä¹‰é€šè¿‡æ­¤ç±»callæ–¹æ³•å›è°ƒåˆ°è¿™é‡Œæ‰§è¡Œ</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> mQuit = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">JobDispatcher</span><span class=\"params\">(BlockingQueue&lt;T&gt; jobQueue, Interceptor&lt;T&gt; interceptor, Delivery&lt;T&gt; delivery, List&lt;JobHandlerListener&lt;T&gt;&gt; jobHandlerListeners)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mJobQueue = jobQueue;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mInterceptor = interceptor;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mDelivery = delivery;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (jobHandlerListeners != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.mJobHandlerListeners = jobHandlerListeners;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        CLog.v(<span class=\"string\">\"start new dispatcher\"</span>);</span><br><span class=\"line\">        Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                T element = mJobQueue.take(); <span class=\"comment\">//è·å–ä»»åŠ¡</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (element == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (element.isCancel()) &#123; <span class=\"comment\">//åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å–æ¶ˆ</span></span><br><span class=\"line\">                    mDelivery.deliveryCancel(mJobHandlerListeners,element); <span class=\"comment\">//åˆ†å‘åˆ°ä¸»çº¿ç¨‹è°ƒç”¨å–æ¶ˆç›‘å¬</span></span><br><span class=\"line\">                    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mInterceptor != <span class=\"keyword\">null</span> &amp;&amp; mInterceptor.interceptCondition(element)) &#123; <span class=\"comment\">//æ‹¦æˆªå™¨ä¸ä¸ºç©ºä¸”æ‹¦æˆªæ¡ä»¶ä¸ºtrueï¼Œè¿›è¡Œæ‹¦æˆª</span></span><br><span class=\"line\">                    mInterceptor.onIntercept(element);</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                mDelivery.deliveryPrepare(mJobHandlerListeners,element);  <span class=\"comment\">//åˆ†å‘åˆ°ä¸»çº¿ç¨‹è°ƒç”¨å‡†å¤‡ç›‘å¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.mAction == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">                <span class=\"keyword\">this</span>.mAction.call(element);  <span class=\"comment\">//æ‰§è¡ŒåŠ¨ä½œ</span></span><br><span class=\"line\">                </span><br><span class=\"line\">                mDelivery.deliveryFinish(mJobHandlerListeners,element); <span class=\"comment\">//åˆ†å‘åˆ°ä¸»çº¿ç¨‹è°ƒç”¨å®Œæˆç›‘å¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mQuit) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAction</span><span class=\"params\">(Action&lt;T&gt; action)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mAction = action;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quit</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        mQuit = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        interrupt();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¤„ç†çº¿ç¨‹å†…éƒ¨æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œä¸æ–­çš„ä»é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡ï¼Œè·å–åè¿›è¡Œä¸€äº›åˆ—åˆ¤å®šåæ‰§è¡Œç›¸åº”åŠ¨ä½œï¼Œå®Œæˆååˆ†å‘åˆ°ä¸»çº¿ç¨‹å›è°ƒ</p>\n<h3 id=\"ä¸»çº¿ç¨‹åˆ†å‘å™¨\"><a href=\"#ä¸»çº¿ç¨‹åˆ†å‘å™¨\" class=\"headerlink\" title=\"ä¸»çº¿ç¨‹åˆ†å‘å™¨\"></a>ä¸»çº¿ç¨‹åˆ†å‘å™¨</h3><p>ä¸‹é¢çœ‹ä¸‹åˆ†å‘å™¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Delivery</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span>&gt;&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">deliveryPrepare</span><span class=\"params\">(List&lt;JobHandlerListener&lt;T&gt;&gt; listeners, T job)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">deliveryCancel</span><span class=\"params\">(List&lt;JobHandlerListener&lt;T&gt;&gt; listeners, T job)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">deliveryFinish</span><span class=\"params\">(List&lt;JobHandlerListener&lt;T&gt;&gt; listeners, T job)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DefaultDelivery</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span>&gt;&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Delivery</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Executor mResponsePoster;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DefaultDelivery</span><span class=\"params\">(<span class=\"keyword\">final</span> Handler handler)</span> </span>&#123;</span><br><span class=\"line\">        mResponsePoster = <span class=\"keyword\">new</span> Executor() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable command)</span> </span>&#123;</span><br><span class=\"line\">                handler.post(command);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DefaultDelivery</span><span class=\"params\">(Executor executor)</span> </span>&#123;</span><br><span class=\"line\">        mResponsePoster = executor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deliveryPrepare</span><span class=\"params\">(<span class=\"keyword\">final</span> List&lt;JobHandlerListener&lt;T&gt;&gt; listeners, <span class=\"keyword\">final</span> T job)</span> </span>&#123;</span><br><span class=\"line\">        mResponsePoster.execute(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (job.isCancel()) &#123;</span><br><span class=\"line\">                    deliveryCancel(listeners,job);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                CLog.d(<span class=\"string\">\"deliveryPrepare,current thread:%s\"</span>, Thread.currentThread().getName());</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, size = listeners.size(); i &lt; size; i++) &#123;</span><br><span class=\"line\">                    listeners.get(i).onPrepare(job);</span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deliveryCancel</span><span class=\"params\">(<span class=\"keyword\">final</span> List&lt;JobHandlerListener&lt;T&gt;&gt; listeners, <span class=\"keyword\">final</span> T job)</span> </span>&#123;</span><br><span class=\"line\">        mResponsePoster.execute(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                CLog.d(<span class=\"string\">\"deliveryCancel,current thread:%s\"</span>, Thread.currentThread().getName());</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, size = listeners.size(); i &lt; size; i++) &#123;</span><br><span class=\"line\">                    listeners.get(i).onCancel(job);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deliveryFinish</span><span class=\"params\">(<span class=\"keyword\">final</span> List&lt;JobHandlerListener&lt;T&gt;&gt; listeners, <span class=\"keyword\">final</span> T job)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (job.isCancel()) &#123;</span><br><span class=\"line\">            deliveryCancel(listeners,job);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        mResponsePoster.execute(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                CLog.d(<span class=\"string\">\"deliveryFinish,current thread:%s\"</span>, Thread.currentThread().getName());</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, size = listeners.size(); i &lt; size; i++) &#123;</span><br><span class=\"line\">                    listeners.get(i).onFinish(job);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ‹¦æˆªå™¨\"><a href=\"#æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"æ‹¦æˆªå™¨\"></a>æ‹¦æˆªå™¨</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Interceptor</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span>&gt;&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">interceptCondition</span><span class=\"params\">(T job)</span></span>;  <span class=\"comment\">//æ‹¦æˆªæ¡ä»¶</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onIntercept</span><span class=\"params\">(T job)</span></span>; <span class=\"comment\">//æ‹¦æˆªååŠ¨ä½œ</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DefaultInterceptor</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span>&gt;&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Interceptor</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">interceptCondition</span><span class=\"params\">(T job)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onIntercept</span><span class=\"params\">(T job)</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é»˜è®¤æˆ‘ä»¬ä¸å¯¹æ‹¦æˆªåšä»€ä¹ˆåŠ¨ä½œï¼Œä¸Šå±‚è°ƒç”¨è€…éœ€è¦æ‹¦æˆªçš„æ—¶å€™å¯ä»¥ä¼ ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‹¦æˆªå™¨è¿›è¡Œæ‹¦æˆªæ“ä½œ</p>\n<h3 id=\"ä¼˜å…ˆçº§\"><a href=\"#ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"ä¼˜å…ˆçº§\"></a>ä¼˜å…ˆçº§</h3><p>ä¸Šé¢ä»£ç ä¸­å‡ºç°çš„<code>Job</code>ç±»å…¶å®æ˜¯ä¸ªæŠ½è±¡ç±»çš„çˆ¶ç±»ï¼Œè°ƒç”¨è€…ä¼ å…¥çš„ä»»åŠ¡å¿…é¡»ç»§æ‰¿<code>Job</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">T</span>&gt;&gt; <span class=\"keyword\">implements</span> <span class=\"title\">java</span>.<span class=\"title\">lang</span>.<span class=\"title\">Comparable</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> isCancel;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> isComplete;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> Integer mSequence;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> Priority mPriority = Priority.NORMAL;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Priority <span class=\"title\">getPriority</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mPriority;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Job <span class=\"title\">setPriority</span><span class=\"params\">(Priority priority)</span> </span>&#123;</span><br><span class=\"line\">        mPriority = priority;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isCancel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isCancel;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Job <span class=\"title\">setCancel</span><span class=\"params\">(<span class=\"keyword\">boolean</span> cancel)</span> </span>&#123;</span><br><span class=\"line\">        isCancel = cancel;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isComplete</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isComplete;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Job <span class=\"title\">setComplete</span><span class=\"params\">(<span class=\"keyword\">boolean</span> complete)</span> </span>&#123;</span><br><span class=\"line\">        isComplete = complete;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getSequence</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mSequence;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Job <span class=\"title\">setSequence</span><span class=\"params\">(Integer sequence)</span> </span>&#123;</span><br><span class=\"line\">        mSequence = sequence;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">compareTo</span><span class=\"params\">(T another)</span> </span>&#123;</span><br><span class=\"line\">        Priority left = <span class=\"keyword\">this</span>.getPriority();</span><br><span class=\"line\">        Priority right = another.getPriority();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left == right ? <span class=\"keyword\">this</span>.mSequence - another.mSequence : right.ordinal() - left.ordinal();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°<code>Job</code>å®ç°äº†<code>Comparable</code>æ¥å£ï¼Œå› ä¸ºåœ¨<code>JobQueue</code>ä¸­çš„<code>PriorityBlockingQueue&lt;T&gt; mJobQueue</code>æ³›å‹çš„å¿…é¡»æ˜¯<code>Comparable</code>çš„å®ç°ç±»,è¿™æ ·åœ¨<br><code>mJobQueue.take()</code>çš„æ—¶å€™ä¼šæ ¹æ®ä¼˜å…ˆçº§æ¥å–å‡ºä»»åŠ¡ï¼Œä»è€Œå®ç°ä»»åŠ¡çš„ä¼˜å…ˆçº§åŠŸèƒ½ï¼Œå…·ä½“çš„ä¼˜å…ˆçº§åˆ¤å®šé€»è¾‘ï¼Œåœ¨<code>Job</code>ç±»ä¸­å®ç°çš„<code>compareTo</code>å‡½æ•°ä¸­</p>\n<h3 id=\"å¤šé˜Ÿåˆ—é…åˆåˆ‡æ¢\"><a href=\"#å¤šé˜Ÿåˆ—é…åˆåˆ‡æ¢\" class=\"headerlink\" title=\"å¤šé˜Ÿåˆ—é…åˆåˆ‡æ¢\"></a>å¤šé˜Ÿåˆ—é…åˆåˆ‡æ¢</h3><p>å…¶å®æ­¤åŠŸèƒ½ä¾èµ–æ‹¦æˆªå™¨æ¥å®ç°ï¼Œæ‹¦æˆªå™¨æ‹¦æˆªåï¼Œå†æŠŠä»»åŠ¡æŠ›ç»™å…¶ä»–é˜Ÿåˆ—å°±å¥½ï¼Œçœ‹ä¸‹å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å°±çŸ¥é“äº†</p>\n<p>å…ˆå®šä¹‰ä¸€ä¸ªä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestJob</span> <span class=\"keyword\">extends</span> <span class=\"title\">Job</span>&lt;<span class=\"title\">TestJob</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mCount;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mCount;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> TestJob <span class=\"title\">setCount</span><span class=\"params\">(<span class=\"keyword\">int</span> count)</span> </span>&#123;</span><br><span class=\"line\">        mCount = count;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mCount;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> JobHandler&lt;TestJob&gt; mCacheJobHandler;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> JobHandler&lt;TestJob&gt; mNetworkJobHandler;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_main);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//åˆ›å»ºç¼“å­˜å¤„ç†å™¨ï¼Œå¹¶æŒ‡å®šä¸º1ä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶è®¾ç½®è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨</span></span><br><span class=\"line\">        mCacheJobHandler = <span class=\"keyword\">new</span> JobHandler.Builder&lt;TestJob&gt;().threadPoolSize(<span class=\"number\">1</span>).interceptor(<span class=\"keyword\">new</span> CacheJobInterceptor()).build();</span><br><span class=\"line\">        <span class=\"comment\">//åˆ›å»ºç½‘ç»œè¯·æ±‚å¤„ç†å™¨</span></span><br><span class=\"line\">        mNetworkJobHandler = <span class=\"keyword\">new</span> JobHandler.Builder&lt;TestJob&gt;().build();</span><br><span class=\"line\"></span><br><span class=\"line\">        findViewById(R.id.btn).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                TestJob job = <span class=\"keyword\">new</span> TestJob();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mCount == <span class=\"number\">7</span>) &#123;</span><br><span class=\"line\">                    job.setPriority(Priority.HIGH);  <span class=\"comment\">//è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mCount == <span class=\"number\">8</span>) &#123;</span><br><span class=\"line\">                    job.setPriority(Priority.IMMEDIATE); <span class=\"comment\">//è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                job.setCount(mCount);</span><br><span class=\"line\"></span><br><span class=\"line\">                mCacheJobHandler.enqueue(job)</span><br><span class=\"line\">                        .action(<span class=\"keyword\">new</span> Action&lt;TestJob&gt;() &#123;</span><br><span class=\"line\">                            <span class=\"meta\">@Override</span></span><br><span class=\"line\">                            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">call</span><span class=\"params\">(TestJob element)</span> </span>&#123;  <span class=\"comment\">//å…·ä½“çš„è¯»ç¼“å­˜å¤„ç†é€»è¾‘</span></span><br><span class=\"line\">                                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                                    Thread.sleep(<span class=\"number\">1500</span>);</span><br><span class=\"line\">                                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                                    e.printStackTrace();</span><br><span class=\"line\">                                &#125;</span><br><span class=\"line\">                                CLog.i(<span class=\"string\">\"è¯»ç¼“å­˜\"</span>+element.getCount());</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;)</span><br><span class=\"line\">                        .addListener(mCacheJobHandlerListener);</span><br><span class=\"line\"></span><br><span class=\"line\">                mCount++;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//è‡ªå®šä¹‰æ‹¦æˆªå™¨</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CacheJobInterceptor</span> <span class=\"keyword\">implements</span> <span class=\"title\">net</span>.<span class=\"title\">robinx</span>.<span class=\"title\">queue</span>.<span class=\"title\">Interceptor</span>&lt;<span class=\"title\">TestJob</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">interceptCondition</span><span class=\"params\">(TestJob job)</span> </span>&#123;  <span class=\"comment\">//æ‹¦æˆªæ¡ä»¶ï¼Œå½“countä¸º5æ—¶æ¨¡æ‹Ÿè¾¾æˆæ¡ä»¶ï¼Œè¿”å›tureè¿›è¡Œæ‹¦æˆª</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (job.getCount() == <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onIntercept</span><span class=\"params\">(TestJob job)</span> </span>&#123;  <span class=\"comment\">//ç¼“å­˜é˜Ÿåˆ—æ‹¦æˆªåï¼Œè¿›å…¥ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—</span></span><br><span class=\"line\">            mNetworkJobHandler.enqueue(job)</span><br><span class=\"line\">                    .action(<span class=\"keyword\">new</span> Action&lt;TestJob&gt;() &#123;</span><br><span class=\"line\">                        <span class=\"meta\">@Override</span></span><br><span class=\"line\">                        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">call</span><span class=\"params\">(TestJob element)</span> </span>&#123; <span class=\"comment\">//å…·ä½“çš„ç½‘ç»œè¯·æ±‚å¤„ç†é€»è¾‘</span></span><br><span class=\"line\">                            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                                Thread.sleep(<span class=\"number\">1500</span>);</span><br><span class=\"line\">                            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                                e.printStackTrace();</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            CLog.i(<span class=\"string\">\"è¯·æ±‚ç½‘ç»œ\"</span>+element.getCount());</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                    .addListener(mNetworkJobHandlerListener);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ç¼“å­˜ä»»åŠ¡å¤„ç†è¿›åº¦ç›‘å¬</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> JobHandlerListener&lt;TestJob&gt; mCacheJobHandlerListener = <span class=\"keyword\">new</span> JobHandlerListener&lt;TestJob&gt;() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPrepare</span><span class=\"params\">(TestJob job)</span> </span>&#123;</span><br><span class=\"line\">            CLog.i(<span class=\"string\">\"è¯»ç¼“å­˜å‡†å¤‡\"</span>+job.getCount());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCancel</span><span class=\"params\">(TestJob job)</span> </span>&#123;</span><br><span class=\"line\">            CLog.i(<span class=\"string\">\"è¯»ç¼“å­˜å–æ¶ˆ\"</span>+job.getCount());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFinish</span><span class=\"params\">(TestJob job)</span> </span>&#123;</span><br><span class=\"line\">            CLog.i(<span class=\"string\">\"è¯»ç¼“å­˜å®Œæˆ\"</span>+job.getCount());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ç½‘ç»œè¯·æ±‚ä»»åŠ¡å¤„ç†è¿›åº¦ç›‘å¬</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> JobHandlerListener&lt;TestJob&gt; mNetworkJobHandlerListener = <span class=\"keyword\">new</span> JobHandlerListener&lt;TestJob&gt;() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPrepare</span><span class=\"params\">(TestJob job)</span> </span>&#123;</span><br><span class=\"line\">            CLog.i(<span class=\"string\">\"è¯·æ±‚ç½‘ç»œå‡†å¤‡\"</span>+job.getCount());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCancel</span><span class=\"params\">(TestJob job)</span> </span>&#123;</span><br><span class=\"line\">            CLog.i(<span class=\"string\">\"è¯·æ±‚ç½‘ç»œå–æ¶ˆ\"</span>+job.getCount());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFinish</span><span class=\"params\">(TestJob job)</span> </span>&#123;</span><br><span class=\"line\">            CLog.i(<span class=\"string\">\"è¯·æ±‚ç½‘ç»œå®Œæˆ\"</span>+job.getCount());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢é€šè¿‡å°è£…çš„è´£ä»»é“¾æ¨¡æ‹Ÿäº†Volleyçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç¼“å­˜ä¸ç½‘ç»œè¯·æ±‚å¤„ç†çº¿ç¨‹çš„åˆ‡æ¢</p>\n<hr>\n<h2 id=\"æ›´æ–°æ—¶é—´ï¼š2016-12-9\"><a href=\"#æ›´æ–°æ—¶é—´ï¼š2016-12-9\" class=\"headerlink\" title=\"æ›´æ–°æ—¶é—´ï¼š2016.12.9\"></a>æ›´æ–°æ—¶é—´ï¼š2016.12.9</h2><p>åœ¨ä»¥ä¸Šä»£ç åŸºç¡€ä¸Šå¢åŠ äº†ï¼Œé‡å¤ä»»åŠ¡åˆ¤å®šï¼Œå½“æœ‰é‡å¤ä»»åŠ¡æ—¶ï¼Œåç»­ä»»åŠ¡è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå½“å‰ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œé‡Šæ”¾é˜Ÿåˆ—ä¸­çš„é‡å¤ä»»åŠ¡å¹¶æ‰§è¡Œ<br>å®Œå–„äº†ä»»åŠ¡å–æ¶ˆ</p>\n<p>ä»£ç è§<a href=\"https://github.com/robinxdroid/JobQueue\" target=\"_blank\" rel=\"noopener\">https://github.com/robinxdroid/JobQueue</a></p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2016/12/06/ä¼˜é›…çš„è´£ä»»é“¾æ¨¡å¼/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2016/12/06/ä¼˜é›…çš„è´£ä»»é“¾æ¨¡å¼/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["è´£ä»»é“¾","æ¨¡å¼"]},{"title":"ç•¥å‘çš„PopupWindow","url":"http://yoursite.com/2016/12/05/ç•¥å‘çš„PopupWindow/","content":"<p>å…¶å®PopupWindowå¹³æ—¶å¼€å‘ä¸­æˆ‘ä¸ªäººç”¨çš„å¹¶ä¸å¤šï¼Œå½“æƒ³å†™ä¸€ä¸ªåº•éƒ¨å¼¹å‡ºçš„èœå•çš„æ—¶å€™ï¼Œå‘ç°è¿™å¹¶ä¸æ˜¯éšæ‰‹å°±æ¥çš„äº‹æƒ…ã€‚æˆ‘çš„éœ€æ±‚ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯åº•éƒ¨ä½ç§»å¼¹å‡ºèœå•ï¼ŒèƒŒæ™¯éšä¹‹å˜æš—ã€‚å®é™…æ“ä½œæœ‰ä¸å°‘é—®é¢˜éœ€è¦è§£å†³</p>\n<h2 id=\"åŠ¨ç”»é—®é¢˜\"><a href=\"#åŠ¨ç”»é—®é¢˜\" class=\"headerlink\" title=\"åŠ¨ç”»é—®é¢˜\"></a>åŠ¨ç”»é—®é¢˜</h2><h3 id=\"setAnimationStyle\"><a href=\"#setAnimationStyle\" class=\"headerlink\" title=\"setAnimationStyle\"></a>setAnimationStyle</h3><p>PopupWindowçš„åŠ¨ç”»å¯ä»¥é€šè¿‡<code>setAnimationStyle()</code>å‡½æ•°è®¾ç½®ä¸€ä¸ªåŠ¨ç”»Styleï¼Œéœ€è¦åˆ°èµ„æºæ–‡ä»¶ä¸­å®šä¹‰ï¼ŒåŒæ—¶è¿˜éœ€è¦åœ¨animæ–‡ä»¶å¤¹ä¸­å®šä¹‰å¥½åŠ¨ç”»æ–‡ä»¶<br><br>é—®é¢˜ï¼šå½“å®šä¹‰äº†Translateçš„åŠ¨ç”»çš„æ—¶å€™ï¼ŒèƒŒæ™¯æ— æ³•å˜æš—</p>\n<h3 id=\"ViewåŠ¨ç”»\"><a href=\"#ViewåŠ¨ç”»\" class=\"headerlink\" title=\"ViewåŠ¨ç”»\"></a>ViewåŠ¨ç”»</h3><p>å¯ä»¥é€šè¿‡å¯¹PopupWindowä¸­çš„Viewç›´æ¥åšTranslateåŠ¨ç”»ï¼Œ<code>setAnimationStyle()</code>å¯ä»¥è®¾ç½®<code>alpha</code>åŠ¨ç”»ï¼Œè¿™æ ·æ¥å®ç°èƒŒæ™¯æ¸å˜<br><br>é—®é¢˜ï¼šPopupWindowå¼¹å‡ºçš„æ—¶å€™ä¼šå¡ä¸€ä¸‹ï¼Œå¯¼è‡´ä½ç§»åŠ¨ç”»ä¸èƒ½æµç•…è¿è¡Œï¼ŒåŸå› å°±æ˜¯åŒæ—¶è®¾ç½®äº†<code>setAnimationStyle()</code>ä¸ViewåŠ¨ç”»ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬çš„é¡¹ç›®ä¸­ç›®å‰å­˜åœ¨çš„é—®é¢˜</p>\n<h2 id=\"é—®é¢˜è§£å†³æ–¹æ¡ˆ\"><a href=\"#é—®é¢˜è§£å†³æ–¹æ¡ˆ\" class=\"headerlink\" title=\"é—®é¢˜è§£å†³æ–¹æ¡ˆ\"></a>é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2><p>æ—¢ç„¶åŒæ—¶è®¾ç½®<code>setAnimationStyle()</code>ä¸ViewåŠ¨ç”»æœ‰é—®é¢˜ï¼Œé‚£åªèƒ½æ¢ç§æ–¹å¼äº†ï¼ŒViewåŠ¨ç”»æˆ‘ä»¬å¯ä»¥ä¿ç•™ï¼Œå› ä¸ºå¯ä»¥é’ˆå¯¹PopupWindowåšå„ç§å…¶ä»–çš„åŠ¨ç”»ï¼Œè‡ªç”±æ€§é«˜ç‚¹ã€‚<code>setAnimationStyle()</code>å¯ä»¥ç›´æ¥æ’‡æ‰ã€‚èƒŒæ™¯æ¸å˜æ¢å…¶ä»–æ–¹å¼æ¥å®ç°</p>\n<h3 id=\"èƒŒæ™¯æ¸å˜\"><a href=\"#èƒŒæ™¯æ¸å˜\" class=\"headerlink\" title=\"èƒŒæ™¯æ¸å˜\"></a>èƒŒæ™¯æ¸å˜</h3><p>å¦‚æœä½ åšè¿‡è¿™æ–¹é¢çš„éœ€æ±‚ï¼Œä¼šå‘ç°ç½‘ä¸Šæœ‰è¿™æ®µä»£ç æ¥å®ç°èƒŒæ™¯çš„åˆ‡æ¢</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WindowManager.LayoutParams lp = ((Activity) mPopView.getContext()).getWindow().getAttributes();</span><br><span class=\"line\">lp.alpha = <span class=\"number\">1f</span>;</span><br><span class=\"line\">((Activity) mPopView.getContext()).getWindow().setAttributes(lp);</span><br><span class=\"line\">((Activity) mPopView.getContext()).getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);</span><br></pre></td></tr></table></figure>\n<p>å®é™…æ“ä½œäº†åå‘ç°èƒŒæ™¯æ˜¯å˜æš—äº†ï¼Œä½†æ˜¯æ˜¯ç¬é—´å˜åŒ–ï¼Œè¿™å¤ªlowäº†ï¼Œæˆ‘ä»¬è¦çš„æ˜¯æ¸å˜ã€‚å¯ä»¥ç”¨ValueAnimatorå¯¹å…¶åšä¸ªåŠ¨ç”»,è¿™æ ·å°±å¯ä»¥äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">backgroundAlpha</span><span class=\"params\">(<span class=\"keyword\">float</span> startAlpha, <span class=\"keyword\">float</span> endAlpha, <span class=\"keyword\">long</span> duration)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> WindowManager.LayoutParams lp = ((Activity) mPopView.getContext()).getWindow().getAttributes();</span><br><span class=\"line\">        ValueAnimator valueAnimator = ValueAnimator.ofFloat(startAlpha, endAlpha);</span><br><span class=\"line\">        valueAnimator.setDuration(duration);</span><br><span class=\"line\">        valueAnimator.addUpdateListener(<span class=\"keyword\">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAnimationUpdate</span><span class=\"params\">(ValueAnimator animation)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">float</span> currentAlpha = (<span class=\"keyword\">float</span>) animation.getAnimatedValue();</span><br><span class=\"line\">                lp.alpha = currentAlpha;</span><br><span class=\"line\">                ((Activity) mPopView.getContext()).getWindow().setAttributes(lp);</span><br><span class=\"line\">                ((Activity) mPopView.getContext()).getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        valueAnimator.start();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>å®é™…è¿è¡Œåï¼Œå®Œç¾è§£å†³</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2016/12/05/ç•¥å‘çš„PopupWindow/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2016/12/05/ç•¥å‘çš„PopupWindow/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["PopupWindow"]},{"title":"Androidç¼–ç¨‹è§„èŒƒ","url":"http://yoursite.com/2016/12/02/Androidç¼–ç¨‹è§„èŒƒ/","content":"<p>å¦‚æœä¸æ˜¯åˆå­¦è€…ï¼Œä»£ç è§„èŒƒæ€§çš„é‡è¦ç¨‹åº¦ä¸è¨€è€Œå–»ï¼Œç»“åˆè‡ªèº«çš„ç»éªŒä»¥åŠç½‘ç»œä¸Šå…¶ä»–çš„å»ºè®®ï¼Œæ€»ç»“å¦‚ä¸‹Androidä»£ç è§„èŒƒã€‚</p>\n<h2 id=\"åŒ…çš„å‘½å\"><a href=\"#åŒ…çš„å‘½å\" class=\"headerlink\" title=\"åŒ…çš„å‘½å\"></a>åŒ…çš„å‘½å</h2><p>ä¸‹é¢æ˜¯æˆ‘å¹³æ—¶å¼€å‘çš„éƒ¨åˆ†å‘½åæ–¹å¼<br><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-src</span><br><span class=\"line\">---|app ---&gt; åŒ…å«Applicationä»¥åŠå…¨å±€æ€§çš„ç±»</span><br><span class=\"line\">---|constants ---&gt; å¸¸é‡ç±»</span><br><span class=\"line\">---|helper ---&gt; APPå†…éƒ¨çš„å¸®åŠ©ç±»</span><br><span class=\"line\">---|utils ---&gt; APPå†…éƒ¨çš„å·¥å…·ç±»</span><br><span class=\"line\">---|callback ---&gt;é€šç”¨çš„å›è°ƒæ¥å£</span><br><span class=\"line\">---|interfaces ---&gt;é€šç”¨çš„ç›‘å¬æ¥å£</span><br><span class=\"line\">---|ui ---&gt;UIç›¸å…³</span><br><span class=\"line\">------|activity ---&gt;Activity</span><br><span class=\"line\">------|fragment ---&gt;Fragment</span><br><span class=\"line\">------|adapter ---&gt;Adapter</span><br><span class=\"line\">------|widget ---&gt;è‡ªå®šä¹‰æ§ä»¶</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"ç±»ä¸­ä»£ç çš„é¡ºåº\"><a href=\"#ç±»ä¸­ä»£ç çš„é¡ºåº\" class=\"headerlink\" title=\"ç±»ä¸­ä»£ç çš„é¡ºåº\"></a>ç±»ä¸­ä»£ç çš„é¡ºåº</h2><h3 id=\"å˜é‡\"><a href=\"#å˜é‡\" class=\"headerlink\" title=\"å˜é‡\"></a>å˜é‡</h3><p>1.å¸¸é‡<br><br>2.é™æ€å˜é‡<br><br>3.æˆå‘˜å˜é‡<br><br>æ ¹æ®åŠŸèƒ½ä½œç”¨å¯ä¸­é—´åŠ ç©ºè¡Œåˆ†éš”</p>\n<h3 id=\"æ–¹æ³•\"><a href=\"#æ–¹æ³•\" class=\"headerlink\" title=\"æ–¹æ³•\"></a>æ–¹æ³•</h3><p>1.æ„é€ å‡½æ•°<br><br>2.ç”Ÿå‘½å‘¨æœŸå‡½æ•°<br><br>3.<code>Override</code>å‡½æ•°<br><br>4.<code>public</code>å‡½æ•°<br><br>5.<code>protected</code>å‡½æ•°<br><br>6.<code>private</code>å‡½æ•°<br></p>\n<h2 id=\"ç±»çš„å‘½å\"><a href=\"#ç±»çš„å‘½å\" class=\"headerlink\" title=\"ç±»çš„å‘½å\"></a>ç±»çš„å‘½å</h2><p>é¦–å­—æ¯å¤§å†™ï¼Œåé¢é©¼å³°ï¼Œä½¿ç”¨åè¯</p>\n<h3 id=\"Activity\"><a href=\"#Activity\" class=\"headerlink\" title=\"Activity\"></a>Activity</h3><p><code>XxxActivity.java</code></p>\n<h3 id=\"Fragment\"><a href=\"#Fragment\" class=\"headerlink\" title=\"Fragment\"></a>Fragment</h3><p><code>XxxFragment.java</code></p>\n<h3 id=\"Adapter\"><a href=\"#Adapter\" class=\"headerlink\" title=\"Adapter\"></a>Adapter</h3><p><code>XxxAdapter.java</code></p>\n<h3 id=\"Helperç±»\"><a href=\"#Helperç±»\" class=\"headerlink\" title=\"Helperç±»\"></a>Helperç±»</h3><p><code>XxxHelper.java</code></p>\n<h3 id=\"å·¥å…·ç±»\"><a href=\"#å·¥å…·ç±»\" class=\"headerlink\" title=\"å·¥å…·ç±»\"></a>å·¥å…·ç±»</h3><p><code>XxxUtils.java</code></p>\n<h3 id=\"å›è°ƒæ¥å£\"><a href=\"#å›è°ƒæ¥å£\" class=\"headerlink\" title=\"å›è°ƒæ¥å£\"></a>å›è°ƒæ¥å£</h3><p><code>XxxCallback.java</code></p>\n<h3 id=\"ç›‘å¬æ¥å£\"><a href=\"#ç›‘å¬æ¥å£\" class=\"headerlink\" title=\"ç›‘å¬æ¥å£\"></a>ç›‘å¬æ¥å£</h3><p><code>XxxListener.java</code></p>\n<h2 id=\"å˜é‡çš„å‘½å\"><a href=\"#å˜é‡çš„å‘½å\" class=\"headerlink\" title=\"å˜é‡çš„å‘½å\"></a>å˜é‡çš„å‘½å</h2><p>1.å¸¸é‡ï¼š æ‰€æœ‰å•è¯å¤§å†™ï¼Œå•è¯ä»¥<code>_</code>åˆ†éš”<br><br>2.é™æ€å˜é‡ï¼š<code>s</code>å¼€å¤´ï¼Œåé¢é©¼å³°<br><br>3.æˆå‘˜å˜é‡ï¼š <code>m</code>å¼€å¤´ï¼Œåé¢é©¼å³°<br></p>\n<h2 id=\"æ–¹æ³•çš„å‘½å\"><a href=\"#æ–¹æ³•çš„å‘½å\" class=\"headerlink\" title=\"æ–¹æ³•çš„å‘½å\"></a>æ–¹æ³•çš„å‘½å</h2><p>é¦–å­—æ¯å°å†™ï¼Œåé¢é©¼å³°</p>\n<h2 id=\"èµ„æºæ–‡ä»¶å‘½å\"><a href=\"#èµ„æºæ–‡ä»¶å‘½å\" class=\"headerlink\" title=\"èµ„æºæ–‡ä»¶å‘½å\"></a>èµ„æºæ–‡ä»¶å‘½å</h2><h3 id=\"å¸ƒå±€\"><a href=\"#å¸ƒå±€\" class=\"headerlink\" title=\"å¸ƒå±€\"></a>å¸ƒå±€</h3><table>\n<thead>\n<tr>\n<th>Type</th>\n<th>Layout</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Activity</td>\n<td>activity_xxx</td>\n</tr>\n<tr>\n<td>Fragment</td>\n<td>fragment_xxx</td>\n</tr>\n<tr>\n<td>Adapter</td>\n<td>item_xxx</td>\n</tr>\n<tr>\n<td>Dialog</td>\n<td>dialog_xxx</td>\n</tr>\n<tr>\n<td>PopupWindow</td>\n<td>popup_xxx</td>\n</tr>\n<tr>\n<td>Menu</td>\n<td>menu_xxx</td>\n</tr>\n<tr>\n<td>Dialog</td>\n<td>dialog_xxx</td>\n</tr>\n<tr>\n<td>å¸ƒå±€å¼•ç”¨</td>\n<td>include_xxx</td>\n</tr>\n<tr>\n<td>é€šç”¨è§†å›¾</td>\n<td>view_xxx</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"å›¾ç‰‡\"><a href=\"#å›¾ç‰‡\" class=\"headerlink\" title=\"å›¾ç‰‡\"></a>å›¾ç‰‡</h3><table>\n<thead>\n<tr>\n<th>Type</th>\n<th>Name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>èƒŒæ™¯å›¾ç‰‡</td>\n<td>bg_xxx</td>\n</tr>\n<tr>\n<td>æŒ‰é’®å›¾ç‰‡</td>\n<td>btn_xxx</td>\n</tr>\n<tr>\n<td>å•ä¸ªå›¾æ ‡</td>\n<td>icon_xxx</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ä»£ç å›¾å½¢\"><a href=\"#ä»£ç å›¾å½¢\" class=\"headerlink\" title=\"ä»£ç å›¾å½¢\"></a>ä»£ç å›¾å½¢</h3><table>\n<thead>\n<tr>\n<th>Type</th>\n<th>Name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Selector</td>\n<td>selector_xxx</td>\n</tr>\n<tr>\n<td>Shape</td>\n<td>shape_xxx</td>\n</tr>\n</tbody>\n</table>\n<p>ä»¥æ­¤ç±»æ¨</p>\n<h2 id=\"åŸºæœ¬åŸåˆ™\"><a href=\"#åŸºæœ¬åŸåˆ™\" class=\"headerlink\" title=\"åŸºæœ¬åŸåˆ™\"></a>åŸºæœ¬åŸåˆ™</h2><ul>\n<li>åˆ é™¤é»˜è®¤çš„<code>TODO</code>ï¼Œåˆç†ä½¿ç”¨<code>TODO</code>ä¸<code>FIXME</code></li>\n<li>æ ‡è¯†æ€§çš„æ•°å­—ä¸€å®šè¦å®šä¹‰æˆå¸¸é‡</li>\n<li>ä»£ç ä¸ç¬¦å·ä¹‹é—´åŠ ç©ºæ ¼</li>\n<li>å‡½æ•°å‚æ•°ä¸å¯è¿‡å¤šï¼Œæœ€å¥½ä¸è¶…è¿‡4ä¸ª</li>\n<li>ä¸€èˆ¬çš„ExceptionæŠ›å‡ºäº¤ç»™è°ƒç”¨è€…å¤„ç†</li>\n<li>ä»£ç æ³¨é‡Šè®¤çœŸå†™</li>\n</ul>\n<hr>\n<p>æš‚æ—¶è¿™ä¹ˆå¤šï¼Œåé¢æœ‰çš„è¯å†è¡¥å……</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2016/12/02/Androidç¼–ç¨‹è§„èŒƒ/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2016/12/02/Androidç¼–ç¨‹è§„èŒƒ/</a></p>\n</blockquote>\n","categories":["Android"],"tags":["è§„èŒƒ","ä»£ç "]},{"title":"åŠ å¯†ä½ çš„App","url":"http://yoursite.com/2016/11/30/åŠ å¯†ä½ çš„App/","content":"<p>ä¼ä¸šçº§å¼€å‘ä¸­åŠ å¯†æ•°æ®ä¸€èˆ¬éƒ½å°‘ä¸äº†ï¼Œæˆ‘ä»¬åœ¨ä¸æœåŠ¡ç«¯äº¤äº’ä¸­ï¼Œå‘é€çš„å‚æ•°ä»¥åŠè·å–çš„æ•°æ®éƒ½æ˜¯åŠ å¯†åçš„ï¼Œéœ€è¦å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯äº’ç›¸åŠ è§£å¯†<br>åˆæœŸæˆ‘ä»¬ä½¿ç”¨äº†javaæä¾›çš„Cipherç±»ï¼ŒåŠ è§£å¯†æ•ˆæœæ˜¯è¾¾åˆ°äº†ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯æ˜æ˜¾çš„ï¼šå¤ªæ…¢ã€‚æ¯æ¬¡åŠ å¯†è¿‡ç¨‹ä¸€ä¸²ä¸é•¿çš„Jsonå°±å°†è¿‘1ç§’å·¦å³ï¼Œä¸ºæ­¤ä¸å¾—ä¸å¦å¤–å†å¼€å¼‚æ­¥æ‰§è¡ŒåŠ è§£å¯†ï¼Œè¿™æ ·ç¹çä¸ç®€æ´ï¼Œæ•´ä¸ªAPPçš„é€Ÿåº¦ä¹Ÿè¢«æ‹–æ…¢ã€‚</p>\n<h2 id=\"åŠ å¯†æ‰‹æ®µ\"><a href=\"#åŠ å¯†æ‰‹æ®µ\" class=\"headerlink\" title=\"åŠ å¯†æ‰‹æ®µ\"></a>åŠ å¯†æ‰‹æ®µ</h2><p>SqlCipher,Conceal.</p>\n<p>SqlCipherä¸»è¦æ˜¯æ•°æ®åº“åŠ å¯†ï¼Œæ­¤å¤„ä¸æˆ‘ä»¬çš„åœºæ™¯å¯¹åº”ä¸ä¸Šï¼Œä¸è€ƒè™‘</p>\n<p>Concealæ˜¯Facebookå‡ºçš„ï¼Œæ—¶é—´ä¹Ÿä¸çŸ­äº†ï¼Œä¹‹å‰åªèƒ½å¼•å…¥jarå’Œsoæ–‡ä»¶ï¼Œç°åœ¨å¯ä»¥ç›´æ¥gradleä¾èµ–äº†</p>\n<h3 id=\"Concealä½¿ç”¨\"><a href=\"#Concealä½¿ç”¨\" class=\"headerlink\" title=\"Concealä½¿ç”¨\"></a>Concealä½¿ç”¨</h3><p>build.gradleæ·»åŠ ä¾èµ–</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">   \tcompile <span class=\"string\">'com.facebook.conceal:conceal:1.1.3@aar'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸ºäº†ä½¿ç”¨æ–¹é¢ï¼Œæˆ‘å°è£…æˆäº†ä¸€ä¸ªç±»</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> net.robinx.lib.encrypt.conceal;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.text.TextUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.Base64;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.Log;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.facebook.android.crypto.keychain.AndroidConceal;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.facebook.android.crypto.keychain.SharedPrefsBackedKeyChain;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.facebook.crypto.Crypto;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.facebook.crypto.CryptoConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.facebook.crypto.Entity;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.facebook.crypto.exception.CryptoInitializationException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.facebook.crypto.exception.KeyChainException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> net.robinx.lib.encrypt.SecretKeyHelper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.UnsupportedEncodingException;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Created by Robin on 2016/11/16 10:27.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> ConcealHelper &#123;</span><br><span class=\"line\">    INSTANCE;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">ConcealHelper</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DEFAULT_ENCODE = <span class=\"string\">\"utf-8\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PREFIX_E = <span class=\"string\">\"encrypt_\"</span>, PREFIX_D = <span class=\"string\">\"decrypt_\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> SharedPrefsBackedKeyChain msp;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Crypto mCrypto;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Entity mEntity;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mCrypto) &#123;</span><br><span class=\"line\">            msp = <span class=\"keyword\">new</span> SharedPrefsBackedKeyChain(context, CryptoConfig.KEY_256);</span><br><span class=\"line\">            mCrypto = AndroidConceal.get().createDefaultCrypto(msp);</span><br><span class=\"line\">            String secretKey = SecretKeyHelper.getSecretKey(context);</span><br><span class=\"line\">            mEntity = Entity.create(secretKey);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åŠ å¯†å­—èŠ‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> plainBytes åŸå§‹å­—èŠ‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> å¯†æ–‡å­—èŠ‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">byte</span>[] encryptByte(<span class=\"keyword\">byte</span>[] plainBytes) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!mCrypto.isAvailable()) &#123;</span><br><span class=\"line\">            Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"encryptByte error: mCrypto is unavailable\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == plainBytes || plainBytes.length &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"encryptByte error: plainBytes is null or length &lt;= 0\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] result = mCrypto.encrypt(plainBytes, mEntity);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == result || result.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"encryptByte error: result is null or length &lt;= 0\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (KeyChainException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (CryptoInitializationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è§£å¯†å­—èŠ‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> encryptBytes å¯†æ–‡å­—èŠ‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> åŸå§‹å­—èŠ‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">byte</span>[] decryptByte(<span class=\"keyword\">byte</span>[] encryptBytes) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!mCrypto.isAvailable()) &#123;</span><br><span class=\"line\">            Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"decryptByte error: mCrypto is unavailable\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == encryptBytes || encryptBytes.length &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"decryptByte error: encryptBytes is null or length &lt;= 0\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] result = mCrypto.decrypt(encryptBytes, mEntity);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == result || result.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"decryptByte error: result is null or length &lt;= 0\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (KeyChainException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (CryptoInitializationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åŠ å¯†å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> plainText åŸå§‹å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> åŠ å¯†åå­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">encryptString</span><span class=\"params\">(String plainText)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (TextUtils.isEmpty(plainText)) &#123;</span><br><span class=\"line\">            Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"encryptString error: plainText is empty\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] plainTextBytes = plainText.getBytes(DEFAULT_ENCODE);</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] result = encryptByte(plainTextBytes);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == result || result.length &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"encryptString error: encrypt result is null or length &lt;= 0\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            String encryptText = Base64.encodeToString(result, Base64.DEFAULT);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">return</span> encryptText;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è§£å¯†å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> encryptText å¯†æ–‡</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> åŸå§‹å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">decryptString</span><span class=\"params\">(String encryptText)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (TextUtils.isEmpty(encryptText)) &#123;</span><br><span class=\"line\">            Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"decryptString error: encryptText is empty\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">byte</span>[] encryptTextBytes = Base64.decode(encryptText, Base64.DEFAULT);</span><br><span class=\"line\">        <span class=\"keyword\">byte</span>[] data = decryptByte(encryptTextBytes);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == data || data.length &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            Log.e(<span class=\"string\">\"system.out\"</span>, <span class=\"string\">\"decryptString error: decrypt result is null or length &lt;= 0\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            String plainText = <span class=\"keyword\">new</span> String(data, DEFAULT_ENCODE);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> plainText;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åŠ å¯†æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> file æºæ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> åŠ å¯†æ–‡ä»¶ï¼Œæ–‡ä»¶åï¼šencrypt_xxx</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> File <span class=\"title\">encryptFile</span><span class=\"params\">(File file)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!mCrypto.isAvailable()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == file) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        String originFilePath = file.getAbsolutePath();</span><br><span class=\"line\">        String encryptFilePath = String.format(<span class=\"string\">\"%s%s%s%s\"</span>, file.getParent(), File.separator, PREFIX_E, file.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">        File encryptFile = <span class=\"keyword\">new</span> File(encryptFilePath);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (encryptFile.exists()) &#123;</span><br><span class=\"line\">            encryptFile.deleteOnExit();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            FileInputStream sourceFile = <span class=\"keyword\">new</span> FileInputStream(originFilePath);</span><br><span class=\"line\"></span><br><span class=\"line\">            OutputStream fileOS = <span class=\"keyword\">new</span> BufferedOutputStream(<span class=\"keyword\">new</span> FileOutputStream(encryptFile));</span><br><span class=\"line\">            OutputStream out = mCrypto.getCipherOutputStream(fileOS, mEntity);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">int</span> read = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">            <span class=\"keyword\">while</span> ((read = sourceFile.read(buffer)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                out.write(buffer, <span class=\"number\">0</span>, read);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            out.flush();</span><br><span class=\"line\">            fileOS.flush();</span><br><span class=\"line\">            out.close();</span><br><span class=\"line\">            fileOS.close();</span><br><span class=\"line\"></span><br><span class=\"line\">            sourceFile.close();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">return</span> encryptFile;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (CryptoInitializationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (KeyChainException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è§£å¯†æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> file æºæ–‡ä»¶(åŠ å¯†åçš„)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> è§£å¯†æ–‡ä»¶,æ–‡ä»¶åï¼šdecrypt_xxx</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> File <span class=\"title\">decryptFile</span><span class=\"params\">(File file)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!mCrypto.isAvailable()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == file) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        String fileName = file.getName();</span><br><span class=\"line\">        fileName = fileName.substring(PREFIX_E.length(), fileName.length());</span><br><span class=\"line\">        String originFilePath = file.getAbsolutePath();</span><br><span class=\"line\">        String decryptFilePath = String.format(<span class=\"string\">\"%s%s%s%s\"</span>, file.getParent(), File.separator, PREFIX_D, fileName);</span><br><span class=\"line\"></span><br><span class=\"line\">        File decryptFile = <span class=\"keyword\">new</span> File(decryptFilePath);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (decryptFile.exists()) &#123;</span><br><span class=\"line\">            decryptFile.deleteOnExit();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            FileInputStream fileInputStream = <span class=\"keyword\">new</span> FileInputStream(originFilePath);</span><br><span class=\"line\">            InputStream inputStream = mCrypto.getCipherInputStream(fileInputStream, mEntity);</span><br><span class=\"line\"></span><br><span class=\"line\">            OutputStream out = <span class=\"keyword\">new</span> BufferedOutputStream(<span class=\"keyword\">new</span> FileOutputStream(decryptFile));</span><br><span class=\"line\">            <span class=\"keyword\">int</span> read = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">            <span class=\"keyword\">while</span> ((read = inputStream.read(buffer)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                out.write(buffer, <span class=\"number\">0</span>, read);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            out.flush();</span><br><span class=\"line\">            out.close();</span><br><span class=\"line\"></span><br><span class=\"line\">            inputStream.close();</span><br><span class=\"line\">            fileInputStream.close();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> decryptFile;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (CryptoInitializationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (KeyChainException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"åœ¨é¡¹ç›®çš„Applicationçš„onCreate-å‡½æ•°ä¸­åˆå§‹åŒ–\"><a href=\"#åœ¨é¡¹ç›®çš„Applicationçš„onCreate-å‡½æ•°ä¸­åˆå§‹åŒ–\" class=\"headerlink\" title=\"åœ¨é¡¹ç›®çš„Applicationçš„onCreate()å‡½æ•°ä¸­åˆå§‹åŒ–\"></a>åœ¨é¡¹ç›®çš„Applicationçš„onCreate()å‡½æ•°ä¸­åˆå§‹åŒ–</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainApplication</span> <span class=\"keyword\">extends</span> <span class=\"title\">Application</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate();</span><br><span class=\"line\"></span><br><span class=\"line\">        ConcealHelper.init(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"åŠ å¯†å­—ç¬¦ä¸²\"><a href=\"#åŠ å¯†å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"åŠ å¯†å­—ç¬¦ä¸²\"></a>åŠ å¯†å­—ç¬¦ä¸²</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String encryptText = ConcealHelper.encryptString(jsonStr);</span><br></pre></td></tr></table></figure>\n<h4 id=\"è§£å¯†å­—ç¬¦ä¸²\"><a href=\"#è§£å¯†å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"è§£å¯†å­—ç¬¦ä¸²\"></a>è§£å¯†å­—ç¬¦ä¸²</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String originalText = ConcealHelper.decryptString(encryptText);</span><br></pre></td></tr></table></figure>\n<p>ä¸­é—´æˆ‘ä»¬è¿˜åŠ äº†ä¸€å±‚Base64ç¼–ç ï¼Œå› ä¸ºConcealçš„åŠ è§£å¯†éƒ½æ˜¯é’ˆå¯¹byte[],ä½¿ç”¨Base64å¯¹å…¶ç¼–ç ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²</p>\n<p>æµ‹è¯•å‘ç°å¾ˆé•¿çš„ä¸€ä¸²Jsonï¼Œæ¯æ¬¡åŠ å¯†æ—¶é—´åŸºæœ¬åœ¨10 msä»¥å†…ï¼Œè§£å¯†æ—¶é—´ä¸åŠ å¯†å·®ä¸å¤šï¼Œå¯ä»¥è¯´æ˜¯é£å¿«äº†ã€‚</p>\n<h4 id=\"åŠ å¯†æ–‡ä»¶\"><a href=\"#åŠ å¯†æ–‡ä»¶\" class=\"headerlink\" title=\"åŠ å¯†æ–‡ä»¶\"></a>åŠ å¯†æ–‡ä»¶</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">File originalFile = <span class=\"keyword\">new</span> File(<span class=\"string\">\"/sdcard/1.gif\"</span>);</span><br><span class=\"line\">File encryptFile = ConcealHelper.encryptFile(originalFile);</span><br></pre></td></tr></table></figure>\n<h4 id=\"è§£å¯†æ–‡ä»¶\"><a href=\"#è§£å¯†æ–‡ä»¶\" class=\"headerlink\" title=\"è§£å¯†æ–‡ä»¶\"></a>è§£å¯†æ–‡ä»¶</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">File decryptFile = ConcealHelper.decryptFile(encryptFile);</span><br></pre></td></tr></table></figure>\n<h3 id=\"SecretKey\"><a href=\"#SecretKey\" class=\"headerlink\" title=\"SecretKey\"></a>SecretKey</h3><p>åœ¨ä¸Šé¢çš„åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œæœ‰ä¸ªè·å–secretçš„æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String secretKey = SecretKeyHelper.getSecretKey(context);</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ªKeyæ˜¯æˆ‘ä»¬çš„é‡ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å¯†é’¥ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä¿å­˜åœ¨sdå¡ä¸å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡jniï¼Œæ¯æ¬¡ä»soæ–‡ä»¶è·å–ï¼Œå› ä¸ºç›¸æ¯”è¾ƒè€Œè¨€ï¼Œsoç ´è§£å°‘ä¸€äº›ï¼Œéš¾ä¸€ç‚¹ã€‚</p>\n<h4 id=\"åˆ›å»ºä¸€ä¸ªSecretKeyHelperç±»\"><a href=\"#åˆ›å»ºä¸€ä¸ªSecretKeyHelperç±»\" class=\"headerlink\" title=\"åˆ›å»ºä¸€ä¸ªSecretKeyHelperç±»\"></a>åˆ›å»ºä¸€ä¸ªSecretKeyHelperç±»</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> net.robinx.lib.encrypt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SecretKeyHelper</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">\t\tSystem.loadLibrary(<span class=\"string\">\"secretkey\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String sSecretKeyText;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getSecretKey</span><span class=\"params\">(Context con)</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (sSecretKeyText ==<span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\tsSecretKeyText =createSecretKey(con);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> sSecretKeyText;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> String <span class=\"title\">createSecretKey</span><span class=\"params\">(Context con)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"C-å®ç°\"><a href=\"#C-å®ç°\" class=\"headerlink\" title=\"C++å®ç°\"></a>C++å®ç°</h4><p>åˆ›å»ºnativeæ–¹æ³•createSecretKeyç”±C++å®ç°</p>\n<h5 id=\"å¤´æ–‡ä»¶secretkey-h\"><a href=\"#å¤´æ–‡ä»¶secretkey-h\" class=\"headerlink\" title=\"å¤´æ–‡ä»¶secretkey.h\"></a>å¤´æ–‡ä»¶secretkey.h</h5><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;jni.h&gt;</span><br><span class=\"line\">#define UTF_8 \"UTF-8\"</span><br><span class=\"line\">#ifdef __cplusplus</span><br><span class=\"line\"></span><br><span class=\"line\">extern <span class=\"string\">\"C\"</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">Java_net_robinx_lib_encrypt_SecretKeyHelper_createSecretKey</span><span class=\"params\">(JNIEnv *, jobject,jobject)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#endif</span><br></pre></td></tr></table></figure>\n<h5 id=\"cppæ–‡ä»¶secretkey-cpp\"><a href=\"#cppæ–‡ä»¶secretkey-cpp\" class=\"headerlink\" title=\"cppæ–‡ä»¶secretkey.cpp\"></a>cppæ–‡ä»¶secretkey.cpp</h5><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"secretkey.h\"</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;android/log.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOG_TAG <span class=\"meta-string\">\"robin_jni\"</span> <span class=\"comment\">// è‡ªå®šä¹‰çš„LOGçš„æ ‡è¯†</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOGOPEN 1 <span class=\"comment\">//æ—¥å¿—å¼€å…³ï¼Œ1ä¸ºå¼€ï¼Œå…¶å®ƒä¸ºå…³</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOGD(...) __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG ,__VA_ARGS__)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOGW(...) __android_log_print(ANDROID_LOG_WARN,TAG ,__VA_ARGS__)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOGE(...) __android_log_print(ANDROID_LOG_ERROR,TAG ,__VA_ARGS__)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOGF(...) __android_log_print(ANDROID_LOG_FATAL,TAG ,__VA_ARGS__)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//char* to jstring</span></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">toString</span><span class=\"params\">(JNIEnv* env, jbyteArray byteArray)</span> </span>&#123;</span><br><span class=\"line\">\tjclass string_cls = env-&gt;FindClass(<span class=\"string\">\"java/lang/String\"</span>);</span><br><span class=\"line\">\tjmethodID new_string_mid = env-&gt;GetMethodID(string_cls, <span class=\"string\">\"&lt;init&gt;\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"([BLjava/lang/String;)V\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">reinterpret_cast</span>&lt;jstring&gt;(env-&gt;NewObject(string_cls, new_string_mid,</span><br><span class=\"line\">\t\t\tbyteArray, env-&gt;NewStringUTF(UTF_8)));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jbyteArray <span class=\"title\">toBytes</span><span class=\"params\">(JNIEnv* env, <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* bytes)</span> </span>&#123;</span><br><span class=\"line\">\tjclass string_cls = env-&gt;FindClass(<span class=\"string\">\"java/lang/String\"</span>);</span><br><span class=\"line\">\tjmethodID get_bytes_mid = env-&gt;GetMethodID(string_cls, <span class=\"string\">\"getBytes\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">reinterpret_cast</span>&lt;jbyteArray&gt;(env-&gt;CallObjectMethod(</span><br><span class=\"line\">\t\t\tenv-&gt;NewStringUTF(bytes), get_bytes_mid, env-&gt;NewStringUTF(UTF_8)));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jbyteArray <span class=\"title\">toBytes</span><span class=\"params\">(JNIEnv* env, jstring <span class=\"built_in\">string</span>)</span> </span>&#123;</span><br><span class=\"line\">\tjclass string_cls = env-&gt;FindClass(<span class=\"string\">\"java/lang/String\"</span>);</span><br><span class=\"line\">\tjmethodID get_bytes_mid = env-&gt;GetMethodID(string_cls, <span class=\"string\">\"getBytes\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">reinterpret_cast</span>&lt;jbyteArray&gt;(env-&gt;CallObjectMethod(<span class=\"built_in\">string</span>,</span><br><span class=\"line\">\t\t\tget_bytes_mid, env-&gt;NewStringUTF(UTF_8)));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jbyteArray <span class=\"title\">getDigestedBytes</span><span class=\"params\">(JNIEnv* env, jbyteArray complex_bytes)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> jobject satic_message_digest_obj = __null;</span><br><span class=\"line\">\tjclass message_digest_cls = env-&gt;FindClass(<span class=\"string\">\"java/security/MessageDigest\"</span>);</span><br><span class=\"line\">\tjmethodID get_instance_mid = env-&gt;GetStaticMethodID(message_digest_cls,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getInstance\"</span>, <span class=\"string\">\"(Ljava/lang/String;)Ljava/security/MessageDigest;\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (satic_message_digest_obj == __null) &#123;</span><br><span class=\"line\">\t\tjobject local_message_digest_obj = env-&gt;CallStaticObjectMethod(</span><br><span class=\"line\">\t\t\t\tmessage_digest_cls, get_instance_mid, env-&gt;NewStringUTF(<span class=\"string\">\"MD5\"</span>));</span><br><span class=\"line\">\t\tsatic_message_digest_obj = env-&gt;NewGlobalRef(local_message_digest_obj);</span><br><span class=\"line\">\t\tenv-&gt;DeleteLocalRef(local_message_digest_obj);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjmethodID digest_mid = env-&gt;GetMethodID(message_digest_cls, <span class=\"string\">\"digest\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"([B)[B\"</span>);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(message_digest_cls);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">reinterpret_cast</span>&lt;jbyteArray&gt;(env-&gt;CallObjectMethod(</span><br><span class=\"line\">\t\t\tsatic_message_digest_obj, digest_mid, complex_bytes));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">toHex</span><span class=\"params\">(JNIEnv* env, jbyteArray digested_bytes)</span> </span>&#123;</span><br><span class=\"line\">\tjclass big_integer_cls = env-&gt;FindClass(<span class=\"string\">\"java/math/BigInteger\"</span>);</span><br><span class=\"line\">\tjmethodID new_big_integer_mid = env-&gt;GetMethodID(big_integer_cls, <span class=\"string\">\"&lt;init&gt;\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(I[B)V\"</span>);</span><br><span class=\"line\">\tjobject big_integer_obj = env-&gt;NewObject(big_integer_cls,</span><br><span class=\"line\">\t\t\tnew_big_integer_mid, <span class=\"number\">1</span>, digested_bytes);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(digested_bytes);</span><br><span class=\"line\">\tjmethodID to_String_mid = env-&gt;GetMethodID(big_integer_cls, <span class=\"string\">\"toString\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(I)Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(big_integer_cls);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">reinterpret_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(big_integer_obj,</span><br><span class=\"line\">\t\t\tto_String_mid, <span class=\"number\">16</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">getMD5</span><span class=\"params\">(JNIEnv* env, jstring jInfo)</span> </span>&#123;</span><br><span class=\"line\">\tjbyteArray digested_bytes = getDigestedBytes(env, toBytes(env, jInfo));</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> toHex(env, digested_bytes);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">getAppendedString</span><span class=\"params\">(JNIEnv* env, jobject thiz, jstring s1, jstring s2)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *s1x = (env)-&gt;GetStringUTFChars(s1, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *s2x = (env)-&gt;GetStringUTFChars(s2, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">char</span> *sall = <span class=\"keyword\">new</span> <span class=\"keyword\">char</span>[<span class=\"built_in\">strlen</span>(s1x) + <span class=\"built_in\">strlen</span>(s2x) + <span class=\"number\">1</span>];</span><br><span class=\"line\">\t<span class=\"built_in\">strcpy</span>(sall, s1x);</span><br><span class=\"line\">\t<span class=\"built_in\">strcat</span>(sall, s2x);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjstring retval = (env)-&gt;NewStringUTF(sall);</span><br><span class=\"line\"></span><br><span class=\"line\">\t(env)-&gt;ReleaseStringUTFChars(s1, s1x);</span><br><span class=\"line\">\t(env)-&gt;ReleaseStringUTFChars(s2, s2x);</span><br><span class=\"line\">\t<span class=\"built_in\">free</span>(sall);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> retval;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jobject <span class=\"title\">getInstance</span><span class=\"params\">(JNIEnv* env, jclass obj_class)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tjmethodID construction_id = env-&gt;GetMethodID(obj_class, <span class=\"string\">\"&lt;init&gt;\"</span>, <span class=\"string\">\"()V\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjobject obj = env-&gt;NewObject(obj_class, construction_id);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> obj;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//è·å–deviceid</span></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">getDeviceID</span><span class=\"params\">(JNIEnv *env, jobject thiz, jobject mContext)</span> </span>&#123;</span><br><span class=\"line\">\tjclass cls_context = (env)-&gt;FindClass(<span class=\"string\">\"android/content/Context\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (cls_context == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjmethodID getSystemService = (env)-&gt;GetMethodID(cls_context,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getSystemService\"</span>, <span class=\"string\">\"(Ljava/lang/String;)Ljava/lang/Object;\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (getSystemService == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjfieldID TELEPHONY_SERVICE = (env)-&gt;GetStaticFieldID(cls_context,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"TELEPHONY_SERVICE\"</span>, <span class=\"string\">\"Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (TELEPHONY_SERVICE == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjobject str = (env)-&gt;GetStaticObjectField(cls_context, TELEPHONY_SERVICE);</span><br><span class=\"line\">\tjobject telephonymanager = (env)-&gt;CallObjectMethod(mContext,</span><br><span class=\"line\">\t\t\tgetSystemService, str);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (telephonymanager == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjclass cls_tm = (env)-&gt;FindClass(<span class=\"string\">\"android/telephony/TelephonyManager\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (cls_tm == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjmethodID getDeviceId = (env)-&gt;GetMethodID(cls_tm, <span class=\"string\">\"getDeviceId\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"()Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (getDeviceId == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjobject deviceid = (env)-&gt;CallObjectMethod(telephonymanager, getDeviceId);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (jstring) deviceid;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//è·å–SerialNumber</span></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">getSerialNumber</span><span class=\"params\">(JNIEnv *env, jobject thiz, jobject mContext)</span> </span>&#123;</span><br><span class=\"line\">\tjclass cls_tm = (env)-&gt;FindClass(<span class=\"string\">\"android/os/SystemProperties\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (cls_tm == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjmethodID getDeviceId = (env)-&gt;GetStaticMethodID(cls_tm, <span class=\"string\">\"get\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (getDeviceId == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjstring param1 = (env)-&gt;NewStringUTF(<span class=\"string\">\"ro.serialno\"</span>);</span><br><span class=\"line\">\tjstring param2 = (env)-&gt;NewStringUTF(<span class=\"string\">\"unknown\"</span>);</span><br><span class=\"line\">\tjobject deviceid = (env)-&gt;CallStaticObjectMethod(cls_tm, getDeviceId,</span><br><span class=\"line\">\t\t\tparam1, param2);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (jstring) deviceid;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">jint2jstring</span><span class=\"params\">(JNIEnv *env, jint first)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">char</span> buf[<span class=\"number\">64</span>]; <span class=\"comment\">// assumed large enough to cope with result</span></span><br><span class=\"line\">  <span class=\"built_in\">sprintf</span>(buf, <span class=\"string\">\"%d\"</span>, first);  <span class=\"comment\">// error checking omitted</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> env-&gt;NewStringUTF( buf);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//è·å–å…¬é’¥</span></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">getPublicKey</span><span class=\"params\">(JNIEnv* env, jobject thiz,jobject context)</span> </span>&#123;</span><br><span class=\"line\">\tjclass context_cls = env-&gt;GetObjectClass(context);</span><br><span class=\"line\">\tjmethodID get_package_manager_mid = env-&gt;GetMethodID(context_cls,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getPackageManager\"</span>, <span class=\"string\">\"()Landroid/content/pm/PackageManager;\"</span>);</span><br><span class=\"line\">\tjmethodID get_package_name_mid = env-&gt;GetMethodID(context_cls,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getPackageName\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(context_cls);</span><br><span class=\"line\">\tjobject pm_obj = env-&gt;CallObjectMethod(context, get_package_manager_mid);</span><br><span class=\"line\">\tjclass pm_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/PackageManager\"</span>);</span><br><span class=\"line\">\tjmethodID get_package_info_mid = env-&gt;GetMethodID(pm_cls, <span class=\"string\">\"getPackageInfo\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;\"</span>);</span><br><span class=\"line\">\tjstring package_name = <span class=\"keyword\">reinterpret_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(</span><br><span class=\"line\">\t\t\tcontext, get_package_name_mid));</span><br><span class=\"line\">\tjfieldID flag_fid = env-&gt;GetStaticFieldID(pm_cls, <span class=\"string\">\"GET_SIGNATURES\"</span>, <span class=\"string\">\"I\"</span>);</span><br><span class=\"line\">\tjint flag = env-&gt;GetStaticIntField(pm_cls, flag_fid);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(pm_cls);</span><br><span class=\"line\">\tjobject pi_obj = env-&gt;CallObjectMethod(pm_obj, get_package_info_mid,</span><br><span class=\"line\">\t\t\tpackage_name, flag);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(package_name);</span><br><span class=\"line\">\tjclass pi_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/PackageInfo\"</span>);</span><br><span class=\"line\">\tjfieldID signatures_fid = env-&gt;GetFieldID(pi_cls, <span class=\"string\">\"signatures\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"[Landroid/content/pm/Signature;\"</span>);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(pi_cls);</span><br><span class=\"line\">\tjobject sig_obj = env-&gt;GetObjectField(pi_obj, signatures_fid);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(pi_obj);</span><br><span class=\"line\">\tjobjectArray sigs = <span class=\"keyword\">reinterpret_cast</span>&lt;jobjectArray&gt;(sig_obj);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjclass signature_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/Signature\"</span>);</span><br><span class=\"line\">\tjmethodID to_byte_array_mid = env-&gt;GetMethodID(signature_cls, <span class=\"string\">\"toByteArray\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"()[B\"</span>);</span><br><span class=\"line\">\tjbyteArray sig_bytes = <span class=\"keyword\">reinterpret_cast</span>&lt;jbyteArray&gt;(env-&gt;CallObjectMethod(</span><br><span class=\"line\">\t\t\tenv-&gt;GetObjectArrayElement(sigs, <span class=\"number\">0</span>), to_byte_array_mid));</span><br><span class=\"line\">\tjclass certificate_factory_cls = env-&gt;FindClass(</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"java/security/cert/CertificateFactory\"</span>);</span><br><span class=\"line\">\tjmethodID get_certificate_instance_mid = env-&gt;GetStaticMethodID(</span><br><span class=\"line\">\t\t\tcertificate_factory_cls, <span class=\"string\">\"getInstance\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;)Ljava/security/cert/CertificateFactory;\"</span>);</span><br><span class=\"line\">\tjobject certificate_factory_obj = env-&gt;CallStaticObjectMethod(</span><br><span class=\"line\">\t\t\tcertificate_factory_cls, get_certificate_instance_mid,</span><br><span class=\"line\">\t\t\tenv-&gt;NewStringUTF(<span class=\"string\">\"X509\"</span>));</span><br><span class=\"line\">\tjmethodID generate_certificate_mid = env-&gt;GetMethodID(</span><br><span class=\"line\">\t\t\tcertificate_factory_cls, <span class=\"string\">\"generateCertificate\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/io/InputStream;)Ljava/security/cert/Certificate;\"</span>);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_factory_cls);</span><br><span class=\"line\">\tjclass certificate_cls = env-&gt;FindClass(<span class=\"string\">\"java/security/cert/Certificate\"</span>);</span><br><span class=\"line\">\tjclass byte_input_stream_cls = env-&gt;FindClass(</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"java/io/ByteArrayInputStream\"</span>);</span><br><span class=\"line\">\tjmethodID new_sig_bytes_is_mid = env-&gt;GetMethodID(byte_input_stream_cls,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"&lt;init&gt;\"</span>, <span class=\"string\">\"([B)V\"</span>);</span><br><span class=\"line\">\tjobject sig_bytes_is = env-&gt;NewObject(byte_input_stream_cls,</span><br><span class=\"line\">\t\t\tnew_sig_bytes_is_mid, sig_bytes);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(sig_bytes);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(byte_input_stream_cls);</span><br><span class=\"line\">\tjobject cert = env-&gt;CallObjectMethod(certificate_factory_obj,</span><br><span class=\"line\">\t\t\tgenerate_certificate_mid, sig_bytes_is);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(sig_bytes_is);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_factory_obj);</span><br><span class=\"line\">\tjmethodID get_pubic_key_mid = env-&gt;GetMethodID(certificate_cls,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getPublicKey\"</span>, <span class=\"string\">\"()Ljava/security/PublicKey;\"</span>);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_cls);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjobject publicKey  = env-&gt;CallObjectMethod(cert, get_pubic_key_mid);</span><br><span class=\"line\">\tjclass publicKey_cls = env-&gt;GetObjectClass(publicKey);</span><br><span class=\"line\">\tjmethodID toString_mid = env-&gt;GetMethodID(publicKey_cls,<span class=\"string\">\"toString\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\tjstring publicKey_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey,toString_mid));</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(cert);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(publicKey_cls);</span><br><span class=\"line\">\tenv-&gt;DeleteLocalRef(publicKey);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjclass string_cls = env-&gt;GetObjectClass(publicKey_str);</span><br><span class=\"line\">\tjmethodID indexOf_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"indexOf\"</span>, <span class=\"string\">\"(Ljava/lang/String;)I\"</span>);</span><br><span class=\"line\">\tjstring param = env-&gt;NewStringUTF(<span class=\"string\">\"modulus\"</span>);</span><br><span class=\"line\">\tjint aa = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param);</span><br><span class=\"line\">\tjstring param2 = env-&gt;NewStringUTF(<span class=\"string\">\"publicExponent\"</span>);</span><br><span class=\"line\">\tjint bb = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param2);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjmethodID substring_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"substring\"</span>, <span class=\"string\">\"(II)Ljava/lang/String;\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjstring publicKey2_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,bb<span class=\"number\">-1</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> publicKey2_str;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//è·å–ç­¾å</span></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">getSignatures</span><span class=\"params\">(JNIEnv* env, jobject thizz,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">\t\tjobject thiz)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tjclass native_clazz = env-&gt;GetObjectClass(thiz);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å¾—åˆ° getPackageManager æ–¹æ³•çš„ ID</span></span><br><span class=\"line\">\tjmethodID methodID_func = env-&gt;GetMethodID(native_clazz,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getPackageManager\"</span>, <span class=\"string\">\"()Landroid/content/pm/PackageManager;\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾—åº”ç”¨åŒ…çš„ç®¡ç†å™¨</span></span><br><span class=\"line\">\tjobject package_manager = env-&gt;CallObjectMethod(thiz, methodID_func);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾— PackageManager ç±»</span></span><br><span class=\"line\">\tjclass pm_clazz = env-&gt;GetObjectClass(package_manager);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å¾—åˆ° getPackageInfo æ–¹æ³•çš„ ID</span></span><br><span class=\"line\">\tjmethodID methodID_pm = env-&gt;GetMethodID(pm_clazz, <span class=\"string\">\"getPackageInfo\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//è·å–åŒ…å</span></span><br><span class=\"line\">\tjmethodID methodID_packagename = env-&gt;GetMethodID(native_clazz,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getPackageName\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\tjstring name_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(thiz,</span><br><span class=\"line\">\t\t\tmethodID_packagename));</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾—åº”ç”¨åŒ…çš„ä¿¡æ¯</span></span><br><span class=\"line\">\tjobject package_info = env-&gt;CallObjectMethod(package_manager, methodID_pm,</span><br><span class=\"line\">\t\t\tname_str, <span class=\"number\">64</span>);\t\t<span class=\"comment\">//env-&gt;NewStringUTF(\"com.example.contasdf\")</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾— PackageInfo ç±»</span></span><br><span class=\"line\">\tjclass pi_clazz = env-&gt;GetObjectClass(package_info);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾—ç­¾åæ•°ç»„å±æ€§çš„ ID</span></span><br><span class=\"line\">\tjfieldID fieldID_signatures = env-&gt;GetFieldID(pi_clazz, <span class=\"string\">\"signatures\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"[Landroid/content/pm/Signature;\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å¾—åˆ°ç­¾åæ•°ç»„ï¼Œå¾…ä¿®æ”¹</span></span><br><span class=\"line\">\tjobject signatur = env-&gt;GetObjectField(package_info, fieldID_signatures);</span><br><span class=\"line\">\tjobjectArray signatures = <span class=\"keyword\">reinterpret_cast</span>&lt;jobjectArray&gt;(signatur);</span><br><span class=\"line\">\t<span class=\"comment\">// å¾—åˆ°ç­¾å</span></span><br><span class=\"line\">\tjobject signature = env-&gt;GetObjectArrayElement(signatures, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾— Signature ç±»ï¼Œå¾…ä¿®æ”¹</span></span><br><span class=\"line\">\tjclass s_clazz = env-&gt;GetObjectClass(signature);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å¾—åˆ° hashCode æ–¹æ³•çš„ ID</span></span><br><span class=\"line\">\tjmethodID methodID_hc = env-&gt;GetMethodID(s_clazz, <span class=\"string\">\"hashCode\"</span>, <span class=\"string\">\"()I\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾—åº”ç”¨åŒ…çš„ç®¡ç†å™¨ï¼Œå¾…ä¿®æ”¹</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> hash_code = env-&gt;CallIntMethod(signature, methodID_hc);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">char</span> str[<span class=\"number\">100</span>];</span><br><span class=\"line\">\t<span class=\"built_in\">sprintf</span>(str, <span class=\"string\">\"%u\"</span>, hash_code);</span><br><span class=\"line\"></span><br><span class=\"line\">\tjstring sign = env-&gt;NewStringUTF(str);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> sign;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">getPackageName</span><span class=\"params\">(JNIEnv* env, jobject thizz,jobject thiz)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tjclass native_clazz = env-&gt;GetObjectClass(thiz);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å¾—åˆ° getPackageManager æ–¹æ³•çš„ ID</span></span><br><span class=\"line\">\tjmethodID methodID_func = env-&gt;GetMethodID(native_clazz,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getPackageManager\"</span>, <span class=\"string\">\"()Landroid/content/pm/PackageManager;\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾—åº”ç”¨åŒ…çš„ç®¡ç†å™¨</span></span><br><span class=\"line\">\tjobject package_manager = env-&gt;CallObjectMethod(thiz, methodID_func);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è·å¾— PackageManager ç±»</span></span><br><span class=\"line\">\tjclass pm_clazz = env-&gt;GetObjectClass(package_manager);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å¾—åˆ° getPackageInfo æ–¹æ³•çš„ ID</span></span><br><span class=\"line\">\tjmethodID methodID_pm = env-&gt;GetMethodID(pm_clazz, <span class=\"string\">\"getPackageInfo\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//è·å–åŒ…å</span></span><br><span class=\"line\">\tjmethodID methodID_packagename = env-&gt;GetMethodID(native_clazz,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"getPackageName\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</span><br><span class=\"line\">\tjstring name_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(thiz,</span><br><span class=\"line\">\t\t\tmethodID_packagename));</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> name_str;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span>* <span class=\"title\">jstringTostring</span><span class=\"params\">(JNIEnv* env, jstring jstr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span>* rtn = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\tjclass clsstring = env-&gt;FindClass(<span class=\"string\">\"java/lang/String\"</span>);</span><br><span class=\"line\">\tjstring strencode = env-&gt;NewStringUTF(<span class=\"string\">\"utf-8\"</span>);</span><br><span class=\"line\">\tjmethodID mid = env-&gt;GetMethodID(clsstring, <span class=\"string\">\"getBytes\"</span>, <span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);</span><br><span class=\"line\">\tjbyteArray barr= (jbyteArray)env-&gt;CallObjectMethod(jstr, mid, strencode);</span><br><span class=\"line\">\tjsize alen = env-&gt;GetArrayLength(barr);</span><br><span class=\"line\">\tjbyte* ba = env-&gt;GetByteArrayElements(barr, JNI_FALSE);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (alen &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\trtn = (<span class=\"keyword\">char</span>*)<span class=\"built_in\">malloc</span>(alen + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"built_in\">memcpy</span>(rtn, ba, alen);</span><br><span class=\"line\">\t\trtn[alen] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tenv-&gt;ReleaseByteArrayElements(barr, ba, <span class=\"number\">0</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> rtn;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">jstring <span class=\"title\">Java_net_robinx_lib_encrypt_SecretKeyHelper_createSecretKey</span><span class=\"params\">(JNIEnv* env, jobject thizz,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">\t\tjobject thiz)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tjstring imei = getAppendedString(env, thizz, getDeviceID(env, thizz, thiz),getSerialNumber(env, thizz, thiz));</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"imei = %s\"</span>,jstringTostring(env,imei));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjstring sign = getPublicKey(env, thizz, thiz);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"sign = %s\"</span>,jstringTostring(env,sign));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjstring imei_sign = getAppendedString(env, thizz, imei, sign);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"imei_sign = %s\"</span>,jstringTostring(env,imei_sign));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjstring package = getPackageName(env, thizz, thiz);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"package = %s\"</span>,jstringTostring(env,package));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tjstring imei_sign_package = getAppendedString(env, thizz, imei_sign,package);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"imei_sign_package = %s\"</span>,jstringTostring(env,imei_sign_package));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\timei_sign_package = getAppendedString(env, thizz, imei_sign_package, imei);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"imei_sign_package2 = %s\"</span>,jstringTostring(env,imei_sign_package));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\timei_sign_package = getAppendedString(env, thizz, imei_sign_package, sign);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"imei_sign_package3 = %s\"</span>,jstringTostring(env,imei_sign_package));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tjstring secretKey = getMD5(env, imei_sign_package);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LOGOPEN == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">\t\tLOGD(<span class=\"string\">\"secretKey = %s\"</span>,jstringTostring(env,secretKey));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> secretKey;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"Application-mkæ–‡ä»¶\"><a href=\"#Application-mkæ–‡ä»¶\" class=\"headerlink\" title=\"Application.mkæ–‡ä»¶\"></a>Application.mkæ–‡ä»¶</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">APP_STL := stlport_static</span><br><span class=\"line\"></span><br><span class=\"line\">APP_ABI := all</span><br><span class=\"line\">APP_PLATFORM:= android-<span class=\"number\">22</span></span><br><span class=\"line\">APP_OPTIM\t:= release</span><br></pre></td></tr></table></figure>\n<h5 id=\"Android-mkæ–‡ä»¶\"><a href=\"#Android-mkæ–‡ä»¶\" class=\"headerlink\" title=\"Android.mkæ–‡ä»¶\"></a>Android.mkæ–‡ä»¶</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LOCAL_PATH:=$(call my-dir)</span><br><span class=\"line\"></span><br><span class=\"line\">include $(CLEAR_VARS)</span><br><span class=\"line\"></span><br><span class=\"line\">LOCAL_MODULE:=secretkey</span><br><span class=\"line\"></span><br><span class=\"line\">LOCAL_SRC_FILES:=secretkey.cpp secretkey.h</span><br><span class=\"line\"></span><br><span class=\"line\">LOCAL_LDLIBS :=-llog</span><br><span class=\"line\"></span><br><span class=\"line\">include $(BUILD_SHARED_LIBRARY)</span><br></pre></td></tr></table></figure>\n<p>æœ€ç»ˆè¿”å›imei(æ‰‹æœºIMEI)+sign(ç­¾å)+package(åŒ…å)+imei(æ‰‹æœºIMEI)+sign(ç­¾å)çš„MD5ç»“æœï¼Œä½ å¯ä»¥ä¿®æ”¹cppæœ«å°¾ä½ç½®ï¼Œè‡ªå·±ç»„åˆï¼Œç©¿æ’æ·»åŠ å…¶ä»–çš„å­—ç¬¦ä¸²<br>åšåˆ°å”¯ä¸€æ€§</p>\n<p>è¿™æ ·æ•´ä¸ªåŠ å¯†æµç¨‹å°±å®Œæ¯•äº†ï¼Œç”¨èµ·æ¥å¾ˆæ–¹ä¾¿</p>\n<h2 id=\"ä»£ç è·å–\"><a href=\"#ä»£ç è·å–\" class=\"headerlink\" title=\"ä»£ç è·å–\"></a>ä»£ç è·å–</h2><p><a href=\"https://github.com/robinxdroid/Encrypt\" target=\"_blank\" rel=\"noopener\">https://github.com/robinxdroid/Encrypt</a> </p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2016/11/30/åŠ å¯†ä½ çš„App/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2016/11/30/åŠ å¯†ä½ çš„App/</a></p>\n</blockquote>\n","categories":["Android","NDK"],"tags":["NDK","åŠ å¯†","Conceal","encrypt"]},{"title":"AndroidStudio2.2ä¹‹åNDKç¼–è¯‘","url":"http://yoursite.com/2016/11/29/AndroidStudio2-2ä¹‹åNDKç¼–è¯‘/","content":"<p>AndroidStudioæ›´æ–°ä¸º2.2ä¹‹åå‘ç°NDKç¼–è¯‘å‡ºäº†é—®é¢˜ï¼Œè€æ˜¯ç¼–è¯‘ä¸é€šè¿‡ï¼ŒæŸ¥é˜…ç›¸å…³èµ„æ–™åå‘ç°2.2ä¹‹åNDKé…ç½®æ–¹å¼ä¸å¤ªä¸€æ ·äº†</p>\n<h3 id=\"2-2ä¹‹å‰ç¼–è¯‘æ–¹å¼ï¼š\"><a href=\"#2-2ä¹‹å‰ç¼–è¯‘æ–¹å¼ï¼š\" class=\"headerlink\" title=\"2.2ä¹‹å‰ç¼–è¯‘æ–¹å¼ï¼š\"></a>2.2ä¹‹å‰ç¼–è¯‘æ–¹å¼ï¼š</h3><blockquote>\n<p>åœ¨build.gradleæ–‡ä»¶ä¸­</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">   \tcompileSdkVersion ANDROID_BUILD_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">   \tbuildToolsVersion ANDROID_BUILD_TOOLS_VERSION</span><br><span class=\"line\"></span><br><span class=\"line\">   \tdefaultConfig &#123;</span><br><span class=\"line\">   \t    minSdkVersion ANDROID_BUILD_MIN_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">    \t  targetSdkVersion ANDROID_BUILD_TARGET_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">     \t  versionCode VERSION_CODE as <span class=\"keyword\">int</span></span><br><span class=\"line\">      \t versionName VERSION_NAME</span><br><span class=\"line\"></span><br><span class=\"line\">      \t ndk &#123;</span><br><span class=\"line\">      \t     moduleName <span class=\"string\">\"blur\"</span></span><br><span class=\"line\">      \t     cFlags <span class=\"string\">\"-DANDROID_NDK -D_RELEASE\"</span></span><br><span class=\"line\">      \t     ldLibs <span class=\"string\">\"m\"</span>, <span class=\"string\">\"log\"</span>, <span class=\"string\">\"jnigraphics\"</span></span><br><span class=\"line\">      \t     abiFilters <span class=\"string\">\"all\"</span></span><br><span class=\"line\">     \t  &#125;</span><br><span class=\"line\">  \t    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶ååœ¨gradle.propertiesæ–‡ä»¶ä¸­æ·»åŠ </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android.useDeprecatedNdk=<span class=\"keyword\">true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2ä¹‹åç¼–è¯‘æ–¹å¼ï¼š\"><a href=\"#2-2ä¹‹åç¼–è¯‘æ–¹å¼ï¼š\" class=\"headerlink\" title=\"2.2ä¹‹åç¼–è¯‘æ–¹å¼ï¼š\"></a>2.2ä¹‹åç¼–è¯‘æ–¹å¼ï¼š</h3><blockquote>\n<p>åœ¨build.gradleæ–‡ä»¶ä¸­</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">   \tcompileSdkVersion ANDROID_BUILD_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">   \tbuildToolsVersion ANDROID_BUILD_TOOLS_VERSION</span><br><span class=\"line\"></span><br><span class=\"line\">  \t \tdefaultConfig &#123;</span><br><span class=\"line\">  \t    \t minSdkVersion ANDROID_BUILD_MIN_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">   \t\t targetSdkVersion ANDROID_BUILD_TARGET_SDK_VERSION as <span class=\"keyword\">int</span></span><br><span class=\"line\">   \t \t versionCode VERSION_CODE as <span class=\"keyword\">int</span></span><br><span class=\"line\">   \t \t versionName VERSION_NAME</span><br><span class=\"line\"></span><br><span class=\"line\"> \t    &#125;</span><br><span class=\"line\">  \t \tbuildTypes &#123;</span><br><span class=\"line\">  \t     \trelease &#123;</span><br><span class=\"line\">  \t         \tminifyEnabled <span class=\"keyword\">false</span></span><br><span class=\"line\">   \t     \t<span class=\"function\">proguardFiles <span class=\"title\">getDefaultProguardFile</span><span class=\"params\">(<span class=\"string\">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class=\"line\"><span class=\"function\">    \t\t&#125;</span></span><br><span class=\"line\"><span class=\"function\"> \t  \t&#125;</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">  \t \texternalNativeBuild </span>&#123;</span><br><span class=\"line\">  \t     \tndkBuild &#123;</span><br><span class=\"line\">    \t    \t<span class=\"function\">path <span class=\"title\">file</span><span class=\"params\">(<span class=\"string\">\"src/main/jni/Android.mk\"</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">    \t \t&#125;</span></span><br><span class=\"line\"><span class=\"function\"> \t  \t&#125;</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>ç„¶åå¯¼èˆªâ€”â€”&gt;Buildâ€”â€”&gt;Make Projectå³å¯ï¼Œä¼šåœ¨ç›®å½•ä¸­å¤šå‡ºæ¥.externalNativeBuildæ–‡ä»¶å¤¹</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2016/11/29/AndroidStudio2-2ä¹‹åNDKç¼–è¯‘/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2016/11/29/AndroidStudio2-2ä¹‹åNDKç¼–è¯‘/</a></p>\n</blockquote>\n","categories":["Android","NDK"],"tags":["NDK","AndroidStudio"]},{"title":"Hexoæ­å»ºä¸ªäººBlog","url":"http://yoursite.com/2016/11/28/Hexoæ­å»ºä¸ªäººBlog/","content":"<h2 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h2><p>Hexoæ­å»ºä¸ªäººåšå®¢</p>\n<h2 id=\"ç¯å¢ƒé…ç½®\"><a href=\"#ç¯å¢ƒé…ç½®\" class=\"headerlink\" title=\"ç¯å¢ƒé…ç½®\"></a>ç¯å¢ƒé…ç½®</h2><h3 id=\"å®‰è£…Node\"><a href=\"#å®‰è£…Node\" class=\"headerlink\" title=\"å®‰è£…Node\"></a>å®‰è£…Node</h3><p><a href=\"https://nodejs.org/en/\" target=\"_blank\" rel=\"noopener\">åˆ°Node.jsçš„å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</a></p>\n<h3 id=\"å®‰è£…git\"><a href=\"#å®‰è£…git\" class=\"headerlink\" title=\"å®‰è£…git\"></a>å®‰è£…git</h3><p>ä¸‹è½½å®‰è£…<a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"noopener\">git</a>,é™„åŸºæœ¬<a href=\"https://git-scm.com/book/zh/v1\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨æ•™ç¨‹</a></p>\n<h3 id=\"å®‰è£…Sublime-Text\"><a href=\"#å®‰è£…Sublime-Text\" class=\"headerlink\" title=\"å®‰è£…Sublime Text\"></a>å®‰è£…Sublime Text</h3><p>ä¸‹è½½å®‰è£…<a href=\"http://www.sublimetext.com/3\" target=\"_blank\" rel=\"noopener\">Sunlime Text</a>æ–‡æœ¬ç¼–è¾‘å™¨,å…¶ä»–çš„ç¼–è¾‘å™¨ä¹Ÿå¯ä»¥ï¼Œä¸ªäººæ¨è</p>\n<h3 id=\"Githubè´¦å·æ³¨å†Œ\"><a href=\"#Githubè´¦å·æ³¨å†Œ\" class=\"headerlink\" title=\"Githubè´¦å·æ³¨å†Œ\"></a>Githubè´¦å·æ³¨å†Œ</h3><ul>\n<li>é¦–å…ˆå»<a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener\">Github</a>æ³¨å†Œè´¦å·</li>\n<li>åˆ›å»ºä»“åº“ New repository åœ¨Repository nameä¸­å¿…é¡»ä¸ºä½ çš„<code>[your_user_name].github.io</code></li>\n<li>åˆ›å»ºSSH Key<br><br>åˆ›å»ºä½ çš„ç”¨æˆ·åä¸å¯†ç :<br><br><code>git config --global user.email &quot;your email&quot;</code><br><br><code>git config --global user.name &quot;your name&quot;</code><br><br>ç”Ÿæˆå¯†é’¥ï¼š<br><br><code>ssh-keygen -t rsa -C &quot;your email&quot;</code><br><br>æœ€åæ ¹æ®æç¤ºå°±èƒ½ç”ŸæˆSSH Keyäº†<a href=\"https://help.github.com/articles/connecting-to-github-with-ssh/\" target=\"_blank\" rel=\"noopener\">æ•™ç¨‹å‚è€ƒ</a><br></li>\n<li>è¿›å…¥Settingsä¸­çš„SSH Keys æ·»åŠ å¯†åŒ™</li>\n</ul>\n<h2 id=\"Hexoå®‰è£…å’Œé…ç½®\"><a href=\"#Hexoå®‰è£…å’Œé…ç½®\" class=\"headerlink\" title=\"Hexoå®‰è£…å’Œé…ç½®\"></a>Hexoå®‰è£…å’Œé…ç½®</h2><ol>\n<li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚blog ã€‚</li>\n<li>è¿›å…¥blogæ–‡ä»¶å¤¹ï¼Œå³é”®ç‚¹å‡»<code>Git Bash Here</code></li>\n<li><p>å®‰è£…Hexo<br><br><code>$ npm install hexo-cli -g</code></p>\n</li>\n<li><p>åˆå§‹åŒ–blogæ–‡ä»¶å¤¹<br><br><code>$ hexo init</code></p>\n</li>\n<li><p>å®‰è£…ä¾èµ–å’Œæ’ä»¶<br><br><code>$ npm install</code></p>\n</li>\n<li><p>å¯åŠ¨æœåŠ¡å™¨è¿›è¡Œæœ¬åœ°é¢„è§ˆ<br><br><code>$ hexo server</code></p>\n</li>\n<li><p>å½“çœ‹åˆ°INFO  Hexo is running at <a href=\"http://0.0.0.0:4000/\" target=\"_blank\" rel=\"noopener\">http://0.0.0.0:4000/</a>. Press Ctrl+C to stop.æ—¶å°±è¯´æ˜æˆ‘ä»¬å·²ç»æ­å»ºèµ·æœ¬åœ°çš„hexoåšå®¢äº†ï¼Œ<br>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href=\"http://localhost:4000\" target=\"_blank\" rel=\"noopener\">http://localhost:4000</a> æ³¨æ„ï¼šä¸è¦æ‰“å¼€æç¤ºçš„0.0.0.0:4000ã€‚ï¼Œ æˆåŠŸçš„è¯å³å¯çœ‹åˆ°åšå®¢é¡µé¢ï¼Œè‡³æ­¤å®‰è£…å°±å®Œæˆäº†ã€‚</p>\n</li>\n<li><p>ç„¶åå›åˆ°å‘½ä»¤çª—å£æŒ‰Ctrl+Cåœæ­¢æœåŠ¡ï¼ˆæœ‰æ—¶è¦æŒ‰ä¸¤æ¬¡Ctrl+Cï¼Œå› ä¸ºæœ‰æ—¶Git Bashè®¤ä¸ºå½“å‰åœ¨è¿›è¡Œå¤åˆ¶æ“ä½œï¼‰ï¼Œç›´åˆ°å‡ºç° â€œ$â€æ ‡å¿—å°±ç»“æŸäº†ã€‚ ç„¶åå…³é—­Git Bash.</p>\n</li>\n</ol>\n<h2 id=\"Hexoå¸¸ç”¨å‘½ä»¤\"><a href=\"#Hexoå¸¸ç”¨å‘½ä»¤\" class=\"headerlink\" title=\"Hexoå¸¸ç”¨å‘½ä»¤\"></a>Hexoå¸¸ç”¨å‘½ä»¤</h2><p>æ‰§è¡Œå‘½ä»¤éœ€è¦Gitå½“å‰å¤„äºblogæ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸‹ã€‚</p>\n<ul>\n<li><p>å¼€å¯æœ¬åœ°æœåŠ¡<br><br><code>hexo server</code></p>\n</li>\n<li><p>æ–°å»ºæ–‡ä»¶<br><br><code>hexo new æ–°æ–‡ç« åç§°</code></p>\n</li>\n<li><p>æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)<br><br><code>hexo clean</code></p>\n</li>\n<li><p>ç”Ÿæˆé™æ€é¡µé¢<br><br><code>hexo gengerate</code></p>\n</li>\n<li><p>éƒ¨ç½²ç½‘ç«™ã€‚éƒ¨ç½²ç½‘ç«™å‰ï¼Œéœ€è¦é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶<br><br><code>hexo deploy</code></p>\n</li>\n</ul>\n<h3 id=\"å†™åšå®¢ä¸€èˆ¬æ­¥éª¤\"><a href=\"#å†™åšå®¢ä¸€èˆ¬æ­¥éª¤\" class=\"headerlink\" title=\"å†™åšå®¢ä¸€èˆ¬æ­¥éª¤\"></a>å†™åšå®¢ä¸€èˆ¬æ­¥éª¤</h3><ol>\n<li>æ–°å»ºæ–‡ç« <br><br><code>hexo new &quot;PostName&quot;</code></li>\n<li>éƒ¨ç½²ï¼š<br><br><code>hexo clean</code> // æ¸…ç†<br><br><code>hexo generate</code> // ç”Ÿæˆ<br><br><code>hexo deploy</code> // éƒ¨ç½²<br><br>æˆ–è€…ç®€å†™ï¼š<br><br><code>hexo c</code><br><br><code>hexo g</code><br><br><code>hexo d</code><br></li>\n<li>éƒ¨ç½²å®Œæˆåæ‰“å¼€æµè§ˆå™¨è¾“å…¥http://[your_user_name].github.io å°±æ˜¯å‰é¢githubä¸­å»ºä»“åº“çš„åå­—ã€‚<br>åˆ°æ­¤æ‰€ç”¨çš„å®‰è£…ä¸é…ç½®å·²ç»å®Œæˆ</li>\n</ol>\n<h2 id=\"ä¸‹è½½ä¸»é¢˜\"><a href=\"#ä¸‹è½½ä¸»é¢˜\" class=\"headerlink\" title=\"ä¸‹è½½ä¸»é¢˜\"></a>ä¸‹è½½ä¸»é¢˜</h2><p>è¿™é‡Œæœ‰å¾ˆå¤š<a href=\"https://github.com/hexojs/hexo/wiki/Themes\" target=\"_blank\" rel=\"noopener\">Hexoä¸»é¢˜</a>ï¼Œå¯è‡ªè¡Œä¸‹è½½<br><br>æœ¬åšå®¢ä½¿ç”¨ä¸»é¢˜ä¸º<a href=\"https://github.com/forsigner/fexo\" target=\"_blank\" rel=\"noopener\">Fexo</a>,æ„Ÿå…´è¶£çš„å¯å…å»å¯»æ‰¾</p>\n<h2 id=\"è¯„è®ºæ¡†\"><a href=\"#è¯„è®ºæ¡†\" class=\"headerlink\" title=\"è¯„è®ºæ¡†\"></a>è¯„è®ºæ¡†</h2><p>è¯„è®ºæœ‰Disqusä¸å¤šè¯´ï¼Œåœ¨å›½å†…æ¨èå¤šè¯´ï¼ŒDisqusæ˜¯é¢å‘å…¨çƒçš„</p>\n<h3 id=\"Disqus\"><a href=\"#Disqus\" class=\"headerlink\" title=\"Disqus\"></a>Disqus</h3><p><a href=\"https://disqus.com/\" target=\"_blank\" rel=\"noopener\">Disqus</a>æ³¨å†ŒDisquså¸å·</p>\n<h3 id=\"å¤šè¯´\"><a href=\"#å¤šè¯´\" class=\"headerlink\" title=\"å¤šè¯´\"></a>å¤šè¯´</h3><p><a href=\"http://duoshuo.com/\" target=\"_blank\" rel=\"noopener\">å¤šè¯´</a>å¯ä»¥æ”¯æŒQQ å¾®ä¿¡ç­‰ç™»å½•ï¼Œç™»å½•åæ³¨å†ŒåŸŸå<br>è¿›å…¥hexoç›®å½•æ‰“å¼€_config.ymlæ–‡ä»¶æ‰¾åˆ°</p>\n<p> <code>disqus_shortname: [åŸŸå]</code><br><br> <code>duoshuo_shortname: [åŸŸå]</code></p>\n<p>Disqusä¹Ÿæ˜¯ä¸€æ ·</p>\n<h2 id=\"ç»Ÿè®¡\"><a href=\"#ç»Ÿè®¡\" class=\"headerlink\" title=\"ç»Ÿè®¡\"></a>ç»Ÿè®¡</h2><p>è¿™é‡Œåªè¯´ç™¾åº¦ç»Ÿè®¡</p>\n<p>è¿›å…¥<a href=\"http://tongji.baidu.com/web/welcome/login\" target=\"_blank\" rel=\"noopener\">ç™¾åº¦ç»Ÿè®¡</a>æ³¨å†Œç™»å½•å¸å·<br>è¿›å»ç½‘ç«™ä¸­å¿ƒçš„ä»£ç è·å– æŠŠè·å–çš„ä»£ç æ”¾å…¥ hexo/themes/fexo/layout/_partialä¸­baidu-analytics.ejsæ–‡ä»¶</p>\n<pre><code>&lt;% if (theme.baidu_analytics){ %&gt;\n  &lt;script type=&quot;text/javascript&quot;&gt;\n  //è·å–çš„ä»£ç \n   &lt;/script&gt;\n&lt;% } %&gt;\n</code></pre><h2 id=\"å†™æ–‡ç« \"><a href=\"#å†™æ–‡ç« \" class=\"headerlink\" title=\"å†™æ–‡ç« \"></a>å†™æ–‡ç« </h2><p>è¿›å…¥hexoï¼sourceï¼_posts æ‰¾åˆ°ç›¸å…³æ–‡ç« çš„.md è¿›è¡Œç¼–å†™,hexoå†™æ–‡ç« æ˜¯ä½¿ç”¨Markdownç¼–å†™æ–‡ç« </p>\n<h2 id=\"åˆ é™¤æ–‡ç« \"><a href=\"#åˆ é™¤æ–‡ç« \" class=\"headerlink\" title=\"åˆ é™¤æ–‡ç« \"></a>åˆ é™¤æ–‡ç« </h2><p>åˆ é™¤æ–‡ç« åªè¦åˆ é™¤å¯¹åº”çš„.mdæ–‡ä»¶å°±è¡Œ</p>\n<h2 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h2><p>æ‰§è¡Œä»¥ä¸Šæ­¥éª¤å°±å¯ä»¥æ­å»ºåšå®¢å®Œæˆã€‚</p>\n<blockquote>\n<p>è½¬è½½è¯·æŒ‡æ˜å‡ºå¤„RobinBlogï¼š<a href=\"http://robinx.net/2016/11/28/Hexoæ­å»ºä¸ªäººBlog/\" target=\"_blank\" rel=\"noopener\">http://robinx.net/2016/11/28/Hexoæ­å»ºä¸ªäººBlog/</a></p>\n</blockquote>\n","categories":["Hexo"],"tags":["Hexo","Blog"]},{"title":"Hello World","url":"http://yoursite.com/2016/11/27/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","categories":[],"tags":[]},{"title":"about","url":"http://yoursite.com/about/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"http://yoursite.com/css/personal-style.css","content":"html.page-home {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  /*background-image: url('/images/index_bg/index_bg_07.jpg');*/\n  /*background-color: transparent;*/\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n\n  /*background: linear-gradient( #1abc9c, transparent), linear-gradient( 90deg, skyblue, transparent), linear-gradient( -90deg, coral, transparent);*/\n  /*background-blend-mode: screen;*/\n\n  background: linear-gradient(to left, #5f2c82, #49a09d);\n}","categories":[],"tags":[]},{"title":"project","url":"http://yoursite.com/project/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"http://yoursite.com/category/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"http://yoursite.com/link/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://yoursite.com/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"http://yoursite.com/tag/index.html","content":"","categories":[],"tags":[]}]